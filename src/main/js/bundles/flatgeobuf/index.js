/*
 * Copyright (C) 2022 con terra GmbH (info@conterra.de)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
define((function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=35)}([function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return l})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return p})),n.d(e,"g",(function(){return v})),n.d(e,"h",(function(){return y})),n.d(e,"i",(function(){return _})),n.d(e,"j",(function(){return m})),n.d(e,"k",(function(){return x})),n.d(e,"l",(function(){return O})),n.d(e,"m",(function(){return P})),n.d(e,"n",(function(){return F})),n.d(e,"p",(function(){return S})),n.d(e,"o",(function(){return E})),n.d(e,"a",(function(){return j}));var r=0,i=1,o=2,s=4,a=8,u=16;n(18);function c(t,e,n){var r,i;return(r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*r+(i=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*i}function f(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function l(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function h(t,e){var n=t[0],c=t[1],f=t[2],l=t[3],h=e[0],d=e[1],b=r;return h<n?b|=u:h>f&&(b|=s),d<c?b|=a:d>l&&(b|=o),b===r&&(b=i),b}function d(){return[1/0,1/0,-1/0,-1/0]}function b(t,e,n,r,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=r,i):[t,e,n,r]}function p(t){return b(1/0,1/0,-1/0,-1/0,t)}function v(t,e){var n=t[0],r=t[1];return b(n,r,n,r,e)}function y(t,e,n,r,i){return _(p(i),t,e,n,r)}function _(t,e,n,r,i){for(;n<r;n+=i)g(t,e[n],e[n+1]);return t}function g(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function m(t,e){var n;return(n=e(w(t)))||(n=e(k(t)))||(n=e(C(t)))?n:(n=e(I(t)))||!1}function w(t){return[t[0],t[1]]}function k(t){return[t[2],t[1]]}function x(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function O(t){return t[3]-t[1]}function I(t){return[t[0],t[3]]}function C(t){return[t[2],t[3]]}function P(t){return t[2]-t[0]}function F(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function S(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function E(t,e,n){var r=!1,c=h(t,e),f=h(t,n);if(c===i||f===i)r=!0;else{var l=t[0],d=t[1],b=t[2],p=t[3],v=e[0],y=e[1],_=n[0],g=n[1],m=(g-y)/(_-v),w=void 0,k=void 0;f&o&&!(c&o)&&(r=(w=_-(g-p)/m)>=l&&w<=b),r||!(f&s)||c&s||(r=(k=g-(_-b)*m)>=d&&k<=p),r||!(f&a)||c&a||(r=(w=_-(g-d)/m)>=l&&w<=b),r||!(f&u)||c&u||(r=(k=g-(_-l)*m)>=d&&k<=p)}return r}function j(t,e,n,r){var i=[];if(r>1)for(var o=t[2]-t[0],s=t[3]-t[1],a=0;a<r;++a)i.push(t[0]+o*a/r,t[1],t[2],t[1]+s*a/r,t[2]-o*a/r,t[3],t[0],t[3]-s*a/r);else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);for(var u=[],c=[],f=(a=0,i.length);a<f;a+=2)u.push(i[a]),c.push(i[a+1]);return function(t,e,n){return b(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}(u,c,n)}},function(t,e,n){"use strict";function r(t,e,n){return Math.min(Math.max(t,e),n)}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"g",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return f}));var i="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};"log2"in Math&&Math.log2;function o(t,e,n,r,i,o){var a=i-n,u=o-r;if(0!==a||0!==u){var c=((t-n)*a+(e-r)*u)/(a*a+u*u);c>1?(n=i,r=o):c>0&&(n+=a*c,r+=u*c)}return s(t,e,n,r)}function s(t,e,n,r){var i=n-t,o=r-e;return i*i+o*o}function a(t){return 180*t/Math.PI}function u(t){return t*Math.PI/180}function c(t,e){var n=t%e;return n*e<0?n+e:n}function f(t,e,n){return t+n*(e-t)}},function(t,e,n){"use strict";e.a={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},function(t,e,n){"use strict";e.a={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}},function(t,e,n){"use strict";function r(t,e,n){for(var r,o,s=n||i,a=0,u=t.length,c=!1;a<u;)(o=+s(t[r=a+(u-a>>1)],e))<0?a=r+1:(u=r,c=!o);return c?a:~a}function i(t,e){return t>e?1:t<e?-1:0}function o(t,e){for(var n=Array.isArray(e)?e:[e],r=n.length,i=0;i<r;i++)t[t.length]=n[i]}function s(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return s}))},function(t,e,n){"use strict";function r(){return function(){throw new Error("Unimplemented abstract method.")}()}n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return s}));var i=0;function o(t){return t.ol_uid||(t.ol_uid=String(++i))}var s="6.9.0"},function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"f",(function(){return a})),n.d(e,"d",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return f}));var r=n(1);function i(t,e,n,i,o,s,a){var u,c=t[e],f=t[e+1],l=t[n]-c,h=t[n+1]-f;if(0===l&&0===h)u=e;else{var d=((o-c)*l+(s-f)*h)/(l*l+h*h);if(d>1)u=n;else{if(d>0){for(var b=0;b<i;++b)a[b]=Object(r.c)(t[e+b],t[n+b],d);return void(a.length=i)}u=e}}for(b=0;b<i;++b)a[b]=t[u+b];a.length=i}function o(t,e,n,i,o){var s=t[e],a=t[e+1];for(e+=i;e<n;e+=i){var u=t[e],c=t[e+1],f=Object(r.e)(s,a,u,c);f>o&&(o=f),s=u,a=c}return o}function s(t,e,n,r,i){for(var s=0,a=n.length;s<a;++s){var u=n[s];i=o(t,e,u,r,i),e=u}return i}function a(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var u=n[o];i=s(t,e,u,r,i),e=u[u.length-1]}return i}function u(t,e,n,o,s,a,u,c,f,l,h){if(e==n)return l;var d,b;if(0===s){if((b=Object(r.e)(u,c,t[e],t[e+1]))<l){for(d=0;d<o;++d)f[d]=t[e+d];return f.length=o,b}return l}for(var p=h||[NaN,NaN],v=e+o;v<n;)if(i(t,v-o,v,o,u,c,p),(b=Object(r.e)(u,c,p[0],p[1]))<l){for(l=b,d=0;d<o;++d)f[d]=p[d];f.length=o,v+=o}else v+=o*Math.max((Math.sqrt(b)-Math.sqrt(l))/s|0,1);if(a&&(i(t,n-o,e,o,u,c,p),(b=Object(r.e)(u,c,p[0],p[1]))<l)){for(l=b,d=0;d<o;++d)f[d]=p[d];f.length=o}return l}function c(t,e,n,r,i,o,s,a,c,f,l){for(var h=l||[NaN,NaN],d=0,b=n.length;d<b;++d){var p=n[d];f=u(t,e,p,r,i,o,s,a,c,f,h),e=p}return f}function f(t,e,n,r,i,o,s,a,u,f,l){for(var h=l||[NaN,NaN],d=0,b=n.length;d<b;++d){var p=n[d];f=c(t,e,p,r,i,o,s,a,u,f,h),e=p[p.length-1]}return f}},function(t,e,n){"use strict";function r(t,e,n,r){for(var i=0,o=n.length;i<o;++i)t[e++]=n[i];return e}function i(t,e,n,r){for(var i=0,o=n.length;i<o;++i)for(var s=n[i],a=0;a<r;++a)t[e++]=s[a];return e}function o(t,e,n,r,o){for(var s=o||[],a=0,u=0,c=n.length;u<c;++u){var f=i(t,e,n[u],r);s[a++]=f,e=f}return s.length=a,s}function s(t,e,n,r,i){for(var s=i||[],a=0,u=0,c=n.length;u<c;++u){var f=o(t,e,n[u],r,s[a]);s[a++]=f,e=f[f.length-1]}return s.length=a,s}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return s}))},function(t,e,n){"use strict";var r=n(28),i={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"};var o={};o[i.RADIANS]=6370997/(2*Math.PI),o[i.DEGREES]=2*Math.PI*6370997/360,o[i.FEET]=.3048,o[i.METERS]=1,o[i.USFEET]=1200/3937;var s=i,a=n(5),u="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"";u.indexOf("firefox"),-1!==u.indexOf("safari")&&u.indexOf("chrom"),-1!==u.indexOf("webkit")&&u.indexOf("edge"),u.indexOf("macintosh"),"undefined"!=typeof devicePixelRatio&&devicePixelRatio,"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&(self,WorkerGlobalScope),"undefined"!=typeof Image&&Image.prototype.decode,function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}}(),n(18),new Array(6);function c(t,e,n,r,i,o,s,a){var u=Math.sin(o),c=Math.cos(o);return t[0]=r*c,t[1]=i*u,t[2]=-r*u,t[3]=i*c,t[4]=s*r*c-a*r*u+e,t[5]=s*i*u+a*i*c+n,t}var f,l=n(0),h=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||o[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}(),d=n(1),b=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=6378137*Math.PI,v=[-p,-p,p,p],y=[-180,-85,180,85],_=6378137*Math.log(Math.tan(Math.PI/2)),g=function(t){function e(e){return t.call(this,{code:e,units:s.METERS,extent:v,global:!0,worldExtent:y,getPointResolution:function(t,e){return t/Object(d.b)(e[1]/6378137)}})||this}return b(e,t),e}(h),m=[new g("EPSG:3857"),new g("EPSG:102100"),new g("EPSG:102113"),new g("EPSG:900913"),new g("http://www.opengis.net/def/crs/EPSG/0/3857"),new g("http://www.opengis.net/gml/srs/epsg.xml#3857")];function w(t,e,n){var r=t.length,i=n>1?n:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(r));for(var s=0;s<r;s+=i){o[s]=p*t[s]/180;var a=6378137*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));a>_?a=_:a<-_&&(a=-_),o[s+1]=a}return o}function k(t,e,n){var r=t.length,i=n>1?n:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(r));for(var s=0;s<r;s+=i)o[s]=180*t[s]/p,o[s+1]=360*Math.atan(Math.exp(t[s+1]/6378137))/Math.PI-90;return o}var x=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),O=[-180,-90,180,90],I=6378137*Math.PI/180,C=function(t){function e(e,n){return t.call(this,{code:e,units:s.DEGREES,extent:O,axisOrientation:n,global:!0,metersPerUnit:I,worldExtent:O})||this}return x(e,t),e}(h),P=[new C("CRS:84"),new C("EPSG:4326","neu"),new C("urn:ogc:def:crs:OGC:1.3:CRS84"),new C("urn:ogc:def:crs:OGC:2:84"),new C("http://www.opengis.net/def/crs/OGC/1.3/CRS84","neu"),new C("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new C("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],F={};n(12);var S={};function E(t,e,n){var r=t.getCode(),i=e.getCode();r in S||(S[r]={}),S[r][i]=n}n(23);function j(t,e,n){var r;if(void 0!==e){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];r=e}else r=t.slice();return r}function R(t,e,n){if(void 0!==e&&t!==e){for(var r=0,i=t.length;r<i;++r)e[r]=t[r];t=e}return t}function U(t){!function(t,e){F[t]=e}(t.getCode(),t),E(t,t,j)}function T(t){return"string"==typeof t?F[e=t]||F[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function A(t){!function(t){t.forEach(U)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&E(e,t,j)}))}))}function M(t,e){var n=function(t,e){var n;return t in S&&e in S[t]&&(n=S[t][e]),n}(t.getCode(),e.getCode());return n||(n=R),n}function V(t,e){return M(T(t),T(e))}var L,N,B;A(m),A(P),L=m,N=w,B=k,P.forEach((function(t){L.forEach((function(e){E(t,e,N),E(e,t,B)}))}));var G=n(22);function q(t,e,n,r,i,o){for(var s=o||[],a=0,u=e;u<n;u+=r){var c=t[u],f=t[u+1];s[a++]=i[0]*c+i[2]*f+i[4],s[a++]=i[1]*c+i[3]*f+i[5]}return o&&s.length!=a&&(s.length=a),s}var D=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),z=[1,0,0,1,0,0],X=function(t){function e(){var e=t.call(this)||this;return e.extent_=Object(l.e)(),e.extentRevision_=-1,e.simplifiedGeometryMaxMinSquaredTolerance=0,e.simplifiedGeometryRevision=0,e.simplifyTransformedInternal=Object(G.b)((function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);var r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(e)})),e}return D(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return Object(a.b)()},e.prototype.closestPointXY=function(t,e,n,r){return Object(a.b)()},e.prototype.containsXY=function(t,e){var n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return Object(a.b)()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Object(l.f)(e),this.extentRevision_=this.getRevision()}return Object(l.p)(this.extent_,t)},e.prototype.rotate=function(t,e){Object(a.b)()},e.prototype.scale=function(t,e,n){Object(a.b)()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return Object(a.b)()},e.prototype.getType=function(){return Object(a.b)()},e.prototype.applyTransform=function(t){Object(a.b)()},e.prototype.intersectsExtent=function(t){return Object(a.b)()},e.prototype.translate=function(t,e){Object(a.b)()},e.prototype.transform=function(t,e){var n=T(t),r=n.getUnits()==s.TILE_PIXELS?function(t,r,i){var o=n.getExtent(),s=n.getWorldExtent(),a=Object(l.l)(s)/Object(l.l)(o);return c(z,s[0],s[3],a,-a,0,0,0),q(t,0,t.length,i,z,r),V(n,e)(t,r,i)}:V(n,e);return this.applyTransform(r),this},e}(r.a),Y=n(3),W=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),H=function(t){function e(){var e=t.call(this)||this;return e.layout=Y.a.XY,e.stride=2,e.flatCoordinates=null,e}return W(e,t),e.prototype.computeExtent=function(t){return Object(l.h)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return Object(a.b)()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=Z(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){Object(a.b)()},e.prototype.setLayout=function(t,e,n){var r;if(t)r=Z(t);else{for(var i=0;i<n;++i){if(0===e.length)return this.layout=Y.a.XY,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=Y.a.XY:3==t?e=Y.a.XYZ:4==t&&(e=Y.a.XYZM);return e}(r=e.length)}this.layout=t,this.stride=r},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();!function(t,e,n,r,i,o,s){for(var a=s||[],u=Math.cos(i),c=Math.sin(i),f=o[0],l=o[1],h=0,d=e;d<n;d+=r){var b=t[d]-f,p=t[d+1]-l;a[h++]=f+b*u-p*c,a[h++]=l+b*c+p*u;for(var v=d+2;v<d+r;++v)a[h++]=t[v]}s&&a.length!=h&&(a.length=h)}(n,0,n.length,r,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var r=e;void 0===r&&(r=t);var i=n;i||(i=Object(l.k)(this.getExtent()));var o=this.getFlatCoordinates();if(o){var s=this.getStride();!function(t,e,n,r,i,o,s,a){for(var u=a||[],c=s[0],f=s[1],l=0,h=e;h<n;h+=r){var d=t[h]-c,b=t[h+1]-f;u[l++]=c+i*d,u[l++]=f+o*b;for(var p=h+2;p<h+r;++p)u[l++]=t[p]}a&&u.length!=l&&(u.length=l)}(o,0,o.length,s,t,r,i,o),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();!function(t,e,n,r,i,o,s){for(var a=s||[],u=0,c=e;c<n;c+=r){a[u++]=t[c]+i,a[u++]=t[c+1]+o;for(var f=c+2;f<c+r;++f)a[u++]=t[f]}s&&a.length!=u&&(a.length=u)}(n,0,n.length,r,t,e,n),this.changed()}},e}(X);function Z(t){var e;return t==Y.a.XY?e=2:t==Y.a.XYZ||t==Y.a.XYM?e=3:t==Y.a.XYZM&&(e=4),e}e.a=H},function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=void 0!==i?i:[],s=0,a=e;a<n;a+=r)o[s++]=t.slice(a,a+r);return o.length=s,o}function i(t,e,n,i,o){for(var s=void 0!==o?o:[],a=0,u=0,c=n.length;u<c;++u){var f=n[u];s[a++]=r(t,e,f,i,s[a]),e=f}return s.length=a,s}function o(t,e,n,r,o){for(var s=void 0!==o?o:[],a=0,u=0,c=n.length;u<c;++u){var f=n[u];s[a++]=i(t,e,f,r,s[a]),e=f[f.length-1]}return s.length=a,s}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return a}));var r=n(0);function i(t,e,n,i,s){return!Object(r.j)(s,(function(r){return!o(t,e,n,i,r[0],r[1])}))}function o(t,e,n,r,i,o){for(var s=0,a=t[n-r],u=t[n-r+1];e<n;e+=r){var c=t[e],f=t[e+1];u<=o?f>o&&(c-a)*(o-u)-(i-a)*(f-u)>0&&s++:f<=o&&(c-a)*(o-u)-(i-a)*(f-u)<0&&s--,a=c,u=f}return 0!==s}function s(t,e,n,r,i,s){if(0===n.length)return!1;if(!o(t,e,n[0],r,i,s))return!1;for(var a=1,u=n.length;a<u;++a)if(o(t,n[a-1],n[a],r,i,s))return!1;return!0}function a(t,e,n,r,i,o){if(0===n.length)return!1;for(var a=0,u=n.length;a<u;++a){var c=n[a];if(s(t,e,c,r,i,o))return!0;e=c[c.length-1]}return!1}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return c}));var r=n(1);function i(t,e,n,i,o,s,a){var u=(n-e)/i;if(u<3){for(;e<n;e+=i)s[a++]=t[e],s[a++]=t[e+1];return a}var c=new Array(u);c[0]=1,c[u-1]=1;for(var f=[e,n-i],l=0;f.length>0;){for(var h=f.pop(),d=f.pop(),b=0,p=t[d],v=t[d+1],y=t[h],_=t[h+1],g=d+i;g<h;g+=i){var m=t[g],w=t[g+1],k=Object(r.f)(m,w,p,v,y,_);k>b&&(l=g,b=k)}b>o&&(c[(l-e)/i]=1,d+i<l&&f.push(d,l),l+i<h&&f.push(l,h))}for(g=0;g<u;++g)c[g]&&(s[a++]=t[e+g*i],s[a++]=t[e+g*i+1]);return a}function o(t,e,n,r,o,s,a,u){for(var c=0,f=n.length;c<f;++c){var l=n[c];a=i(t,e,l,r,o,s,a),u.push(a),e=l}return a}function s(t,e){return e*Math.round(t/e)}function a(t,e,n,r,i,o,a){if(e==n)return a;var u,c,f=s(t[e],i),l=s(t[e+1],i);e+=r,o[a++]=f,o[a++]=l;do{if(u=s(t[e],i),c=s(t[e+1],i),(e+=r)==n)return o[a++]=u,o[a++]=c,a}while(u==f&&c==l);for(;e<n;){var h=s(t[e],i),d=s(t[e+1],i);if(e+=r,h!=u||d!=c){var b=u-f,p=c-l,v=h-f,y=d-l;b*y==p*v&&(b<0&&v<b||b==v||b>0&&v>b)&&(p<0&&y<p||p==y||p>0&&y>p)?(u=h,c=d):(o[a++]=u,o[a++]=c,f=u,l=c,u=h,c=d)}}return o[a++]=u,o[a++]=c,a}function u(t,e,n,r,i,o,s,u){for(var c=0,f=n.length;c<f;++c){var l=n[c];s=a(t,e,l,r,i,o,s),u.push(s),e=l}return s}function c(t,e,n,r,i,o,s,a){for(var c=0,f=n.length;c<f;++c){var l=n[c],h=[];s=u(t,e,l,r,i,o,s,h),a.push(h),e=l[l.length-1]}return s}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o}));var r="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1,i=arguments.length;r<i;++r){var o=arguments[r];if(null!=o)for(var s in o)o.hasOwnProperty(s)&&(n[s]=o[s])}return n};function i(t){for(var e in t)delete t[e]}"function"==typeof Object.values&&Object.values;function o(t){var e;for(e in t)return!1;return!e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s}));var r=n(12);function i(t,e,n,r,i){if(r&&r!==t&&(n=n.bind(r)),i){var o=n;n=function(){t.removeEventListener(e,n),o.apply(this,arguments)}}var s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function o(t,e,n,r){return i(t,e,n,r,!0)}function s(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Object(r.b)(t))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return c}));var r=n(0),i=n(26),o=n(10);function s(t,e,n,o,s){var a=Object(r.i)(Object(r.e)(),t,e,n,o);return!!Object(r.n)(s,a)&&(!!Object(r.c)(s,a)||(a[0]>=s[0]&&a[2]<=s[2]||(a[1]>=s[1]&&a[3]<=s[3]||Object(i.a)(t,e,n,o,(function(t,e){return Object(r.o)(s,t,e)})))))}function a(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){if(s(t,e,n[o],r,i))return!0;e=n[o]}return!1}function u(t,e,n,r,i){if(!function(t,e,n,r,i){return!!s(t,e,n,r,i)||(!!Object(o.b)(t,e,n,r,i[0],i[1])||(!!Object(o.b)(t,e,n,r,i[0],i[3])||(!!Object(o.b)(t,e,n,r,i[2],i[1])||!!Object(o.b)(t,e,n,r,i[2],i[3]))))}(t,e,n[0],r,i))return!1;if(1===n.length)return!0;for(var a=1,u=n.length;a<u;++a)if(Object(o.a)(t,n[a-1],n[a],r,i)&&!s(t,n[a-1],n[a],r,i))return!1;return!0}function c(t,e,n,r,i){for(var o=0,s=n.length;o<s;++o){var a=n[o];if(u(t,e,a,r,i))return!0;e=a[a.length-1]}return!1}},function(t,e,n){"use strict";function r(t,e,n,r){for(;e<n-r;){for(var i=0;i<r;++i){var o=t[e+i];t[e+i]=t[n-r+i],t[n-r+i]=o}e+=r,n-=r}}function i(t,e,n,r){for(var i=0,o=t[n-r],s=t[n-r+1];e<n;e+=r){var a=t[e],u=t[e+1];i+=(a-o)*(u+s),o=a,s=u}return 0===i?void 0:i>0}function o(t,e,n,r,o){for(var s=void 0!==o&&o,a=0,u=n.length;a<u;++a){var c=n[a],f=i(t,e,c,r);if(0===a){if(s&&f||!s&&!f)return!1}else if(s&&!f||!s&&f)return!1;e=c}return!0}function s(t,e,n,r,i){for(var s=0,a=n.length;s<a;++s){var u=n[s];if(!o(t,e,u,r,i))return!1;u.length&&(e=u[u.length-1])}return!0}function a(t,e,n,o,s){for(var a=void 0!==s&&s,u=0,c=n.length;u<c;++u){var f=n[u],l=i(t,e,f,o);(0===u?a&&l||!a&&!l:a&&!l||!a&&l)&&r(t,e,f,o),e=f}return e}function u(t,e,n,r,i){for(var o=0,s=n.length;o<s;++o)e=a(t,e,n[o],r,i);return e}n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return u}))},function(t,e,n){"use strict";n.r(e);var r,i=n(2),o=n(8),s=n(0),a=n(7),u=n(1),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),f=function(t){function e(e,n){var r=t.call(this)||this;return r.setCoordinates(e,n),r}return c(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){var i=this.flatCoordinates,o=Object(u.e)(t,e,i[0],i[1]);if(o<r){for(var s=this.stride,a=0;a<s;++a)n[a]=i[a];return n.length=s,o}return r},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Object(s.g)(this.flatCoordinates,t)},e.prototype.getType=function(){return i.a.POINT},e.prototype.intersectsExtent=function(t){return Object(s.d)(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(a.a)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(o.a);e.default=f},function(t,e,n){"use strict";function r(t,e,n,r){for(var i=0,o=t[n-r],s=t[n-r+1];e<n;e+=r){var a=t[e],u=t[e+1];i+=s*a-o*u,o=a,s=u}return i/2}function i(t,e,n,i){for(var o=0,s=0,a=n.length;s<a;++s){var u=n[s];o+=r(t,e,u,i),e=u}return o}function o(t,e,n,r){for(var o=0,s=0,a=n.length;s<a;++s){var u=n[s];o+=i(t,e,u,r),e=u[u.length-1]}return o}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r,i=n(5),o=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(e){var n=this,r="Assertion failed. See https://openlayers.org/en/"+("latest"===i.a?i.a:"v"+i.a.split("-")[0])+"/doc/errors/#"+e+" for details.";return(n=t.call(this,r)||this).code=e,n.name="AssertionError",n.message=r,n}return o(e,t),e}(Error);function a(t,e){if(!t)throw new s(e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a}));var r=n(4),i=n(1);function o(t,e,n,o,s,a,u){var c,f,l=(n-e)/o;if(1===l)c=e;else if(2===l)c=e,f=s;else if(0!==l){for(var h=t[e],d=t[e+1],b=0,p=[0],v=e+o;v<n;v+=o){var y=t[v],_=t[v+1];b+=Math.sqrt((y-h)*(y-h)+(_-d)*(_-d)),p.push(b),h=y,d=_}var g=s*b,m=Object(r.a)(p,g);m<0?(f=(g-p[-m-2])/(p[-m-1]-p[-m-2]),c=e+(-m-2)*o):c=e+m*o}var w=u>1?u:2,k=a||new Array(w);for(v=0;v<w;++v)k[v]=void 0===c?NaN:void 0===f?t[c+v]:Object(i.c)(t[c+v],t[c+o+v],f);return k}function s(t,e,n,r,o,s){if(n==e)return null;var a;if(o<t[e+r-1])return s?((a=t.slice(e,e+r))[r-1]=o,a):null;if(t[n-1]<o)return s?((a=t.slice(n-r,n))[r-1]=o,a):null;if(o==t[e+r-1])return t.slice(e,e+r);for(var u=e/r,c=n/r;u<c;){var f=u+c>>1;o<t[(f+1)*r-1]?c=f:u=f+1}var l=t[u*r-1];if(o==l)return t.slice((u-1)*r,(u-1)*r+r);var h=(o-l)/(t[(u+1)*r-1]-l);a=[];for(var d=0;d<r-1;++d)a.push(Object(i.c)(t[(u-1)*r+d],t[u*r+d],h));return a.push(o),a}function a(t,e,n,r,i,o,a){if(a)return s(t,e,n[n.length-1],r,i,o);var u;if(i<t[r-1])return o?((u=t.slice(0,r))[r-1]=i,u):null;if(t[t.length-1]<i)return o?((u=t.slice(t.length-r))[r-1]=i,u):null;for(var c=0,f=n.length;c<f;++c){var l=n[c];if(e!=l){if(i<t[e+r-1])return null;if(i<=t[l-1])return s(t,e,l,r,i,!1);e=l}}return null}},function(t,e,n){"use strict";n.r(e);var r=n(3),i=n(2),o=n(8),s=n(6),a=n(0),u=n(7),c=n(11),f=n(4),l=n(26),h=n(9),d=n(19),b=n(14);function p(t,e,n,r){for(var i=t[e],o=t[e+1],s=0,a=e+r;a<n;a+=r){var u=t[a],c=t[a+1];s+=Math.sqrt((u-i)*(u-i)+(c-o)*(c-o)),i=u,o=c}return s}var v,y=(v=function(t,e){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),_=function(t){function e(e,n){var r=t.call(this)||this;return r.flatMidpoint_=null,r.flatMidpointRevision_=-1,r.maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?r.setCoordinates(e,n):r.setFlatCoordinates(n,e),r}return y(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?Object(f.c)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){return r<Object(a.b)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(s.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(s.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,r))},e.prototype.forEachSegment=function(t){return Object(l.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=r.a.XYM&&this.layout!=r.a.XYZM)return null;var n=void 0!==e&&e;return Object(d.b)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n)},e.prototype.getCoordinates=function(){return Object(h.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Object(d.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},e.prototype.getLength=function(){return p(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=Object(c.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,r.a.XY)},e.prototype.getType=function(){return i.a.LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(b.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(u.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(o.a);e.default=_},function(t,e,n){"use strict";n.r(e),n.d(e,"circular",(function(){return I})),n.d(e,"fromExtent",(function(){return C})),n.d(e,"fromCircle",(function(){return P})),n.d(e,"makeRegular",(function(){return F}));var r,i=n(3),o=n(2),s=n(8),a=n(6),u=n(0),c=n(7),f=n(11),l=n(9),h=n(17),d=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),b=function(t){function e(e,n){var r=t.call(this)||this;return r.maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?r.setCoordinates(e,n):r.setFlatCoordinates(n,e),r}return d(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,r){return r<Object(u.b)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(a.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(a.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,r))},e.prototype.getArea=function(){return Object(h.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Object(l.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=Object(f.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,i.a.XY)},e.prototype.getType=function(){return o.a.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(c.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(s.a),p=n(16),v=n(4),y=n(27),_=n(14),g=n(15),m=n(10),w=n(1),k=n(23),x=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),O=function(t){function e(e,n,r){var i=t.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==n&&r?(i.setFlatCoordinates(n,e),i.ends_=r):i.setCoordinates(e,n),i}return x(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?Object(v.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){return r<Object(u.b)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(a.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(a.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,r))},e.prototype.containsXY=function(t,e){return Object(m.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Object(h.b)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(g.c)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Object(l.b)(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Object(u.k)(this.getExtent());this.flatInteriorPoint_=Object(y.a)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new p.default(this.getFlatInteriorPoint(),i.a.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new b(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,r=[],i=0,o=0,s=n.length;o<s;++o){var a=n[o],u=new b(e.slice(i,a),t);r.push(u),i=a}return r},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(g.a)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(g.c)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=Object(f.c)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,r),new e(n,i.a.XY,r)},e.prototype.getType=function(){return o.a.POLYGON},e.prototype.intersectsExtent=function(t){return Object(_.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=Object(c.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(s.a);e.default=O;function I(t,e,n,r){for(var o=n||32,s=[],a=0;a<o;++a)Object(v.c)(s,Object(k.b)(t,e,2*Math.PI*a/o,r));return s.push(s[0],s[1]),new O(s,i.a.XY,[s.length])}function C(t){var e=t[0],n=t[1],r=t[2],o=t[3],s=[e,n,e,o,r,o,r,n,e,n];return new O(s,i.a.XY,[s.length])}function P(t,e,n){for(var r=e||32,i=t.getStride(),o=t.getLayout(),s=t.getCenter(),a=i*(r+1),u=new Array(a),c=0;c<a;c+=i){u[c]=0,u[c+1]=0;for(var f=2;f<i;f++)u[c+f]=s[f]}var l=[u.length],h=new O(u,o,l);return F(h,s,t.getRadius(),n),h}function F(t,e,n,r){for(var i=t.getFlatCoordinates(),o=t.getStride(),s=i.length/o-1,a=r||0,u=0;u<=s;++u){var c=u*o,f=a+2*Object(w.d)(u,s)*Math.PI/s;i[c]=e[0]+n*Math.cos(f),i[c+1]=e[1]+n*Math.sin(f)}t.changed()}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n(4);function i(){}function o(t){var e,n,i,o=!1;return function(){var s=Array.prototype.slice.call(arguments);return o&&this===i&&Object(r.b)(s,n)||(o=!0,i=this,n=s,e=t.apply(this,arguments)),e}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));n(2);var r=n(1);function i(t,e,n){var i=n||6371008.8,o=Object(r.h)(t[1]),s=Object(r.h)(e[1]),a=(s-o)/2,u=Object(r.h)(e[0]-t[0])/2,c=Math.sin(a)*Math.sin(a)+Math.sin(u)*Math.sin(u)*Math.cos(o)*Math.cos(s);return 2*i*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function o(t,e,n,i){var o=i||6371008.8,s=Object(r.h)(t[1]),a=Object(r.h)(t[0]),u=e/o,c=Math.asin(Math.sin(s)*Math.cos(u)+Math.cos(s)*Math.sin(u)*Math.cos(n)),f=a+Math.atan2(Math.sin(n)*Math.sin(u)*Math.cos(s),Math.cos(u)-Math.sin(s)*Math.sin(c));return[Object(r.g)(f),Object(r.g)(c)]}},function(t,e,n){"use strict";n.r(e);var r,i=n(2),o=n(16),s=n(8),a=n(0),u=n(7),c=n(4),f=n(9),l=n(1),h=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=function(t){function e(e,n){var r=t.call(this)||this;return n&&!Array.isArray(e[0])?r.setFlatCoordinates(n,e):r.setCoordinates(e,n),r}return h(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?Object(c.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){if(r<Object(a.b)(this.getExtent(),t,e))return r;for(var i=this.flatCoordinates,o=this.stride,s=0,u=i.length;s<u;s+=o){var c=Object(l.e)(t,e,i[s],i[s+1]);if(c<r){r=c;for(var f=0;f<o;++f)n[f]=i[s+f];n.length=o}}return r},e.prototype.getCoordinates=function(){return Object(f.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new o.default(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,n=this.stride,r=[],i=0,s=t.length;i<s;i+=n){var a=new o.default(t.slice(i,i+n),e);r.push(a)}return r},e.prototype.getType=function(){return i.a.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,n=this.stride,r=0,i=e.length;r<i;r+=n){var o=e[r],s=e[r+1];if(Object(a.d)(t,o,s))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(u.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(s.a);e.default=d},function(t,e,n){"use strict";e.a={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},function(t,e,n){"use strict";function r(t,e,n,r,i){var o;for(e+=r;e<n;e+=r)if(o=i(t.slice(e-r,e),t.slice(e,e+r)))return o;return!1}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var r=n(10),i=n(4);function o(t,e,n,o,s,a,u){for(var c,f,l,h,d,b,p,v=s[a+1],y=[],_=0,g=n.length;_<g;++_){var m=n[_];for(h=t[m-o],b=t[m-o+1],c=e;c<m;c+=o)d=t[c],p=t[c+1],(v<=b&&p<=v||b<=v&&v<=p)&&(l=(v-b)/(p-b)*(d-h)+h,y.push(l)),h=d,b=p}var w=NaN,k=-1/0;for(y.sort(i.d),h=y[0],c=1,f=y.length;c<f;++c){d=y[c];var x=Math.abs(d-h);x>k&&(l=(h+d)/2,Object(r.c)(t,e,n,o,l,v)&&(w=l,k=x)),h=d}return isNaN(w)&&(w=s[a]),u?(u.push(w,v,k),u):[w,v,k]}function s(t,e,n,r,i){for(var s=[],a=0,u=n.length;a<u;++a){var c=n[a];s=o(t,e,c,r,i,2*a,s),e=c[c.length-1]}return s}},function(t,e,n){"use strict";var r,i=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),o="propertychange",s=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}(),a=n(22),u=n(12),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),f=function(t){function e(e){var n=t.call(this)||this;return n.eventTarget_=e,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return c(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var n=this.listeners_||(this.listeners_={}),r=n[t]||(n[t]=[]);-1===r.indexOf(e)&&r.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new i(t):t,n=e.type;e.target||(e.target=this.eventTarget_||this);var r,o=this.listeners_&&this.listeners_[n];if(o){var s=this.dispatching_||(this.dispatching_={}),u=this.pendingRemovals_||(this.pendingRemovals_={});n in s||(s[n]=0,u[n]=0),++s[n];for(var c=0,f=o.length;c<f;++c)if(!1===(r="handleEvent"in o[c]?o[c].handleEvent(e):o[c].call(this,e))||e.propagationStopped){r=!1;break}if(--s[n],0===s[n]){var l=u[n];for(delete u[n];l--;)this.removeEventListener(n,a.a);delete s[n]}return r}},e.prototype.disposeInternal=function(){this.listeners_&&Object(u.b)(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},e.prototype.removeEventListener=function(t,e){var n=this.listeners_&&this.listeners_[t];if(n){var r=n.indexOf(e);-1!==r&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[r]=a.a,++this.pendingRemovals_[t]):(n.splice(r,1),0===n.length&&delete this.listeners_[t]))}},e}(s),l=n(25),h=n(13),d=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b=function(t){function e(){var e=t.call(this)||this;return e.on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return d(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(l.a.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,e){if(Array.isArray(t)){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=Object(h.a)(this,t[i],e);return r}return Object(h.a)(this,t,e)},e.prototype.onceInternal=function(t,e){var n;if(Array.isArray(t)){var r=t.length;n=new Array(r);for(var i=0;i<r;++i)n[i]=Object(h.b)(this,t[i],e)}else n=Object(h.b)(this,t,e);return e.ol_key=n,n},e.prototype.unInternal=function(t,e){var n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(var e=0,n=t.length;e<n;++e)Object(h.c)(t[e]);else Object(h.c)(t)}(n);else if(Array.isArray(t))for(var r=0,i=t.length;r<i;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)},e}(f);b.prototype.on,b.prototype.once,b.prototype.un;var p=b,v=n(5),y=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.key=n,i.oldValue=r,i}return y(e,t),e}(i),g=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,Object(v.c)(n),n.values_=null,void 0!==e&&n.setProperties(e),n}return y(e,t),e.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&Object(u.a)({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,e){var n;n="change:"+t,this.dispatchEvent(new _(n,t,e)),n=o,this.dispatchEvent(new _(n,t,e))},e.prototype.addChangeListener=function(t,e){this.addEventListener("change:"+t,e)},e.prototype.removeChangeListener=function(t,e){this.removeEventListener("change:"+t,e)},e.prototype.set=function(t,e,n){var r=this.values_||(this.values_={});if(n)r[t]=e;else{var i=r[t];r[t]=e,i!==e&&this.notify(t,i)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.applyProperties=function(t){t.values_&&Object(u.a)(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var n=this.values_[t];delete this.values_[t],Object(u.c)(this.values_)&&(this.values_=null),e||this.notify(t,n)}},e}(p);e.a=g},function(t,e,n){var r,i,o;function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=f(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function a(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,i)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){a(o,r,i,s,u,"next",t)}function u(t){a(o,r,i,s,u,"throw",t)}s(void 0)}))}}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(t){a=!0,i=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){var n={},r=!1;function i(n,i){return r=!0,i=new Promise((function(e){e(t[n](i))})),{done:!1,value:e(i)}}return n["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},n.next=function(t){return r?(r=!1,t):i("next",t)},"function"==typeof t.throw&&(n.throw=function(t){if(r)throw r=!1,t;return i("throw",t)}),"function"==typeof t.return&&(n.return=function(t){return r?(r=!1,t):i("return",t)}),n}function y(t){var e,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(e=t[n]))return e.call(t);if(r&&null!=(e=t[r]))return new _(e.call(t));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function _(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return(_=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new _(t)}function g(t){return new k(t)}function m(t){return function(){return new w(t.apply(this,arguments))}}function w(t){var e,n;function r(e,n){try{var o=t[e](n),s=o.value,a=s instanceof k;Promise.resolve(a?s.wrapped:s).then((function(t){a?r("return"===e?"return":"next",t):i(o.done?"return":"normal",t)}),(function(t){r("throw",t)}))}catch(t){i("throw",t)}}function i(t,i){switch(t){case"return":e.resolve({value:i,done:!0});break;case"throw":e.reject(i);break;default:e.resolve({value:i,done:!1})}(e=e.next)?r(e.key,e.arg):n=null}this._invoke=function(t,i){return new Promise((function(o,s){var a={key:t,arg:i,resolve:o,reject:s,next:null};n?n=n.next=a:(e=n=a,r(t,i))}))},"function"!=typeof t.return&&(this.return=void 0)}function k(t){this.wrapped=t}w.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},w.prototype.next=function(t){return this._invoke("next",t)},w.prototype.throw=function(t){return this._invoke("throw",t)},w.prototype.return=function(t){return this._invoke("return",t)},function(n,s){"object"==p(e)&&void 0!==t?s(e):(i=[e],void 0===(o="function"==typeof(r=s)?r.apply(e,i):r)||(t.exports=o))}(0,(function(t){"use strict";var e,n=new Int32Array(2),r=new Float32Array(n.buffer),i=new Float64Array(n.buffer),o=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],a=function(){function t(e,n){h(this,t),this.low=0|e,this.high=0|n}return b(t,[{key:"toFloat64",value:function(){return(this.low>>>0)+4294967296*this.high}},{key:"equals",value:function(t){return this.low==t.low&&this.high==t.high}}],[{key:"create",value:function(e,n){return 0==e&&0==n?t.ZERO:new t(e,n)}}]),t}();a.ZERO=new a(0,0),function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(e||(e={}));var f,l,d=function(){function t(e){h(this,t),this.bytes_=e,this.position_=0}return b(t,[{key:"clear",value:function(){this.position_=0}},{key:"bytes",value:function(){return this.bytes_}},{key:"position",value:function(){return this.position_}},{key:"setPosition",value:function(t){this.position_=t}},{key:"capacity",value:function(){return this.bytes_.length}},{key:"readInt8",value:function(t){return this.readUint8(t)<<24>>24}},{key:"readUint8",value:function(t){return this.bytes_[t]}},{key:"readInt16",value:function(t){return this.readUint16(t)<<16>>16}},{key:"readUint16",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8}},{key:"readInt32",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}},{key:"readUint32",value:function(t){return this.readInt32(t)>>>0}},{key:"readInt64",value:function(t){return new a(this.readInt32(t),this.readInt32(t+4))}},{key:"readUint64",value:function(t){return new a(this.readUint32(t),this.readUint32(t+4))}},{key:"readFloat32",value:function(t){return n[0]=this.readInt32(t),r[0]}},{key:"readFloat64",value:function(t){return n[o?0:1]=this.readInt32(t),n[o?1:0]=this.readInt32(t+4),i[0]}},{key:"writeInt8",value:function(t,e){this.bytes_[t]=e}},{key:"writeUint8",value:function(t,e){this.bytes_[t]=e}},{key:"writeInt16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeUint16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeInt32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeUint32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeInt64",value:function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)}},{key:"writeUint64",value:function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)}},{key:"writeFloat32",value:function(t,e){r[0]=e,this.writeInt32(t,n[0])}},{key:"writeFloat64",value:function(t,e){i[0]=e,this.writeInt32(t,n[o?0:1]),this.writeInt32(t+4,n[o?1:0])}},{key:"getBufferIdentifier",value:function(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}},{key:"__offset",value:function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}},{key:"__union",value:function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}},{key:"__string",value:function(t,n){t+=this.readInt32(t);var r=this.readInt32(t),i="",o=0;if(t+=4,n===e.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;o<r;){var s=void 0,a=this.readUint8(t+o++);if(a<192)s=a;else{var u=this.readUint8(t+o++);if(a<224)s=(31&a)<<6|63&u;else{var c=this.readUint8(t+o++);s=a<240?(15&a)<<12|(63&u)<<6|63&c:(7&a)<<18|(63&u)<<12|(63&c)<<6|63&this.readUint8(t+o++)}}s<65536?i+=String.fromCharCode(s):(s-=65536,i+=String.fromCharCode(55296+(s>>10),56320+(1023&s)))}return i}},{key:"__union_with_string",value:function(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)}},{key:"__indirect",value:function(t){return t+this.readInt32(t)}},{key:"__vector",value:function(t){return t+this.readInt32(t)+4}},{key:"__vector_len",value:function(t){return this.readInt32(t+this.readInt32(t))}},{key:"__has_identifier",value:function(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(var e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}},{key:"createLong",value:function(t,e){return a.create(t,e)}},{key:"createScalarList",value:function(t,e){for(var n=[],r=0;r<e;++r)null!==t(r)&&n.push(t(r));return n}},{key:"createObjList",value:function(t,e){for(var n=[],r=0;r<e;++r){var i=t(r);null!==i&&n.push(i.unpack())}return n}}],[{key:"allocate",value:function(e){return new t(new Uint8Array(e))}}]),t}(),p=function(){function t(e){var n;h(this,t),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,n=e||1024,this.bb=d.allocate(n),this.space=n}return b(t,[{key:"clear",value:function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}},{key:"forceDefaults",value:function(t){this.force_defaults=t}},{key:"dataBuffer",value:function(){return this.bb}},{key:"asUint8Array",value:function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}},{key:"prep",value:function(e,n){e>this.minalign&&(this.minalign=e);for(var r=1+~(this.bb.capacity()-this.space+n)&e-1;this.space<r+e+n;){var i=this.bb.capacity();this.bb=t.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}},{key:"pad",value:function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}},{key:"writeInt8",value:function(t){this.bb.writeInt8(this.space-=1,t)}},{key:"writeInt16",value:function(t){this.bb.writeInt16(this.space-=2,t)}},{key:"writeInt32",value:function(t){this.bb.writeInt32(this.space-=4,t)}},{key:"writeInt64",value:function(t){this.bb.writeInt64(this.space-=8,t)}},{key:"writeFloat32",value:function(t){this.bb.writeFloat32(this.space-=4,t)}},{key:"writeFloat64",value:function(t){this.bb.writeFloat64(this.space-=8,t)}},{key:"addInt8",value:function(t){this.prep(1,0),this.writeInt8(t)}},{key:"addInt16",value:function(t){this.prep(2,0),this.writeInt16(t)}},{key:"addInt32",value:function(t){this.prep(4,0),this.writeInt32(t)}},{key:"addInt64",value:function(t){this.prep(8,0),this.writeInt64(t)}},{key:"addFloat32",value:function(t){this.prep(4,0),this.writeFloat32(t)}},{key:"addFloat64",value:function(t){this.prep(8,0),this.writeFloat64(t)}},{key:"addFieldInt8",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))}},{key:"addFieldInt16",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))}},{key:"addFieldInt32",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))}},{key:"addFieldInt64",value:function(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))}},{key:"addFieldFloat32",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))}},{key:"addFieldFloat64",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))}},{key:"addFieldOffset",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))}},{key:"addFieldStruct",value:function(t,e,n){e!=n&&(this.nested(e),this.slot(t))}},{key:"nested",value:function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}},{key:"notNested",value:function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}},{key:"slot",value:function(t){null!==this.vtable&&(this.vtable[t]=this.offset())}},{key:"offset",value:function(){return this.bb.capacity()-this.space}},{key:"addOffset",value:function(t){this.prep(4,0),this.writeInt32(this.offset()-t+4)}},{key:"startObject",value:function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}},{key:"endObject",value:function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var n=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var r=2*(n+2);this.addInt16(r);var i=0,o=this.space;t:for(e=0;e<this.vtables.length;e++){var s=this.bb.capacity()-this.vtables[e];if(r==this.bb.readInt16(s)){for(var a=2;a<r;a+=2)if(this.bb.readInt16(o+a)!=this.bb.readInt16(s+a))continue t;i=this.vtables[e];break}}return i?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,i-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}},{key:"finish",value:function(t,e,n){var r=n?4:0;if(e){var i=e;if(this.prep(this.minalign,8+r),4!=i.length)throw new Error("FlatBuffers: file identifier must be length 4");for(var o=3;o>=0;o--)this.writeInt8(i.charCodeAt(o))}this.prep(this.minalign,4+r),this.addOffset(t),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}},{key:"finishSizePrefixed",value:function(t,e){this.finish(t,e,!0)}},{key:"requiredField",value:function(t,e){var n=this.bb.capacity()-t,r=n-this.bb.readInt32(n);if(0==this.bb.readInt16(r+e))throw new Error("FlatBuffers: field "+e+" must be set")}},{key:"startVector",value:function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(4,t*e),this.prep(n,t*e)}},{key:"endVector",value:function(){return this.writeInt32(this.vector_num_elems),this.offset()}},{key:"createSharedString",value:function(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);var e=this.createString(t);return this.string_maps.set(t,e),e}},{key:"createString",value:function(t){if(!t)return 0;var e;if(t instanceof Uint8Array)e=t;else{e=[];for(var n=0;n<t.length;){var r=void 0,i=t.charCodeAt(n++);(r=i<55296||i>=56320?i:(i<<10)+t.charCodeAt(n++)+-56613888)<128?e.push(r):(r<2048?e.push(r>>6&31|192):(r<65536?e.push(r>>12&15|224):e.push(r>>18&7|240,r>>12&63|128),e.push(r>>6&63|128)),e.push(63&r|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(var o=0,s=this.space,a=this.bb.bytes();o<e.length;o++)a[s++]=e[o];return this.endVector()}},{key:"createLong",value:function(t,e){return a.create(t,e)}},{key:"createObjectOffset",value:function(t){return null===t?0:"string"==typeof t?this.createString(t):t.pack(this)}},{key:"createObjectOffsetList",value:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];if(null===r)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");e.push(this.createObjectOffset(r))}return e}},{key:"createStructOffsetList",value:function(t,e){return e(this,t.length),this.createObjectOffsetList(t),this.endVector()}}],[{key:"growByteBuffer",value:function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,r=d.allocate(n);return r.setPosition(n-e),r.bytes().set(t.bytes(),n-e),r}}]),t}(),_=new Uint8Array(0);function w(t,e){if(!t.length)return e;if(!e.length)return t;var n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function k(t){this._source=t,this._array=_,this._index=0}k.prototype.read=function(){var t=this,e=t._array.subarray(t._index);return t._source.read().then((function(n){return t._array=_,t._index=0,n.done?e.length>0?{done:!1,value:e}:{done:!0,value:void 0}:{done:!1,value:w(e,n.value)}}))},k.prototype.slice=function(t){if((t|=0)<0)throw new Error("invalid length");var e=this,n=this._array.length-this._index;if(this._index+t<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=t));var r=new Uint8Array(t);return r.set(this._array.subarray(this._index)),function i(){return e._source.read().then((function(o){return o.done?(e._array=_,e._index=0,n>0?r.subarray(0,n):null):n+o.value.length>=t?(e._array=o.value,e._index=t-n,r.set(o.value.subarray(0,t-n),n),r):(r.set(o.value,n),n+=o.value.length,i())}))}()},k.prototype.cancel=function(){return this._source.cancel()};var x=b((function t(e,n,r,i,o,s,a,u,c,f){h(this,t),this.name=e,this.type=n,this.title=r,this.description=i,this.width=o,this.precision=s,this.scale=a,this.nullable=u,this.unique=c,this.primary_key=f}));t.ColumnType=void 0,(f=t.ColumnType||(t.ColumnType={}))[f.Byte=0]="Byte",f[f.UByte=1]="UByte",f[f.Bool=2]="Bool",f[f.Short=3]="Short",f[f.UShort=4]="UShort",f[f.Int=5]="Int",f[f.UInt=6]="UInt",f[f.Long=7]="Long",f[f.ULong=8]="ULong",f[f.Float=9]="Float",f[f.Double=10]="Double",f[f.String=11]="String",f[f.Json=12]="Json",f[f.DateTime=13]="DateTime",f[f.Binary=14]="Binary";var O=function(){function e(){h(this,e),this.bb=null,this.bb_pos=0}return b(e,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"type",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):t.ColumnType.Byte}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"width",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"precision",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"scale",value:function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"nullable",value:function(){var t=this.bb.__offset(this.bb_pos,18);return!t||!!this.bb.readInt8(this.bb_pos+t)}},{key:"unique",value:function(){var t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"primaryKey",value:function(){var t=this.bb.__offset(this.bb_pos,22);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__string(this.bb_pos+e,t):null}}],[{key:"getRootAsColumn",value:function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsColumn",value:function(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startColumn",value:function(t){t.startObject(11)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addType",value:function(e,n){e.addFieldInt8(1,n,t.ColumnType.Byte)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWidth",value:function(t,e){t.addFieldInt32(4,e,-1)}},{key:"addPrecision",value:function(t,e){t.addFieldInt32(5,e,-1)}},{key:"addScale",value:function(t,e){t.addFieldInt32(6,e,-1)}},{key:"addNullable",value:function(t,e){t.addFieldInt8(7,+e,1)}},{key:"addUnique",value:function(t,e){t.addFieldInt8(8,+e,0)}},{key:"addPrimaryKey",value:function(t,e){t.addFieldInt8(9,+e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"endColumn",value:function(t){var e=t.endObject();return t.requiredField(e,4),e}},{key:"createColumn",value:function(t,n,r,i,o,s,a,u,c,f,l,h){return e.startColumn(t),e.addName(t,n),e.addType(t,r),e.addTitle(t,i),e.addDescription(t,o),e.addWidth(t,s),e.addPrecision(t,a),e.addScale(t,u),e.addNullable(t,c),e.addUnique(t,f),e.addPrimaryKey(t,l),e.addMetadata(t,h),e.endColumn(t)}}]),e}(),I=function(){function t(){h(this,t),this.bb=null,this.bb_pos=0}return b(t,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"org",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"code",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"wkt",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"codeString",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}}],[{key:"getRootAsCrs",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsCrs",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startCrs",value:function(t){t.startObject(6)}},{key:"addOrg",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addCode",value:function(t,e){t.addFieldInt32(1,e,0)}},{key:"addName",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWkt",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"addCodeString",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"endCrs",value:function(t){return t.endObject()}},{key:"createCrs",value:function(e,n,r,i,o,s,a){return t.startCrs(e),t.addOrg(e,n),t.addCode(e,r),t.addName(e,i),t.addDescription(e,o),t.addWkt(e,s),t.addCodeString(e,a),t.endCrs(e)}}]),t}();t.GeometryType=void 0,(l=t.GeometryType||(t.GeometryType={}))[l.Unknown=0]="Unknown",l[l.Point=1]="Point",l[l.LineString=2]="LineString",l[l.Polygon=3]="Polygon",l[l.MultiPoint=4]="MultiPoint",l[l.MultiLineString=5]="MultiLineString",l[l.MultiPolygon=6]="MultiPolygon",l[l.GeometryCollection=7]="GeometryCollection",l[l.CircularString=8]="CircularString",l[l.CompoundCurve=9]="CompoundCurve",l[l.CurvePolygon=10]="CurvePolygon",l[l.MultiCurve=11]="MultiCurve",l[l.MultiSurface=12]="MultiSurface",l[l.Curve=13]="Curve",l[l.Surface=14]="Surface",l[l.PolyhedralSurface=15]="PolyhedralSurface",l[l.TIN=16]="TIN",l[l.Triangle=17]="Triangle";var C=function(){function e(){h(this,e),this.bb=null,this.bb_pos=0}return b(e,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"envelope",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"envelopeLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"envelopeArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"geometryType",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):t.GeometryType.Unknown}},{key:"hasZ",value:function(){var t=this.bb.__offset(this.bb_pos,10);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasM",value:function(){var t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasT",value:function(){var t=this.bb.__offset(this.bb_pos,14);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasTm",value:function(){var t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"columns",value:function(t,e){var n=this.bb.__offset(this.bb_pos,18);return n?(e||new O).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"featuresCount",value:function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint64(this.bb_pos+t):this.bb.createLong(0,0)}},{key:"indexNodeSize",value:function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):16}},{key:"crs",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?(t||new I).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,30);return e?this.bb.__string(this.bb_pos+e,t):null}}],[{key:"getRootAsHeader",value:function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsHeader",value:function(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startHeader",value:function(t){t.startObject(14)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addEnvelope",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createEnvelopeVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startEnvelopeVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addGeometryType",value:function(e,n){e.addFieldInt8(2,n,t.GeometryType.Unknown)}},{key:"addHasZ",value:function(t,e){t.addFieldInt8(3,+e,0)}},{key:"addHasM",value:function(t,e){t.addFieldInt8(4,+e,0)}},{key:"addHasT",value:function(t,e){t.addFieldInt8(5,+e,0)}},{key:"addHasTm",value:function(t,e){t.addFieldInt8(6,+e,0)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addFeaturesCount",value:function(t,e){t.addFieldInt64(8,e,t.createLong(0,0))}},{key:"addIndexNodeSize",value:function(t,e){t.addFieldInt16(9,e,16)}},{key:"addCrs",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(11,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(12,e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(13,e,0)}},{key:"endHeader",value:function(t){return t.endObject()}},{key:"finishHeaderBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedHeaderBuffer",value:function(t,e){t.finish(e,void 0,!0)}}]),e}(),P=function(){function e(){h(this,e),this.bb=null,this.bb_pos=0}return b(e,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"ends",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}},{key:"endsLength",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"endsArray",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"xy",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"xyLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"xyArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"z",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"zLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"zArray",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"m",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"mLength",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"mArray",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"t",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"tLength",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"tArray",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"tm",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}},{key:"tmLength",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"type",value:function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint8(this.bb_pos+e):t.GeometryType.Unknown}},{key:"parts",value:function(t,n){var r=this.bb.__offset(this.bb_pos,18);return r?(n||new e).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}},{key:"partsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}}],[{key:"getRootAsGeometry",value:function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsGeometry",value:function(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startGeometry",value:function(t){t.startObject(8)}},{key:"addEnds",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"createEndsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}},{key:"startEndsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addXy",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createXyVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startXyVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addZ",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createZVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startZVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addM",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"createMVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startMVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addT",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"createTVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startTVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addTm",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"createTmVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}},{key:"startTmVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addType",value:function(e,n){e.addFieldInt8(6,n,t.GeometryType.Unknown)}},{key:"addParts",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createPartsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}},{key:"startPartsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endGeometry",value:function(t){return t.endObject()}},{key:"createGeometry",value:function(t,n,r,i,o,s,a,u,c){return e.startGeometry(t),e.addEnds(t,n),e.addXy(t,r),e.addZ(t,i),e.addM(t,o),e.addT(t,s),e.addTm(t,a),e.addType(t,u),e.addParts(t,c),e.endGeometry(t)}}]),e}(),F=function(){function t(){h(this,t),this.bb=null,this.bb_pos=0}return b(t,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"geometry",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?(t||new P).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"properties",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}},{key:"propertiesLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"propertiesArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"columns",value:function(t,e){var n=this.bb.__offset(this.bb_pos,8);return n?(e||new O).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}}],[{key:"getRootAsFeature",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsFeature",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startFeature",value:function(t){t.startObject(3)}},{key:"addGeometry",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addProperties",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createPropertiesVector",value:function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()}},{key:"startPropertiesVector",value:function(t,e){t.startVector(1,e,1)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endFeature",value:function(t){return t.endObject()}},{key:"finishFeatureBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedFeatureBuffer",value:function(t,e){t.finish(e,void 0,!0)}},{key:"createFeature",value:function(e,n,r,i){return t.startFeature(e),t.addGeometry(e,n),t.addProperties(e,r),t.addColumns(e,i),t.endFeature(e)}}]),t}(),S=b((function t(e,n,r,i,o,s){h(this,t),this.org=e,this.code=n,this.name=r,this.description=i,this.wkt=o,this.code_string=s})),E=function(){function t(e,n,r,i,o,s,a,u){h(this,t),this.geometryType=e,this.columns=n,this.featuresCount=r,this.indexNodeSize=i,this.crs=o,this.title=s,this.description=a,this.metadata=u}return b(t,null,[{key:"fromByteBuffer",value:function(e){for(var n=C.getRootAsHeader(e),r=n.featuresCount().toFloat64(),i=n.indexNodeSize(),o=[],s=0;s<n.columnsLength();s++){var a=n.columns(s);if(!a)throw new Error("Column unexpectedly missing");if(!a.name())throw new Error("Column name unexpectedly missing");o.push(new x(a.name(),a.type(),a.title(),a.description(),a.width(),a.precision(),a.scale(),a.nullable(),a.unique(),a.primaryKey()))}var u=n.crs(),c=u?new S(u.org(),u.code(),u.name(),u.description(),u.wkt(),u.codeString()):null;return new t(n.geometryType(),o,r,i,c,n.title(),n.description(),n.metadata())}}]),t}();function j(e,n){var r,i,o,s=n;if(s===t.GeometryType.Unknown&&(s=R(e.getType())),s===t.GeometryType.MultiLineString){e.getFlatCoordinates&&(r=e.getFlatCoordinates());var a=e.getEnds();a.length>1&&(i=a.map((function(t){return t>>1})))}else if(s===t.GeometryType.Polygon){e.getFlatCoordinates&&(r=e.getFlatCoordinates());var u=e.getEnds();u.length>1&&(i=u.map((function(t){return t>>1})))}else s===t.GeometryType.MultiPolygon?o=e.getPolygons().map((function(e){return j(e,t.GeometryType.Polygon)})):e.getFlatCoordinates&&(r=e.getFlatCoordinates());return{xy:r,ends:i,type:s,parts:o}}function R(e){return e?t.GeometryType[e]:t.GeometryType.Unknown}var U=new TextEncoder;function T(e,n,r){var i=r.columns,o=new p,s=0,a=1024,u=new Uint8Array(a),c=new DataView(u.buffer),f=function(t){if(!(s+t<a)){a*=2;var e=new Uint8Array(a);e.set(u),u=e,c=new DataView(u.buffer,s)}};if(i)for(var l=0;l<i.length;l++){var h=i[l],d=n[h.name];if(null!==d)switch(c.setUint16(s,l,!0),s+=2,h.type){case t.ColumnType.Bool:f(1),c.setUint8(s,d),s+=1;break;case t.ColumnType.Short:f(2),c.setInt16(s,d,!0),s+=2;break;case t.ColumnType.UShort:f(2),c.setUint16(s,d,!0),s+=2;break;case t.ColumnType.Int:f(4),c.setInt32(s,d,!0),s+=4;break;case t.ColumnType.UInt:f(4),c.setUint32(s,d,!0),s+=4;break;case t.ColumnType.Long:f(8),c.setBigInt64(s,BigInt(d),!0),s+=8;break;case t.ColumnType.Double:f(8),c.setFloat64(s,d,!0),s+=8;break;case t.ColumnType.DateTime:case t.ColumnType.String:var b=U.encode(d);f(4),c.setUint32(s,b.length,!0),s+=4,f(b.length),u.set(b,s),s+=b.length;break;default:throw new Error("Unknown type "+h.type)}}var v=null;s>0&&(v=F.createPropertiesVector(o,u.slice(0,s)));var y=function t(e,n){var r=n.xy,i=n.z,o=n.ends,s=n.parts,a=n.type;if(s){var u=s.map((function(n){return t(e,n)})),c=P.createPartsVector(e,u);return P.startGeometry(e),P.addParts(e,c),P.addType(e,a),P.endGeometry(e)}var f,l,h=P.createXyVector(e,r);return i&&(f=P.createZVector(e,i)),o&&(l=P.createEndsVector(e,o)),P.startGeometry(e),l&&P.addEnds(e,l),P.addXy(e,h),f&&P.addZ(e,f),P.addType(e,a),P.endGeometry(e)}(o,e);F.startFeature(o),F.addGeometry(o,y),v&&F.addProperties(o,v);var _=F.endFeature(o);return o.finishSizePrefixed(_),o.asUint8Array()
/*! *****************************************************************************
      Copyright (c) Microsoft Corporation.

      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.

      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** */}new TextDecoder;var A=function(t,e){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function M(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function V(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function L(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function N(t){return this instanceof N?(this.v=t,this):new N(t)}function B(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=i[t](e)).value instanceof N?Promise.resolve(n.value.v).then(u,c):f(o[0][2],n)}catch(t){f(o[0][3],t)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function f(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}var G=function(t){function e(e){var n=t.call(this,e)||this;return Object.defineProperty(n,"name",{value:"RepeaterOverflowError",enumerable:!1}),"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(n,n.constructor.prototype):n.__proto__=n.constructor.prototype,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(n,n.constructor),n}return function(t,e){function n(){this.constructor=t}A(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error);function q(t){null!=t&&"function"==typeof t.then&&t.then(D,D)}!function(){function t(t){if(t<0)throw new RangeError("Capacity may not be less than 0");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),t.prototype.add=function(t){if(this.full)throw new Error("Buffer full");this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){for(;this._q.length>=this._c;)this._q.shift();this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){this._q.length<this._c&&this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}();var D=function(){};function z(t){var e=t.err,n=Promise.resolve(t.execution).then((function(t){if(null!=e)throw e;return t}));return t.err=void 0,t.execution=n.then((function(){}),(function(){})),void 0===t.pending?n:t.pending.then((function(){return n}))}function X(t,e){var n=t.state>=3;return Promise.resolve(e).then((function(e){return!n&&t.state>=4?z(t).then((function(t){return{value:t,done:!0}})):{value:e,done:n}}))}function Y(t,e){var n,r;if(!(t.state>=2))if(t.state=2,t.onnext(),t.onstop(),null==t.err&&(t.err=e),0!==t.pushes.length||void 0!==t.buffer&&!t.buffer.empty)try{for(var i=L(t.pushes),o=i.next();!o.done;o=i.next())o.value.resolve()}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}else W(t)}function W(t){var e,n;if(!(t.state>=3)){t.state<2&&Y(t),t.state=3,t.buffer=void 0;try{for(var r=L(t.nexts),i=r.next();!i.done;i=r.next()){var o=i.value,s=void 0===t.pending?z(t):t.pending.then((function(){return z(t)}));o.resolve(X(t,s))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}t.pushes=[],t.nexts=[]}}function H(t){t.state>=4||(t.state<3&&W(t),t.state=4)}function Z(t,e){if(q(e),t.pushes.length>=1024)throw new G("No more than 1024 pending calls to push are allowed on a single repeater.");if(t.state>=2)return Promise.resolve(void 0);var n,r=void 0===t.pending?Promise.resolve(e):t.pending.then((function(){return e}));r=r.catch((function(e){t.state<2&&(t.err=e),H(t)})),t.nexts.length?(t.nexts.shift().resolve(X(t,r)),n=t.nexts.length?Promise.resolve(t.nexts[0].value):new Promise((function(e){return t.onnext=e}))):void 0===t.buffer||t.buffer.full?n=new Promise((function(e){return t.pushes.push({resolve:e,value:r})})):(t.buffer.add(r),n=Promise.resolve(void 0));var i=!0,o={},s=n.catch((function(t){if(i)throw t}));return o.then=function(t,e){return i=!1,Promise.prototype.then.call(n,t,e)},o.catch=function(t){return i=!1,Promise.prototype.catch.call(n,t)},o.finally=n.finally.bind(n),t.pending=r.then((function(){return s})).catch((function(e){t.err=e,H(t)})),o}function K(t){if(!(t.state>=1)){t.state=1;var e=Z.bind(null,t),n=function(t){var e=Y.bind(null,t),n=new Promise((function(e){return t.onstop=e}));return e.then=n.then.bind(n),e.catch=n.catch.bind(n),e.finally=n.finally.bind(n),e}(t);t.execution=new Promise((function(r){return r(t.executor(e,n))})),t.execution.catch((function(){return Y(t)}))}}var J,$=new WeakMap,Q=function(){function t(t,e){$.set(this,{executor:t,buffer:e,err:void 0,state:0,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:D,onstop:D})}return t.prototype.next=function(t){q(t);var e=$.get(this);if(void 0===e)throw new Error("WeakMap error");if(e.nexts.length>=1024)throw new G("No more than 1024 pending calls to next are allowed on a single repeater.");if(e.state<=0&&K(e),e.onnext(t),void 0!==e.buffer&&!e.buffer.empty){var n=X(e,e.buffer.remove());if(e.pushes.length){var r=e.pushes.shift();e.buffer.add(r.value),e.onnext=r.resolve}return n}if(e.pushes.length){var i=e.pushes.shift();return e.onnext=i.resolve,X(e,i.value)}return e.state>=2?(W(e),X(e,z(e))):new Promise((function(n){return e.nexts.push({resolve:n,value:t})}))},t.prototype.return=function(t){q(t);var e=$.get(this);if(void 0===e)throw new Error("WeakMap error");return W(e),e.execution=Promise.resolve(e.execution).then((function(){return t})),X(e,z(e))},t.prototype.throw=function(t){var e=$.get(this);if(void 0===e)throw new Error("WeakMap error");return e.state<=0||e.state>=2||void 0!==e.buffer&&!e.buffer.empty?(W(e),null==e.err&&(e.err=t),X(e,z(e))):this.next(Promise.reject(t))},t.prototype[Symbol.asyncIterator]=function(){return this},t.race=et,t.merge=nt,t.zip=rt,t.latest=it,t}();function tt(t,e){var n,r,i=[],o=function(t){null!=t&&"function"==typeof t[Symbol.asyncIterator]?i.push(t[Symbol.asyncIterator]()):null!=t&&"function"==typeof t[Symbol.iterator]?i.push(t[Symbol.iterator]()):i.push(function(){return B(this,arguments,(function(){return V(this,(function(n){switch(n.label){case 0:return e.yieldValues?[4,N(t)]:[3,3];case 1:return[4,n.sent()];case 2:n.sent(),n.label=3;case 3:return e.returnValues?[4,N(t)]:[3,5];case 4:return[2,n.sent()];case 5:return[2]}}))}))}())};try{for(var s=L(t),a=s.next();!a.done;a=s.next())o(a.value)}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function et(t){var e=this,n=tt(t,{returnValues:!0});return new Q((function(t,r){return M(e,void 0,void 0,(function(){var e,i,o,s,a,u;return V(this,(function(c){switch(c.label){case 0:if(!n.length)return r(),[2];i=!1,r.then((function(){e(),i=!0})),c.label=1;case 1:c.trys.push([1,,5,7]),s=void 0,a=0,u=function(){var i,u,c,f,l,h;return V(this,(function(d){switch(d.label){case 0:i=a;try{for(l=void 0,u=L(n),c=u.next();!c.done;c=u.next())f=c.value,Promise.resolve(f.next()).then((function(t){t.done?(r(),void 0===o&&(o=t)):a===i&&(a++,e(t))}),(function(t){return r(t)}))}catch(t){l={error:t}}finally{try{c&&!c.done&&(h=u.return)&&h.call(u)}finally{if(l)throw l.error}}return[4,new Promise((function(t){return e=t}))];case 1:return void 0===(s=d.sent())?[3,3]:[4,t(s.value)];case 2:d.sent(),d.label=3;case 3:return[2]}}))},c.label=2;case 2:return i?[3,4]:[5,u()];case 3:return c.sent(),[3,2];case 4:return[2,o&&o.value];case 5:return r(),[4,Promise.race(n.map((function(t){return t.return&&t.return()})))];case 6:return c.sent(),[7];case 7:return[2]}}))}))}))}function nt(t){var e=this,n=tt(t,{yieldValues:!0});return new Q((function(t,r){return M(e,void 0,void 0,(function(){var e,i,o,s=this;return V(this,(function(a){switch(a.label){case 0:if(!n.length)return r(),[2];e=[],i=!1,r.then((function(){var t,n;i=!0;try{for(var r=L(e),o=r.next();!o.done;o=r.next())(0,o.value)()}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}})),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,Promise.all(n.map((function(n,a){return M(s,void 0,void 0,(function(){var s;return V(this,(function(u){switch(u.label){case 0:u.trys.push([0,,6,9]),u.label=1;case 1:return i?[3,5]:(Promise.resolve(n.next()).then((function(t){return e[a](t)}),(function(t){return r(t)})),[4,new Promise((function(t){e[a]=t}))]);case 2:return void 0===(s=u.sent())?[3,4]:s.done?(o=s,[2]):[4,t(s.value)];case 3:u.sent(),u.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return n.return?[4,n.return()]:[3,8];case 7:u.sent(),u.label=8;case 8:return[7];case 9:return[2]}}))}))})))];case 2:return a.sent(),[2,o&&o.value];case 3:return r(),[7];case 4:return[2]}}))}))}))}function rt(t){var e=this,n=tt(t,{returnValues:!0});return new Q((function(t,r){return M(e,void 0,void 0,(function(){var e,i,o,s;return V(this,(function(a){switch(a.label){case 0:if(!n.length)return r(),[2,[]];i=!1,r.then((function(){e(),i=!0})),a.label=1;case 1:a.trys.push([1,,6,8]),a.label=2;case 2:return i?[3,5]:(Promise.all(n.map((function(t){return t.next()}))).then((function(t){return e(t)}),(function(t){return r(t)})),[4,new Promise((function(t){return e=t}))]);case 3:return void 0===(o=a.sent())?[2]:(s=o.map((function(t){return t.value})),o.some((function(t){return t.done}))?[2,s]:[4,t(s)]);case 4:return a.sent(),[3,2];case 5:return[3,8];case 6:return r(),[4,Promise.all(n.map((function(t){return t.return&&t.return()})))];case 7:return a.sent(),[7];case 8:return[2]}}))}))}))}function it(t){var e=this,n=tt(t,{yieldValues:!0,returnValues:!0});return new Q((function(t,r){return M(e,void 0,void 0,(function(){var e,i,o,s,a,u=this;return V(this,(function(c){switch(c.label){case 0:if(!n.length)return r(),[2,[]];i=[],o=!1,r.then((function(){var t,n;e();try{for(var r=L(i),s=r.next();!s.done;s=r.next())(0,s.value)()}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}o=!0})),c.label=1;case 1:return c.trys.push([1,,5,7]),Promise.all(n.map((function(t){return t.next()}))).then((function(t){return e(t)}),(function(t){return r(t)})),[4,new Promise((function(t){return e=t}))];case 2:return void 0===(s=c.sent())?[2]:(a=s.map((function(t){return t.value})),s.every((function(t){return t.done}))?[2,a]:[4,t(a.slice())]);case 3:return c.sent(),[4,Promise.all(n.map((function(e,n){return M(u,void 0,void 0,(function(){var u;return V(this,(function(c){switch(c.label){case 0:if(s[n].done)return[2,s[n].value];c.label=1;case 1:return o?[3,4]:(Promise.resolve(e.next()).then((function(t){return i[n](t)}),(function(t){return r(t)})),[4,new Promise((function(t){return i[n]=t}))]);case 2:return void 0===(u=c.sent())?[2,s[n].value]:u.done?[2,u.value]:(a[n]=u.value,[4,t(a.slice())]);case 3:return c.sent(),[3,1];case 4:return[2]}}))}))})))];case 4:return[2,c.sent()];case 5:return r(),[4,Promise.all(n.map((function(t){return t.return&&t.return()})))];case 6:return c.sent(),[7];case 7:return[2]}}))}))}))}var ot=function(){function t(){h(this,t),this._extraRequestThreshold=262144}return b(t,[{key:"extraRequestThreshold",value:function(){return this._extraRequestThreshold}},{key:"setExtraRequestThreshold",value:function(t){if(t<0)throw new Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=t}}]),t}();ot.global=new ot,function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error"}(J||(J={}));var st=function(){function t(){h(this,t)}return b(t,null,[{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log.apply(this,[J.Debug].concat(e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log.apply(this,[J.Info].concat(e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log.apply(this,[J.Warn].concat(e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log.apply(this,[J.Error].concat(e))}},{key:"log",value:function(t){var e,n,r,i;if(!(this.logLevel>t)){for(var o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];switch(t){case J.Debug:(e=console).debug.apply(e,s);break;case J.Info:(n=console).info.apply(n,s);break;case J.Warn:(r=console).warn.apply(r,s);break;case J.Error:(i=console).error.apply(i,s)}}}}]),t}();function at(t,e){e=Math.min(Math.max(+e,2),65535);var n=t,r=n;do{r+=n=Math.ceil(n/e)}while(1!==n);return 40*r}function ut(t,e,n,r){return ct.apply(this,arguments)}function ct(){return(ct=m(regeneratorRuntime.mark((function t(e,n,r,i){var o,s,a,u,f,l,d,p,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=function(){function t(e,n){h(this,t),this._level=n,this.nodes=e}return b(t,[{key:"level",value:function(){return this._level}},{key:"startNode",value:function(){return this.nodes[0]}},{key:"endNode",value:function(){return this.nodes[1]}},{key:"extendEndNodeToNewOffset",value:function(t){console.assert(t>this.nodes[1]),this.nodes[1]=t}},{key:"toString",value:function(){return"[NodeRange level: ".concat(this._level,", nodes: ").concat(this.nodes[0],"-").concat(this.nodes[1],"]")}}]),t}(),s=r.minX,a=r.minY,u=r.maxX,f=r.maxY,st.info("tree items: ".concat(e,", nodeSize: ").concat(n)),l=function(t,e){if(e<2)throw new Error("Node size must be at least 2");if(0===t)throw new Error("Number of items must be greater than 0");var n=t,r=n,i=[n];do{r+=n=Math.ceil(n/e),i.push(n)}while(1!==n);var o=[];n=r;for(var s=0,a=i;s<a.length;s++){var u=a[s];o.push(n-u),n-=u}o.reverse(),i.reverse();for(var c=[],f=0;f<i.length;f++)c.push([o[f],o[f]+i[f]]);return c.reverse(),c}(e,n),d=l[0][0],p=[function(){var t=l.length-1;return new o([0,1],t)}()],v=regeneratorRuntime.mark((function t(){var r,h,b,v,y,_,m,w,k,x,O,I;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=p.shift(),st.debug("popped node: ".concat(r,", queueLength: ").concat(p.length)),h=r.startNode(),b=h>=d,v=c(l[r.level()],2),y=v[1],_=Math.min(r.endNode()+n,y),m=_-h,t.next=10,g(i(40*h,40*m));case 10:w=t.sent,k=new Float64Array(w),x=new Uint32Array(w),O=regeneratorRuntime.mark((function t(n){var i,c,l,v,y,_,g;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(u<k[(i=5*(n-h))+0])){t.next=3;break}return t.abrupt("return","continue");case 3:if(!(f<k[i+1])){t.next=5;break}return t.abrupt("return","continue");case 5:if(!(s>k[i+2])){t.next=7;break}return t.abrupt("return","continue");case 7:if(!(a>k[i+3])){t.next=9;break}return t.abrupt("return","continue");case 9:if(c=x[8+(i<<1)],l=ft(x[9+(i<<1)],c),!b){t.next=15;break}return v=function(){if(n<e-1){var t=5*(n-h+1),r=x[8+(t<<1)];return ft(x[9+(t<<1)],r)-l}return null}(),t.next=14,[l,n-d,v];case 14:return t.abrupt("return","continue");case 15:if(y=ot.global.extraRequestThreshold()/40,!(void 0!==(_=p[p.length-1])&&_.level()==r.level()-1&&l<_.endNode()+y)){t.next=19;break}return st.debug('Merging "nodeRange" request into existing range: '.concat(_,", newOffset: ").concat(_.endNode()," -> ").concat(l)),_.extendEndNodeToNewOffset(l),t.abrupt("return","continue");case 19:g=function(){var t=r.level()-1;return new o([l,l+1],t)}(),void 0!==_&&_.level()==g.level()?st.info("Same level, but too far away. Pushing new request at offset: ".concat(l," rather than merging with distant ").concat(_)):st.info("Pushing new level for ".concat(g," onto queue with nearestNodeRange: ").concat(_," since there's not already a range for this level.")),p.push(g);case 21:case"end":return t.stop()}}),t)})),I=h;case 15:if(!(I<_)){t.next=23;break}return t.delegateYield(O(I),"t0",17);case 17:if("continue"!==t.t0){t.next=20;break}return t.abrupt("continue",20);case 20:I++,t.next=15;break;case 23:case"end":return t.stop()}}),t)})),st.debug("starting stream search with queue: ".concat(p,", numItems: ").concat(e,", nodeSize: ").concat(n,", levelBounds: ").concat(l));case 6:if(0==p.length){t.next=10;break}return t.delegateYield(v(),"t0",8);case 8:t.next=6;break;case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ft(t,e){if(0!=(4293918720&t))throw Error("integer is too large to be safely represented");return e+t*Math.pow(2,32)}st.logLevel=J.Info;var lt=new Uint8Array([102,103,98,3,102,103,98,0]),ht=function(){function t(e,n,r,i){h(this,t),this.headerClient=e,this.header=n,this.headerLength=r,this.indexLength=i}var e,n;return b(t,[{key:"selectBbox",value:function(t){var e=this;return m(regeneratorRuntime.mark((function n(){var r,i,o,s,a,f,l,h,d,b,p,_,m,w,k,x,O,I;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.lengthBeforeTree(),i=e.headerClient,o=function(){var t=u(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i.getRange(r+e,n,0,"index"));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),s=[],a=[],f=!1,l=!1,n.prev=4,d=y(ut(e.header.featuresCount,e.header.indexNodeSize,t,o));case 6:return n.next=8,g(d.next());case 8:if(!(f=!(b=n.sent).done)){n.next=21;break}if(p=b.value,_=c(p,2),m=_[0],w=c(p,3),(k=w[2])||(st.info("final feature"),k=ot.global.extraRequestThreshold()),0!=a.length){n.next=16;break}return a.push([m,k]),n.abrupt("continue",18);case 16:x=a[a.length-1],(O=m-(x[0]+x[1]))>ot.global.extraRequestThreshold()&&(st.info("Pushing new feature batch, since gap ".concat(O," was too large")),s.push(a),a=[]),a.push([m,k]);case 18:f=!1,n.next=6;break;case 21:n.next=27;break;case 23:n.prev=23,n.t0=n.catch(4),l=!0,h=n.t0;case 27:if(n.prev=27,n.prev=28,!f||null==d.return){n.next=32;break}return n.next=32,g(d.return());case 32:if(n.prev=32,!l){n.next=35;break}throw h;case 35:return n.finish(32);case 36:return n.finish(27);case 37:return e.headerClient.logUsage("header+index"),a.length>0&&s.push(a),I=s.flatMap((function(t){return e.readFeatureBatch(t)})),n.delegateYield(v(y(Q.merge(I)),g),"t1",40);case 40:case"end":return n.stop()}}),n,null,[[4,23,27,37],[28,,32,36]])})))()}},{key:"lengthBeforeTree",value:function(){return lt.length+4+this.headerLength}},{key:"lengthBeforeFeatures",value:function(){return this.lengthBeforeTree()+this.indexLength}},{key:"buildFeatureClient",value:function(){return new dt(this.headerClient.httpClient)}},{key:"readFeatureBatch",value:function(t){var e=this;return m(regeneratorRuntime.mark((function n(){var r,i,o,a,u,f,l,h,d,b,p;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=c(t[0],1),i=r[0],o=c(t[t.length-1],2),a=o[0],u=o[1],f=a+u-i,l=e.buildFeatureClient(),h=s(t),n.prev=2,h.s();case 4:if((d=h.n()).done){n.next=12;break}return b=c(d.value,1),p=b[0],n.next=8,g(e.readFeature(l,p,f));case 8:return n.next=10,n.sent;case 10:n.next=4;break;case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(2),h.e(n.t0);case 17:return n.prev=17,h.f(),n.finish(17);case 20:l.logUsage("feature");case 21:case"end":return n.stop()}}),n,null,[[2,14,17,20]])})))()}},{key:"readFeature",value:(n=u(regeneratorRuntime.mark((function t(e,n,r){var i,o,s,a,u,c,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n+this.lengthBeforeFeatures(),t.next=3,e.getRange(i,4,r,"feature length");case 3:return s=t.sent,o=new DataView(s).getUint32(0,!0),t.next=7,e.getRange(i+4,o,r,"feature data");case 7:return a=t.sent,u=new Uint8Array(a),(c=new Uint8Array(o+4)).set(u,4),f=new d(c),t.abrupt("return",(f.setPosition(4),F.getRootAsFeature(f)));case 13:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return n.apply(this,arguments)})}],[{key:"open",value:(e=u(regeneratorRuntime.mark((function e(n){var r,i,o,s,a,u,c,f,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new dt(n),i=function(){var t,e=0;for(t=0;t<3;t++)e+=40*Math.pow(16,t);return e}(),o=2024+i,st.debug("fetching header. minReqLength: ".concat(o," (assumedHeaderLength: 2024, assumedIndexLength: ").concat(i,")")),e.t0=Uint8Array,e.next=5,r.getRange(0,8,o,"header");case 5:if(e.t1=e.sent,(s=new e.t0(e.t1)).subarray(0,3).every((function(t,e){return lt[e]===t}))){e.next=9;break}throw st.error("bytes: ".concat(s," != ").concat(lt)),new Error("Not a FlatGeobuf file");case 9:return st.debug("magic bytes look good"),e.next=12,r.getRange(8,4,o,"header");case 12:if(u=e.sent,!((a=new DataView(u).getUint32(0,!0))>10485760||a<8)){e.next=16;break}throw new Error("Invalid header size");case 16:return st.debug("headerLength: ".concat(a)),e.next=19,r.getRange(12,a,o,"header");case 19:return c=e.sent,f=new d(new Uint8Array(c)),l=E.fromByteBuffer(f),h=at(l.featuresCount,l.indexNodeSize),e.abrupt("return",(st.debug("completed: opening http reader"),new t(r,l,a,h)));case 24:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})}]),t}(),dt=function(){function t(e){h(this,t),this.bytesEverUsed=0,this.bytesEverFetched=0,this.buffer=new ArrayBuffer(0),this.head=0,this.httpClient="string"==typeof e?new bt(e):e}var e;return b(t,[{key:"getRange",value:(e=u(regeneratorRuntime.mark((function t(e,n,r,i){var o,s,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.bytesEverUsed+=n,o=e-this.head,s=o+n,!(o>=0&&s<=this.buffer.byteLength)){t.next=4;break}return t.abrupt("return",this.buffer.slice(o,s));case 4:return a=Math.max(n,r),this.bytesEverFetched+=a,st.debug("requesting for new Range: ".concat(e,"-").concat(e+n-1)),t.next=9,this.httpClient.getRange(e,a,i);case 9:return this.buffer=t.sent,this.head=e,t.abrupt("return",this.buffer.slice(0,n));case 12:case"end":return t.stop()}}),t,this)}))),function(t,n,r,i){return e.apply(this,arguments)})},{key:"logUsage",value:function(t){var e=t.split(" ")[0],n=this.bytesEverUsed,r=this.bytesEverFetched,i=(100*n/r).toFixed(2);st.info("".concat(e," bytes used/requested: ").concat(n," / ").concat(r," = ").concat(i,"%"))}}]),t}(),bt=function(){function t(e){h(this,t),this.requestsEverMade=0,this.bytesEverRequested=0,this.url=e}var e;return b(t,[{key:"getRange",value:(e=u(regeneratorRuntime.mark((function t(e,n,r){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.requestsEverMade+=1,this.bytesEverRequested+=n,i="bytes=".concat(e,"-").concat(e+n-1),st.info("request: #".concat(this.requestsEverMade,", purpose: ").concat(r,"), bytes: (this_request: ").concat(n,", ever: ").concat(this.bytesEverRequested,"), Range: ").concat(i)),t.next=5,fetch(this.url,{headers:{Range:i}});case 5:return t.abrupt("return",t.sent.arrayBuffer());case 6:case"end":return t.stop()}}),t,this)}))),function(t,n,r){return e.apply(this,arguments)})}]),t}();function pt(){return(pt=m(regeneratorRuntime.mark((function t(e,n,r){var i,o,s,a,c,f,l,h,b,p,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="function"==typeof(o=e).slice?o:new k("function"==typeof o.read?o:o.getReader()),s=function(){var t=u(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.slice(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.t0=Uint8Array,t.next=5,g(s(8));case 5:if(t.t1=t.sent,(a=new t.t0(t.t1)).subarray(0,3).every((function(t,e){return lt[e]===t}))){t.next=9;break}throw new Error("Not a FlatGeobuf file");case 9:return t.t2=Uint8Array,t.next=12,g(s(4));case 12:return t.t3=t.sent,a=new t.t2(t.t3),c=new d(a),f=c.readUint32(0),t.t4=Uint8Array,t.next=19,g(s(f));case 19:if(t.t5=t.sent,a=new t.t4(t.t5),c=new d(a),l=E.fromByteBuffer(c),r&&r(l),h=l.indexNodeSize,b=l.featuresCount,!(h>0)){t.next=29;break}return p=at(b,h),t.next=29,g(s(p));case 29:return t.next=31,g(vt(s,l,n));case 31:if(!(v=t.sent)){t.next=36;break}return t.next=34,v;case 34:t.next=29;break;case 36:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function vt(t,e,n){return yt.apply(this,arguments)}function yt(){return(yt=u(regeneratorRuntime.mark((function t(e,n,r){var i,o,s,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,e(4,"feature length");case 3:if(t.t1=t.sent,0!==(i=new t.t0(t.t1)).byteLength){t.next=7;break}return t.abrupt("return");case 7:return o=new d(i),s=o.readUint32(0),t.t2=Uint8Array,t.next=12,e(s,"feature data");case 12:return t.t3=t.sent,i=new t.t2(t.t3),(a=new Uint8Array(s+4)).set(i,4),(o=new d(a)).setPosition(4),t.abrupt("return",r(F.getRootAsFeature(o),n));case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}t.deserialize=function(t,e,n){return t instanceof Uint8Array?function(t,e,n){if(!t.subarray(0,3).every((function(t,e){return lt[e]===t})))throw new Error("Not a FlatGeobuf file");var r=new d(t),i=r.readUint32(lt.length);r.setPosition(lt.length+4);var o=E.fromByteBuffer(r),s=lt.length+4+i,a=o.indexNodeSize,u=o.featuresCount;a>0&&(s+=at(u,a));for(var c=[];s<r.capacity();){var f=r.readUint32(s);r.setPosition(s+4);var l=F.getRootAsFeature(r);c.push(e(l,o)),s+=4+f}return c}(t,e):t instanceof ReadableStream?function(t,e,n){return pt.apply(this,arguments)}(t,e):(r=m(regeneratorRuntime.mark((function t(e,n,r,i){var o,s,a,u,c,f,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(ht.open(e));case 2:o=t.sent,st.debug("opened reader"),i&&i(o.header),s=!1,a=!1,t.prev=6,c=y(o.selectBbox(n));case 8:return t.next=10,g(c.next());case 10:if(!(s=!(f=t.sent).done)){t.next=17;break}return l=f.value,t.next=14,r(l,o.header);case 14:s=!1,t.next=8;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(6),a=!0,u=t.t0;case 23:if(t.prev=23,t.prev=24,!s||null==c.return){t.next=28;break}return t.next=28,g(c.return());case 28:if(t.prev=28,!a){t.next=31;break}throw u;case 31:return t.finish(28);case 32:return t.finish(23);case 33:case"end":return t.stop()}}),t,null,[[6,19,23,33],[24,,28,32]])}))),function(t,e,n,i){return r.apply(this,arguments)})(t,n,e);var r},t.serialize=function(e){var n=function(e){var n=e[0],r=n.getProperties?n.getProperties():{},i=null;r&&(i=Object.keys(r).filter((function(t){return"geometry"!==t})).map((function(e){return new x(e,function(e){if("boolean"==typeof e)return t.ColumnType.Bool;if("number"==typeof e)return e%1==0?t.ColumnType.Int:t.ColumnType.Double;if("string"==typeof e)return t.ColumnType.String;if(null===e)return t.ColumnType.String;throw new Error("Unknown type (value '".concat(e,"')"))}(r[e]),null,null,-1,-1,-1,!0,!1,!1)})));var o=function(e){var n,r,i,o=s(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(n===t.GeometryType.Unknown)break;var u=(i=a).getGeometry?R(i.getGeometry().getType()):R(i.geometry.type);void 0===n?n=u:n!==u&&(n=t.GeometryType.Unknown)}}catch(t){o.e(t)}finally{o.f()}if(void 0===n)throw new Error("Could not infer geometry type for collection of features.");return n}(e);return new E(o,i,e.length,0,null,null,null,null)}(e),r=function(t){var e=new p,n=null;t.columns&&(n=C.createColumnsVector(e,t.columns.map((function(t){return function(t,e){var n=t.createString(e.name);return O.startColumn(t),O.addName(t,n),O.addType(t,e.type),O.endColumn(t)}(e,t)}))));var r=e.createString("L1");C.startHeader(e),C.addFeaturesCount(e,new a(t.featuresCount,0)),C.addGeometryType(e,t.geometryType),C.addIndexNodeSize(e,0),n&&C.addColumns(e,n),C.addName(e,r);var i=C.endHeader(e);return e.finishSizePrefixed(i),e.asUint8Array()}(n),i=e.map((function(t){if(!t.getGeometry)throw new Error("Missing getGeometry implementation");if(!t.getProperties)throw new Error("Missing getProperties implementation");return T(j(t.getGeometry(),n.geometryType),t.getProperties(),n)})),o=i.map((function(t){return t.length})).reduce((function(t,e){return t+e})),u=new Uint8Array(lt.length+r.length+o);u.set(r,lt.length);var c,f=lt.length+r.length,l=s(i);try{for(l.s();!(c=l.n()).done;){var h=c.value;u.set(h,f),f+=h.length}}catch(t){l.e(t)}finally{l.f()}return u.set(lt),u},Object.defineProperty(t,"__esModule",{value:!0})}))},function(t,e,n){var r,i,o;function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=f(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function a(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,i)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){a(o,r,i,s,u,"next",t)}function u(t){a(o,r,i,s,u,"throw",t)}s(void 0)}))}}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(t){a=!0,i=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){var n={},r=!1;function i(n,i){return r=!0,i=new Promise((function(e){e(t[n](i))})),{done:!1,value:e(i)}}return n["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},n.next=function(t){return r?(r=!1,t):i("next",t)},"function"==typeof t.throw&&(n.throw=function(t){if(r)throw r=!1,t;return i("throw",t)}),"function"==typeof t.return&&(n.return=function(t){return r?(r=!1,t):i("return",t)}),n}function y(t){var e,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(e=t[n]))return e.call(t);if(r&&null!=(e=t[r]))return new _(e.call(t));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function _(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return(_=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new _(t)}function g(t){return new k(t)}function m(t){return function(){return new w(t.apply(this,arguments))}}function w(t){var e,n;function r(e,n){try{var o=t[e](n),s=o.value,a=s instanceof k;Promise.resolve(a?s.wrapped:s).then((function(t){a?r("return"===e?"return":"next",t):i(o.done?"return":"normal",t)}),(function(t){r("throw",t)}))}catch(t){i("throw",t)}}function i(t,i){switch(t){case"return":e.resolve({value:i,done:!0});break;case"throw":e.reject(i);break;default:e.resolve({value:i,done:!1})}(e=e.next)?r(e.key,e.arg):n=null}this._invoke=function(t,i){return new Promise((function(o,s){var a={key:t,arg:i,resolve:o,reject:s,next:null};n?n=n.next=a:(e=n=a,r(t,i))}))},"function"!=typeof t.return&&(this.return=void 0)}function k(t){this.wrapped=t}w.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},w.prototype.next=function(t){return this._invoke("next",t)},w.prototype.throw=function(t){return this._invoke("throw",t)},w.prototype.return=function(t){return this._invoke("return",t)},function(s,a){"object"==p(e)&&void 0!==t?a(e,n(31),n(16),n(24),n(20),n(32),n(21),n(34)):(i=[e,n(31),n(16),n(24),n(20),n(32),n(21),n(34)],void 0===(o="function"==typeof(r=a)?r.apply(e,i):r)||(t.exports=o))}(0,(function(t,e,n,r,i,o,a,f){"use strict";function l(t){return t&&"object"==p(t)&&"default"in t?t:{default:t}}var d,_=l(e),w=l(n),k=l(r),x=l(i),O=l(o),I=l(a),C=l(f),P=new Int32Array(2),F=new Float32Array(P.buffer),S=new Float64Array(P.buffer),E=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],j=function(){function t(e,n){h(this,t),this.low=0|e,this.high=0|n}return b(t,[{key:"toFloat64",value:function(){return(this.low>>>0)+4294967296*this.high}},{key:"equals",value:function(t){return this.low==t.low&&this.high==t.high}}],[{key:"create",value:function(e,n){return 0==e&&0==n?t.ZERO:new t(e,n)}}]),t}();j.ZERO=new j(0,0),function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(d||(d={}));var R,U,T=function(){function t(e){h(this,t),this.bytes_=e,this.position_=0}return b(t,[{key:"clear",value:function(){this.position_=0}},{key:"bytes",value:function(){return this.bytes_}},{key:"position",value:function(){return this.position_}},{key:"setPosition",value:function(t){this.position_=t}},{key:"capacity",value:function(){return this.bytes_.length}},{key:"readInt8",value:function(t){return this.readUint8(t)<<24>>24}},{key:"readUint8",value:function(t){return this.bytes_[t]}},{key:"readInt16",value:function(t){return this.readUint16(t)<<16>>16}},{key:"readUint16",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8}},{key:"readInt32",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}},{key:"readUint32",value:function(t){return this.readInt32(t)>>>0}},{key:"readInt64",value:function(t){return new j(this.readInt32(t),this.readInt32(t+4))}},{key:"readUint64",value:function(t){return new j(this.readUint32(t),this.readUint32(t+4))}},{key:"readFloat32",value:function(t){return P[0]=this.readInt32(t),F[0]}},{key:"readFloat64",value:function(t){return P[E?0:1]=this.readInt32(t),P[E?1:0]=this.readInt32(t+4),S[0]}},{key:"writeInt8",value:function(t,e){this.bytes_[t]=e}},{key:"writeUint8",value:function(t,e){this.bytes_[t]=e}},{key:"writeInt16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeUint16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeInt32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeUint32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeInt64",value:function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)}},{key:"writeUint64",value:function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)}},{key:"writeFloat32",value:function(t,e){F[0]=e,this.writeInt32(t,P[0])}},{key:"writeFloat64",value:function(t,e){S[0]=e,this.writeInt32(t,P[E?0:1]),this.writeInt32(t+4,P[E?1:0])}},{key:"getBufferIdentifier",value:function(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}},{key:"__offset",value:function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}},{key:"__union",value:function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}},{key:"__string",value:function(t,e){t+=this.readInt32(t);var n=this.readInt32(t),r="",i=0;if(t+=4,e===d.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;i<n;){var o=void 0,s=this.readUint8(t+i++);if(s<192)o=s;else{var a=this.readUint8(t+i++);if(s<224)o=(31&s)<<6|63&a;else{var u=this.readUint8(t+i++);o=s<240?(15&s)<<12|(63&a)<<6|63&u:(7&s)<<18|(63&a)<<12|(63&u)<<6|63&this.readUint8(t+i++)}}o<65536?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296+(o>>10),56320+(1023&o)))}return r}},{key:"__union_with_string",value:function(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)}},{key:"__indirect",value:function(t){return t+this.readInt32(t)}},{key:"__vector",value:function(t){return t+this.readInt32(t)+4}},{key:"__vector_len",value:function(t){return this.readInt32(t+this.readInt32(t))}},{key:"__has_identifier",value:function(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(var e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}},{key:"createLong",value:function(t,e){return j.create(t,e)}},{key:"createScalarList",value:function(t,e){for(var n=[],r=0;r<e;++r)null!==t(r)&&n.push(t(r));return n}},{key:"createObjList",value:function(t,e){for(var n=[],r=0;r<e;++r){var i=t(r);null!==i&&n.push(i.unpack())}return n}}],[{key:"allocate",value:function(e){return new t(new Uint8Array(e))}}]),t}(),A=function(){function t(e){var n;h(this,t),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,n=e||1024,this.bb=T.allocate(n),this.space=n}return b(t,[{key:"clear",value:function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}},{key:"forceDefaults",value:function(t){this.force_defaults=t}},{key:"dataBuffer",value:function(){return this.bb}},{key:"asUint8Array",value:function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}},{key:"prep",value:function(e,n){e>this.minalign&&(this.minalign=e);for(var r=1+~(this.bb.capacity()-this.space+n)&e-1;this.space<r+e+n;){var i=this.bb.capacity();this.bb=t.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}},{key:"pad",value:function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}},{key:"writeInt8",value:function(t){this.bb.writeInt8(this.space-=1,t)}},{key:"writeInt16",value:function(t){this.bb.writeInt16(this.space-=2,t)}},{key:"writeInt32",value:function(t){this.bb.writeInt32(this.space-=4,t)}},{key:"writeInt64",value:function(t){this.bb.writeInt64(this.space-=8,t)}},{key:"writeFloat32",value:function(t){this.bb.writeFloat32(this.space-=4,t)}},{key:"writeFloat64",value:function(t){this.bb.writeFloat64(this.space-=8,t)}},{key:"addInt8",value:function(t){this.prep(1,0),this.writeInt8(t)}},{key:"addInt16",value:function(t){this.prep(2,0),this.writeInt16(t)}},{key:"addInt32",value:function(t){this.prep(4,0),this.writeInt32(t)}},{key:"addInt64",value:function(t){this.prep(8,0),this.writeInt64(t)}},{key:"addFloat32",value:function(t){this.prep(4,0),this.writeFloat32(t)}},{key:"addFloat64",value:function(t){this.prep(8,0),this.writeFloat64(t)}},{key:"addFieldInt8",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))}},{key:"addFieldInt16",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))}},{key:"addFieldInt32",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))}},{key:"addFieldInt64",value:function(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))}},{key:"addFieldFloat32",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))}},{key:"addFieldFloat64",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))}},{key:"addFieldOffset",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))}},{key:"addFieldStruct",value:function(t,e,n){e!=n&&(this.nested(e),this.slot(t))}},{key:"nested",value:function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}},{key:"notNested",value:function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}},{key:"slot",value:function(t){null!==this.vtable&&(this.vtable[t]=this.offset())}},{key:"offset",value:function(){return this.bb.capacity()-this.space}},{key:"addOffset",value:function(t){this.prep(4,0),this.writeInt32(this.offset()-t+4)}},{key:"startObject",value:function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}},{key:"endObject",value:function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var n=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var r=2*(n+2);this.addInt16(r);var i=0,o=this.space;t:for(e=0;e<this.vtables.length;e++){var s=this.bb.capacity()-this.vtables[e];if(r==this.bb.readInt16(s)){for(var a=2;a<r;a+=2)if(this.bb.readInt16(o+a)!=this.bb.readInt16(s+a))continue t;i=this.vtables[e];break}}return i?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,i-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}},{key:"finish",value:function(t,e,n){var r=n?4:0;if(e){var i=e;if(this.prep(this.minalign,8+r),4!=i.length)throw new Error("FlatBuffers: file identifier must be length 4");for(var o=3;o>=0;o--)this.writeInt8(i.charCodeAt(o))}this.prep(this.minalign,4+r),this.addOffset(t),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}},{key:"finishSizePrefixed",value:function(t,e){this.finish(t,e,!0)}},{key:"requiredField",value:function(t,e){var n=this.bb.capacity()-t,r=n-this.bb.readInt32(n);if(0==this.bb.readInt16(r+e))throw new Error("FlatBuffers: field "+e+" must be set")}},{key:"startVector",value:function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(4,t*e),this.prep(n,t*e)}},{key:"endVector",value:function(){return this.writeInt32(this.vector_num_elems),this.offset()}},{key:"createSharedString",value:function(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);var e=this.createString(t);return this.string_maps.set(t,e),e}},{key:"createString",value:function(t){if(!t)return 0;var e;if(t instanceof Uint8Array)e=t;else{e=[];for(var n=0;n<t.length;){var r=void 0,i=t.charCodeAt(n++);(r=i<55296||i>=56320?i:(i<<10)+t.charCodeAt(n++)+-56613888)<128?e.push(r):(r<2048?e.push(r>>6&31|192):(r<65536?e.push(r>>12&15|224):e.push(r>>18&7|240,r>>12&63|128),e.push(r>>6&63|128)),e.push(63&r|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(var o=0,s=this.space,a=this.bb.bytes();o<e.length;o++)a[s++]=e[o];return this.endVector()}},{key:"createLong",value:function(t,e){return j.create(t,e)}},{key:"createObjectOffset",value:function(t){return null===t?0:"string"==typeof t?this.createString(t):t.pack(this)}},{key:"createObjectOffsetList",value:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];if(null===r)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");e.push(this.createObjectOffset(r))}return e}},{key:"createStructOffsetList",value:function(t,e){return e(this,t.length),this.createObjectOffsetList(t),this.endVector()}}],[{key:"growByteBuffer",value:function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,r=T.allocate(n);return r.setPosition(n-e),r.bytes().set(t.bytes(),n-e),r}}]),t}(),M=new Uint8Array(0);function V(t,e){if(!t.length)return e;if(!e.length)return t;var n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function L(t){this._source=t,this._array=M,this._index=0}L.prototype.read=function(){var t=this,e=t._array.subarray(t._index);return t._source.read().then((function(n){return t._array=M,t._index=0,n.done?e.length>0?{done:!1,value:e}:{done:!0,value:void 0}:{done:!1,value:V(e,n.value)}}))},L.prototype.slice=function(t){if((t|=0)<0)throw new Error("invalid length");var e=this,n=this._array.length-this._index;if(this._index+t<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=t));var r=new Uint8Array(t);return r.set(this._array.subarray(this._index)),function i(){return e._source.read().then((function(o){return o.done?(e._array=M,e._index=0,n>0?r.subarray(0,n):null):n+o.value.length>=t?(e._array=o.value,e._index=t-n,r.set(o.value.subarray(0,t-n),n),r):(r.set(o.value,n),n+=o.value.length,i())}))}()},L.prototype.cancel=function(){return this._source.cancel()};var N=b((function t(e,n,r,i,o,s,a,u,c,f){h(this,t),this.name=e,this.type=n,this.title=r,this.description=i,this.width=o,this.precision=s,this.scale=a,this.nullable=u,this.unique=c,this.primary_key=f}));!function(t){t[t.Byte=0]="Byte",t[t.UByte=1]="UByte",t[t.Bool=2]="Bool",t[t.Short=3]="Short",t[t.UShort=4]="UShort",t[t.Int=5]="Int",t[t.UInt=6]="UInt",t[t.Long=7]="Long",t[t.ULong=8]="ULong",t[t.Float=9]="Float",t[t.Double=10]="Double",t[t.String=11]="String",t[t.Json=12]="Json",t[t.DateTime=13]="DateTime",t[t.Binary=14]="Binary"}(R||(R={}));var B=function(){function t(){h(this,t),this.bb=null,this.bb_pos=0}return b(t,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"type",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):R.Byte}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"width",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"precision",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"scale",value:function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"nullable",value:function(){var t=this.bb.__offset(this.bb_pos,18);return!t||!!this.bb.readInt8(this.bb_pos+t)}},{key:"unique",value:function(){var t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"primaryKey",value:function(){var t=this.bb.__offset(this.bb_pos,22);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__string(this.bb_pos+e,t):null}}],[{key:"getRootAsColumn",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsColumn",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startColumn",value:function(t){t.startObject(11)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addType",value:function(t,e){t.addFieldInt8(1,e,R.Byte)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWidth",value:function(t,e){t.addFieldInt32(4,e,-1)}},{key:"addPrecision",value:function(t,e){t.addFieldInt32(5,e,-1)}},{key:"addScale",value:function(t,e){t.addFieldInt32(6,e,-1)}},{key:"addNullable",value:function(t,e){t.addFieldInt8(7,+e,1)}},{key:"addUnique",value:function(t,e){t.addFieldInt8(8,+e,0)}},{key:"addPrimaryKey",value:function(t,e){t.addFieldInt8(9,+e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"endColumn",value:function(t){var e=t.endObject();return t.requiredField(e,4),e}},{key:"createColumn",value:function(e,n,r,i,o,s,a,u,c,f,l,h){return t.startColumn(e),t.addName(e,n),t.addType(e,r),t.addTitle(e,i),t.addDescription(e,o),t.addWidth(e,s),t.addPrecision(e,a),t.addScale(e,u),t.addNullable(e,c),t.addUnique(e,f),t.addPrimaryKey(e,l),t.addMetadata(e,h),t.endColumn(e)}}]),t}(),G=function(){function t(){h(this,t),this.bb=null,this.bb_pos=0}return b(t,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"org",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"code",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"wkt",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"codeString",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}}],[{key:"getRootAsCrs",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsCrs",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startCrs",value:function(t){t.startObject(6)}},{key:"addOrg",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addCode",value:function(t,e){t.addFieldInt32(1,e,0)}},{key:"addName",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWkt",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"addCodeString",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"endCrs",value:function(t){return t.endObject()}},{key:"createCrs",value:function(e,n,r,i,o,s,a){return t.startCrs(e),t.addOrg(e,n),t.addCode(e,r),t.addName(e,i),t.addDescription(e,o),t.addWkt(e,s),t.addCodeString(e,a),t.endCrs(e)}}]),t}();!function(t){t[t.Unknown=0]="Unknown",t[t.Point=1]="Point",t[t.LineString=2]="LineString",t[t.Polygon=3]="Polygon",t[t.MultiPoint=4]="MultiPoint",t[t.MultiLineString=5]="MultiLineString",t[t.MultiPolygon=6]="MultiPolygon",t[t.GeometryCollection=7]="GeometryCollection",t[t.CircularString=8]="CircularString",t[t.CompoundCurve=9]="CompoundCurve",t[t.CurvePolygon=10]="CurvePolygon",t[t.MultiCurve=11]="MultiCurve",t[t.MultiSurface=12]="MultiSurface",t[t.Curve=13]="Curve",t[t.Surface=14]="Surface",t[t.PolyhedralSurface=15]="PolyhedralSurface",t[t.TIN=16]="TIN",t[t.Triangle=17]="Triangle"}(U||(U={}));var q=function(){function t(){h(this,t),this.bb=null,this.bb_pos=0}return b(t,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"envelope",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"envelopeLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"envelopeArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"geometryType",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):U.Unknown}},{key:"hasZ",value:function(){var t=this.bb.__offset(this.bb_pos,10);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasM",value:function(){var t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasT",value:function(){var t=this.bb.__offset(this.bb_pos,14);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasTm",value:function(){var t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"columns",value:function(t,e){var n=this.bb.__offset(this.bb_pos,18);return n?(e||new B).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"featuresCount",value:function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint64(this.bb_pos+t):this.bb.createLong(0,0)}},{key:"indexNodeSize",value:function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):16}},{key:"crs",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?(t||new G).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,30);return e?this.bb.__string(this.bb_pos+e,t):null}}],[{key:"getRootAsHeader",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsHeader",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startHeader",value:function(t){t.startObject(14)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addEnvelope",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createEnvelopeVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startEnvelopeVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addGeometryType",value:function(t,e){t.addFieldInt8(2,e,U.Unknown)}},{key:"addHasZ",value:function(t,e){t.addFieldInt8(3,+e,0)}},{key:"addHasM",value:function(t,e){t.addFieldInt8(4,+e,0)}},{key:"addHasT",value:function(t,e){t.addFieldInt8(5,+e,0)}},{key:"addHasTm",value:function(t,e){t.addFieldInt8(6,+e,0)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addFeaturesCount",value:function(t,e){t.addFieldInt64(8,e,t.createLong(0,0))}},{key:"addIndexNodeSize",value:function(t,e){t.addFieldInt16(9,e,16)}},{key:"addCrs",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(11,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(12,e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(13,e,0)}},{key:"endHeader",value:function(t){return t.endObject()}},{key:"finishHeaderBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedHeaderBuffer",value:function(t,e){t.finish(e,void 0,!0)}}]),t}(),D=function(){function t(){h(this,t),this.bb=null,this.bb_pos=0}return b(t,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"ends",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}},{key:"endsLength",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"endsArray",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"xy",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"xyLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"xyArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"z",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"zLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"zArray",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"m",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"mLength",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"mArray",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"t",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"tLength",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"tArray",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"tm",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}},{key:"tmLength",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"type",value:function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):U.Unknown}},{key:"parts",value:function(e,n){var r=this.bb.__offset(this.bb_pos,18);return r?(n||new t).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}},{key:"partsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}}],[{key:"getRootAsGeometry",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsGeometry",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startGeometry",value:function(t){t.startObject(8)}},{key:"addEnds",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"createEndsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}},{key:"startEndsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addXy",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createXyVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startXyVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addZ",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createZVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startZVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addM",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"createMVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startMVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addT",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"createTVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startTVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addTm",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"createTmVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}},{key:"startTmVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addType",value:function(t,e){t.addFieldInt8(6,e,U.Unknown)}},{key:"addParts",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createPartsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}},{key:"startPartsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endGeometry",value:function(t){return t.endObject()}},{key:"createGeometry",value:function(e,n,r,i,o,s,a,u,c){return t.startGeometry(e),t.addEnds(e,n),t.addXy(e,r),t.addZ(e,i),t.addM(e,o),t.addT(e,s),t.addTm(e,a),t.addType(e,u),t.addParts(e,c),t.endGeometry(e)}}]),t}(),z=function(){function t(){h(this,t),this.bb=null,this.bb_pos=0}return b(t,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"geometry",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?(t||new D).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"properties",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}},{key:"propertiesLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"propertiesArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"columns",value:function(t,e){var n=this.bb.__offset(this.bb_pos,8);return n?(e||new B).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}}],[{key:"getRootAsFeature",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsFeature",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startFeature",value:function(t){t.startObject(3)}},{key:"addGeometry",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addProperties",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createPropertiesVector",value:function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()}},{key:"startPropertiesVector",value:function(t,e){t.startVector(1,e,1)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endFeature",value:function(t){return t.endObject()}},{key:"finishFeatureBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedFeatureBuffer",value:function(t,e){t.finish(e,void 0,!0)}},{key:"createFeature",value:function(e,n,r,i){return t.startFeature(e),t.addGeometry(e,n),t.addProperties(e,r),t.addColumns(e,i),t.endFeature(e)}}]),t}(),X=b((function t(e,n,r,i,o,s){h(this,t),this.org=e,this.code=n,this.name=r,this.description=i,this.wkt=o,this.code_string=s})),Y=function(){function t(e,n,r,i,o,s,a,u){h(this,t),this.geometryType=e,this.columns=n,this.featuresCount=r,this.indexNodeSize=i,this.crs=o,this.title=s,this.description=a,this.metadata=u}return b(t,null,[{key:"fromByteBuffer",value:function(e){for(var n=q.getRootAsHeader(e),r=n.featuresCount().toFloat64(),i=n.indexNodeSize(),o=[],s=0;s<n.columnsLength();s++){var a=n.columns(s);if(!a)throw new Error("Column unexpectedly missing");if(!a.name())throw new Error("Column name unexpectedly missing");o.push(new N(a.name(),a.type(),a.title(),a.description(),a.width(),a.precision(),a.scale(),a.nullable(),a.unique(),a.primaryKey()))}var u=n.crs(),c=u?new X(u.org(),u.code(),u.name(),u.description(),u.wkt(),u.codeString()):null;return new t(n.geometryType(),o,r,i,c,n.title(),n.description(),n.metadata())}}]),t}();function W(t){return t?U[t]:U.Unknown}var H=new TextEncoder,Z=new TextDecoder;function K(t,e,n){var r=n.columns,i=new A,o=0,s=1024,a=new Uint8Array(s),u=new DataView(a.buffer),c=function(t){if(!(o+t<s)){s*=2;var e=new Uint8Array(s);e.set(a),a=e,u=new DataView(a.buffer,o)}};if(r)for(var f=0;f<r.length;f++){var l=r[f],h=e[l.name];if(null!==h)switch(u.setUint16(o,f,!0),o+=2,l.type){case R.Bool:c(1),u.setUint8(o,h),o+=1;break;case R.Short:c(2),u.setInt16(o,h,!0),o+=2;break;case R.UShort:c(2),u.setUint16(o,h,!0),o+=2;break;case R.Int:c(4),u.setInt32(o,h,!0),o+=4;break;case R.UInt:c(4),u.setUint32(o,h,!0),o+=4;break;case R.Long:c(8),u.setBigInt64(o,BigInt(h),!0),o+=8;break;case R.Double:c(8),u.setFloat64(o,h,!0),o+=8;break;case R.DateTime:case R.String:var d=H.encode(h);c(4),u.setUint32(o,d.length,!0),o+=4,c(d.length),a.set(d,o),o+=d.length;break;default:throw new Error("Unknown type "+l.type)}}var b=null;o>0&&(b=z.createPropertiesVector(i,a.slice(0,o)));var p=function t(e,n){var r=n.xy,i=n.z,o=n.ends,s=n.parts,a=n.type;if(s){var u=s.map((function(n){return t(e,n)})),c=D.createPartsVector(e,u);return D.startGeometry(e),D.addParts(e,c),D.addType(e,a),D.endGeometry(e)}var f,l,h=D.createXyVector(e,r);return i&&(f=D.createZVector(e,i)),o&&(l=D.createEndsVector(e,o)),D.startGeometry(e),l&&D.addEnds(e,l),D.addXy(e,h),f&&D.addZ(e,f),D.addType(e,a),D.endGeometry(e)}(i,t);z.startFeature(i),z.addGeometry(i,p),b&&z.addProperties(i,b);var v=z.endFeature(i);return i.finishSizePrefixed(v),i.asUint8Array()}var J=function(t,e){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function $(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Q(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function tt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function et(t){return this instanceof et?(this.v=t,this):new et(t)}function nt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=i[t](e)).value instanceof et?Promise.resolve(n.value.v).then(u,c):f(o[0][2],n)}catch(t){f(o[0][3],t)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function f(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}var rt=function(t){function e(e){var n=t.call(this,e)||this;return Object.defineProperty(n,"name",{value:"RepeaterOverflowError",enumerable:!1}),"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(n,n.constructor.prototype):n.__proto__=n.constructor.prototype,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(n,n.constructor),n}return function(t,e){function n(){this.constructor=t}J(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error);function it(t){null!=t&&"function"==typeof t.then&&t.then(ot,ot)}!function(){function t(t){if(t<0)throw new RangeError("Capacity may not be less than 0");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),t.prototype.add=function(t){if(this.full)throw new Error("Buffer full");this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){for(;this._q.length>=this._c;)this._q.shift();this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){this._q.length<this._c&&this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}();var ot=function(){};function st(t){var e=t.err,n=Promise.resolve(t.execution).then((function(t){if(null!=e)throw e;return t}));return t.err=void 0,t.execution=n.then((function(){}),(function(){})),void 0===t.pending?n:t.pending.then((function(){return n}))}function at(t,e){var n=t.state>=3;return Promise.resolve(e).then((function(e){return!n&&t.state>=4?st(t).then((function(t){return{value:t,done:!0}})):{value:e,done:n}}))}function ut(t,e){var n,r;if(!(t.state>=2))if(t.state=2,t.onnext(),t.onstop(),null==t.err&&(t.err=e),0!==t.pushes.length||void 0!==t.buffer&&!t.buffer.empty)try{for(var i=tt(t.pushes),o=i.next();!o.done;o=i.next())o.value.resolve()}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}else ct(t)}function ct(t){var e,n;if(!(t.state>=3)){t.state<2&&ut(t),t.state=3,t.buffer=void 0;try{for(var r=tt(t.nexts),i=r.next();!i.done;i=r.next()){var o=i.value,s=void 0===t.pending?st(t):t.pending.then((function(){return st(t)}));o.resolve(at(t,s))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}t.pushes=[],t.nexts=[]}}function ft(t){t.state>=4||(t.state<3&&ct(t),t.state=4)}function lt(t,e){if(it(e),t.pushes.length>=1024)throw new rt("No more than 1024 pending calls to push are allowed on a single repeater.");if(t.state>=2)return Promise.resolve(void 0);var n,r=void 0===t.pending?Promise.resolve(e):t.pending.then((function(){return e}));r=r.catch((function(e){t.state<2&&(t.err=e),ft(t)})),t.nexts.length?(t.nexts.shift().resolve(at(t,r)),n=t.nexts.length?Promise.resolve(t.nexts[0].value):new Promise((function(e){return t.onnext=e}))):void 0===t.buffer||t.buffer.full?n=new Promise((function(e){return t.pushes.push({resolve:e,value:r})})):(t.buffer.add(r),n=Promise.resolve(void 0));var i=!0,o={},s=n.catch((function(t){if(i)throw t}));return o.then=function(t,e){return i=!1,Promise.prototype.then.call(n,t,e)},o.catch=function(t){return i=!1,Promise.prototype.catch.call(n,t)},o.finally=n.finally.bind(n),t.pending=r.then((function(){return s})).catch((function(e){t.err=e,ft(t)})),o}function ht(t){if(!(t.state>=1)){t.state=1;var e=lt.bind(null,t),n=function(t){var e=ut.bind(null,t),n=new Promise((function(e){return t.onstop=e}));return e.then=n.then.bind(n),e.catch=n.catch.bind(n),e.finally=n.finally.bind(n),e}(t);t.execution=new Promise((function(r){return r(t.executor(e,n))})),t.execution.catch((function(){return ut(t)}))}}var dt,bt=new WeakMap,pt=function(){function t(t,e){bt.set(this,{executor:t,buffer:e,err:void 0,state:0,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:ot,onstop:ot})}return t.prototype.next=function(t){it(t);var e=bt.get(this);if(void 0===e)throw new Error("WeakMap error");if(e.nexts.length>=1024)throw new rt("No more than 1024 pending calls to next are allowed on a single repeater.");if(e.state<=0&&ht(e),e.onnext(t),void 0!==e.buffer&&!e.buffer.empty){var n=at(e,e.buffer.remove());if(e.pushes.length){var r=e.pushes.shift();e.buffer.add(r.value),e.onnext=r.resolve}return n}if(e.pushes.length){var i=e.pushes.shift();return e.onnext=i.resolve,at(e,i.value)}return e.state>=2?(ct(e),at(e,st(e))):new Promise((function(n){return e.nexts.push({resolve:n,value:t})}))},t.prototype.return=function(t){it(t);var e=bt.get(this);if(void 0===e)throw new Error("WeakMap error");return ct(e),e.execution=Promise.resolve(e.execution).then((function(){return t})),at(e,st(e))},t.prototype.throw=function(t){var e=bt.get(this);if(void 0===e)throw new Error("WeakMap error");return e.state<=0||e.state>=2||void 0!==e.buffer&&!e.buffer.empty?(ct(e),null==e.err&&(e.err=t),at(e,st(e))):this.next(Promise.reject(t))},t.prototype[Symbol.asyncIterator]=function(){return this},t.race=yt,t.merge=_t,t.zip=gt,t.latest=mt,t}();function vt(t,e){var n,r,i=[],o=function(t){null!=t&&"function"==typeof t[Symbol.asyncIterator]?i.push(t[Symbol.asyncIterator]()):null!=t&&"function"==typeof t[Symbol.iterator]?i.push(t[Symbol.iterator]()):i.push(function(){return nt(this,arguments,(function(){return Q(this,(function(n){switch(n.label){case 0:return e.yieldValues?[4,et(t)]:[3,3];case 1:return[4,n.sent()];case 2:n.sent(),n.label=3;case 3:return e.returnValues?[4,et(t)]:[3,5];case 4:return[2,n.sent()];case 5:return[2]}}))}))}())};try{for(var s=tt(t),a=s.next();!a.done;a=s.next())o(a.value)}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function yt(t){var e=this,n=vt(t,{returnValues:!0});return new pt((function(t,r){return $(e,void 0,void 0,(function(){var e,i,o,s,a,u;return Q(this,(function(c){switch(c.label){case 0:if(!n.length)return r(),[2];i=!1,r.then((function(){e(),i=!0})),c.label=1;case 1:c.trys.push([1,,5,7]),s=void 0,a=0,u=function(){var i,u,c,f,l,h;return Q(this,(function(d){switch(d.label){case 0:i=a;try{for(l=void 0,u=tt(n),c=u.next();!c.done;c=u.next())f=c.value,Promise.resolve(f.next()).then((function(t){t.done?(r(),void 0===o&&(o=t)):a===i&&(a++,e(t))}),(function(t){return r(t)}))}catch(t){l={error:t}}finally{try{c&&!c.done&&(h=u.return)&&h.call(u)}finally{if(l)throw l.error}}return[4,new Promise((function(t){return e=t}))];case 1:return void 0===(s=d.sent())?[3,3]:[4,t(s.value)];case 2:d.sent(),d.label=3;case 3:return[2]}}))},c.label=2;case 2:return i?[3,4]:[5,u()];case 3:return c.sent(),[3,2];case 4:return[2,o&&o.value];case 5:return r(),[4,Promise.race(n.map((function(t){return t.return&&t.return()})))];case 6:return c.sent(),[7];case 7:return[2]}}))}))}))}function _t(t){var e=this,n=vt(t,{yieldValues:!0});return new pt((function(t,r){return $(e,void 0,void 0,(function(){var e,i,o,s=this;return Q(this,(function(a){switch(a.label){case 0:if(!n.length)return r(),[2];e=[],i=!1,r.then((function(){var t,n;i=!0;try{for(var r=tt(e),o=r.next();!o.done;o=r.next())(0,o.value)()}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}})),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,Promise.all(n.map((function(n,a){return $(s,void 0,void 0,(function(){var s;return Q(this,(function(u){switch(u.label){case 0:u.trys.push([0,,6,9]),u.label=1;case 1:return i?[3,5]:(Promise.resolve(n.next()).then((function(t){return e[a](t)}),(function(t){return r(t)})),[4,new Promise((function(t){e[a]=t}))]);case 2:return void 0===(s=u.sent())?[3,4]:s.done?(o=s,[2]):[4,t(s.value)];case 3:u.sent(),u.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return n.return?[4,n.return()]:[3,8];case 7:u.sent(),u.label=8;case 8:return[7];case 9:return[2]}}))}))})))];case 2:return a.sent(),[2,o&&o.value];case 3:return r(),[7];case 4:return[2]}}))}))}))}function gt(t){var e=this,n=vt(t,{returnValues:!0});return new pt((function(t,r){return $(e,void 0,void 0,(function(){var e,i,o,s;return Q(this,(function(a){switch(a.label){case 0:if(!n.length)return r(),[2,[]];i=!1,r.then((function(){e(),i=!0})),a.label=1;case 1:a.trys.push([1,,6,8]),a.label=2;case 2:return i?[3,5]:(Promise.all(n.map((function(t){return t.next()}))).then((function(t){return e(t)}),(function(t){return r(t)})),[4,new Promise((function(t){return e=t}))]);case 3:return void 0===(o=a.sent())?[2]:(s=o.map((function(t){return t.value})),o.some((function(t){return t.done}))?[2,s]:[4,t(s)]);case 4:return a.sent(),[3,2];case 5:return[3,8];case 6:return r(),[4,Promise.all(n.map((function(t){return t.return&&t.return()})))];case 7:return a.sent(),[7];case 8:return[2]}}))}))}))}function mt(t){var e=this,n=vt(t,{yieldValues:!0,returnValues:!0});return new pt((function(t,r){return $(e,void 0,void 0,(function(){var e,i,o,s,a,u=this;return Q(this,(function(c){switch(c.label){case 0:if(!n.length)return r(),[2,[]];i=[],o=!1,r.then((function(){var t,n;e();try{for(var r=tt(i),s=r.next();!s.done;s=r.next())(0,s.value)()}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}o=!0})),c.label=1;case 1:return c.trys.push([1,,5,7]),Promise.all(n.map((function(t){return t.next()}))).then((function(t){return e(t)}),(function(t){return r(t)})),[4,new Promise((function(t){return e=t}))];case 2:return void 0===(s=c.sent())?[2]:(a=s.map((function(t){return t.value})),s.every((function(t){return t.done}))?[2,a]:[4,t(a.slice())]);case 3:return c.sent(),[4,Promise.all(n.map((function(e,n){return $(u,void 0,void 0,(function(){var u;return Q(this,(function(c){switch(c.label){case 0:if(s[n].done)return[2,s[n].value];c.label=1;case 1:return o?[3,4]:(Promise.resolve(e.next()).then((function(t){return i[n](t)}),(function(t){return r(t)})),[4,new Promise((function(t){return i[n]=t}))]);case 2:return void 0===(u=c.sent())?[2,s[n].value]:u.done?[2,u.value]:(a[n]=u.value,[4,t(a.slice())]);case 3:return c.sent(),[3,1];case 4:return[2]}}))}))})))];case 4:return[2,c.sent()];case 5:return r(),[4,Promise.all(n.map((function(t){return t.return&&t.return()})))];case 6:return c.sent(),[7];case 7:return[2]}}))}))}))}var wt=function(){function t(){h(this,t),this._extraRequestThreshold=262144}return b(t,[{key:"extraRequestThreshold",value:function(){return this._extraRequestThreshold}},{key:"setExtraRequestThreshold",value:function(t){if(t<0)throw new Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=t}}]),t}();wt.global=new wt,function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error"}(dt||(dt={}));var kt=function(){function t(){h(this,t)}return b(t,null,[{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log.apply(this,[dt.Debug].concat(e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log.apply(this,[dt.Info].concat(e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log.apply(this,[dt.Warn].concat(e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log.apply(this,[dt.Error].concat(e))}},{key:"log",value:function(t){var e,n,r,i;if(!(this.logLevel>t)){for(var o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];switch(t){case dt.Debug:(e=console).debug.apply(e,s);break;case dt.Info:(n=console).info.apply(n,s);break;case dt.Warn:(r=console).warn.apply(r,s);break;case dt.Error:(i=console).error.apply(i,s)}}}}]),t}();function xt(t,e){e=Math.min(Math.max(+e,2),65535);var n=t,r=n;do{r+=n=Math.ceil(n/e)}while(1!==n);return 40*r}function Ot(t,e,n,r){return It.apply(this,arguments)}function It(){return(It=m(regeneratorRuntime.mark((function t(e,n,r,i){var o,s,a,u,f,l,d,p,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=function(){function t(e,n){h(this,t),this._level=n,this.nodes=e}return b(t,[{key:"level",value:function(){return this._level}},{key:"startNode",value:function(){return this.nodes[0]}},{key:"endNode",value:function(){return this.nodes[1]}},{key:"extendEndNodeToNewOffset",value:function(t){console.assert(t>this.nodes[1]),this.nodes[1]=t}},{key:"toString",value:function(){return"[NodeRange level: ".concat(this._level,", nodes: ").concat(this.nodes[0],"-").concat(this.nodes[1],"]")}}]),t}(),s=r.minX,a=r.minY,u=r.maxX,f=r.maxY,kt.info("tree items: ".concat(e,", nodeSize: ").concat(n)),l=function(t,e){if(e<2)throw new Error("Node size must be at least 2");if(0===t)throw new Error("Number of items must be greater than 0");var n=t,r=n,i=[n];do{r+=n=Math.ceil(n/e),i.push(n)}while(1!==n);var o=[];n=r;for(var s=0,a=i;s<a.length;s++){var u=a[s];o.push(n-u),n-=u}o.reverse(),i.reverse();for(var c=[],f=0;f<i.length;f++)c.push([o[f],o[f]+i[f]]);return c.reverse(),c}(e,n),d=l[0][0],p=[function(){var t=l.length-1;return new o([0,1],t)}()],v=regeneratorRuntime.mark((function t(){var r,h,b,v,y,_,m,w,k,x,O,I;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=p.shift(),kt.debug("popped node: ".concat(r,", queueLength: ").concat(p.length)),h=r.startNode(),b=h>=d,v=c(l[r.level()],2),y=v[1],_=Math.min(r.endNode()+n,y),m=_-h,t.next=10,g(i(40*h,40*m));case 10:w=t.sent,k=new Float64Array(w),x=new Uint32Array(w),O=regeneratorRuntime.mark((function t(n){var i,c,l,v,y,_,g;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(u<k[(i=5*(n-h))+0])){t.next=3;break}return t.abrupt("return","continue");case 3:if(!(f<k[i+1])){t.next=5;break}return t.abrupt("return","continue");case 5:if(!(s>k[i+2])){t.next=7;break}return t.abrupt("return","continue");case 7:if(!(a>k[i+3])){t.next=9;break}return t.abrupt("return","continue");case 9:if(c=x[8+(i<<1)],l=Ct(x[9+(i<<1)],c),!b){t.next=15;break}return v=function(){if(n<e-1){var t=5*(n-h+1),r=x[8+(t<<1)];return Ct(x[9+(t<<1)],r)-l}return null}(),t.next=14,[l,n-d,v];case 14:return t.abrupt("return","continue");case 15:if(y=wt.global.extraRequestThreshold()/40,!(void 0!==(_=p[p.length-1])&&_.level()==r.level()-1&&l<_.endNode()+y)){t.next=19;break}return kt.debug('Merging "nodeRange" request into existing range: '.concat(_,", newOffset: ").concat(_.endNode()," -> ").concat(l)),_.extendEndNodeToNewOffset(l),t.abrupt("return","continue");case 19:g=function(){var t=r.level()-1;return new o([l,l+1],t)}(),void 0!==_&&_.level()==g.level()?kt.info("Same level, but too far away. Pushing new request at offset: ".concat(l," rather than merging with distant ").concat(_)):kt.info("Pushing new level for ".concat(g," onto queue with nearestNodeRange: ").concat(_," since there's not already a range for this level.")),p.push(g);case 21:case"end":return t.stop()}}),t)})),I=h;case 15:if(!(I<_)){t.next=23;break}return t.delegateYield(O(I),"t0",17);case 17:if("continue"!==t.t0){t.next=20;break}return t.abrupt("continue",20);case 20:I++,t.next=15;break;case 23:case"end":return t.stop()}}),t)})),kt.debug("starting stream search with queue: ".concat(p,", numItems: ").concat(e,", nodeSize: ").concat(n,", levelBounds: ").concat(l));case 6:if(0==p.length){t.next=10;break}return t.delegateYield(v(),"t0",8);case 8:t.next=6;break;case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ct(t,e){if(0!=(4293918720&t))throw Error("integer is too large to be safely represented");return e+t*Math.pow(2,32)}kt.logLevel=dt.Info;var Pt=new Uint8Array([102,103,98,3,102,103,98,0]),Ft=function(){function t(e,n,r,i){h(this,t),this.headerClient=e,this.header=n,this.headerLength=r,this.indexLength=i}var e,n;return b(t,[{key:"selectBbox",value:function(t){var e=this;return m(regeneratorRuntime.mark((function n(){var r,i,o,s,a,f,l,h,d,b,p,_,m,w,k,x,O,I;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.lengthBeforeTree(),i=e.headerClient,o=function(){var t=u(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i.getRange(r+e,n,0,"index"));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),s=[],a=[],f=!1,l=!1,n.prev=4,d=y(Ot(e.header.featuresCount,e.header.indexNodeSize,t,o));case 6:return n.next=8,g(d.next());case 8:if(!(f=!(b=n.sent).done)){n.next=21;break}if(p=b.value,_=c(p,2),m=_[0],w=c(p,3),(k=w[2])||(kt.info("final feature"),k=wt.global.extraRequestThreshold()),0!=a.length){n.next=16;break}return a.push([m,k]),n.abrupt("continue",18);case 16:x=a[a.length-1],(O=m-(x[0]+x[1]))>wt.global.extraRequestThreshold()&&(kt.info("Pushing new feature batch, since gap ".concat(O," was too large")),s.push(a),a=[]),a.push([m,k]);case 18:f=!1,n.next=6;break;case 21:n.next=27;break;case 23:n.prev=23,n.t0=n.catch(4),l=!0,h=n.t0;case 27:if(n.prev=27,n.prev=28,!f||null==d.return){n.next=32;break}return n.next=32,g(d.return());case 32:if(n.prev=32,!l){n.next=35;break}throw h;case 35:return n.finish(32);case 36:return n.finish(27);case 37:return e.headerClient.logUsage("header+index"),a.length>0&&s.push(a),I=s.flatMap((function(t){return e.readFeatureBatch(t)})),n.delegateYield(v(y(pt.merge(I)),g),"t1",40);case 40:case"end":return n.stop()}}),n,null,[[4,23,27,37],[28,,32,36]])})))()}},{key:"lengthBeforeTree",value:function(){return Pt.length+4+this.headerLength}},{key:"lengthBeforeFeatures",value:function(){return this.lengthBeforeTree()+this.indexLength}},{key:"buildFeatureClient",value:function(){return new St(this.headerClient.httpClient)}},{key:"readFeatureBatch",value:function(t){var e=this;return m(regeneratorRuntime.mark((function n(){var r,i,o,a,u,f,l,h,d,b,p;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=c(t[0],1),i=r[0],o=c(t[t.length-1],2),a=o[0],u=o[1],f=a+u-i,l=e.buildFeatureClient(),h=s(t),n.prev=2,h.s();case 4:if((d=h.n()).done){n.next=12;break}return b=c(d.value,1),p=b[0],n.next=8,g(e.readFeature(l,p,f));case 8:return n.next=10,n.sent;case 10:n.next=4;break;case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(2),h.e(n.t0);case 17:return n.prev=17,h.f(),n.finish(17);case 20:l.logUsage("feature");case 21:case"end":return n.stop()}}),n,null,[[2,14,17,20]])})))()}},{key:"readFeature",value:(n=u(regeneratorRuntime.mark((function t(e,n,r){var i,o,s,a,u,c,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n+this.lengthBeforeFeatures(),t.next=3,e.getRange(i,4,r,"feature length");case 3:return s=t.sent,o=new DataView(s).getUint32(0,!0),t.next=7,e.getRange(i+4,o,r,"feature data");case 7:return a=t.sent,u=new Uint8Array(a),(c=new Uint8Array(o+4)).set(u,4),f=new T(c),t.abrupt("return",(f.setPosition(4),z.getRootAsFeature(f)));case 13:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return n.apply(this,arguments)})}],[{key:"open",value:(e=u(regeneratorRuntime.mark((function e(n){var r,i,o,s,a,u,c,f,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new St(n),i=function(){var t,e=0;for(t=0;t<3;t++)e+=40*Math.pow(16,t);return e}(),o=2024+i,kt.debug("fetching header. minReqLength: ".concat(o," (assumedHeaderLength: 2024, assumedIndexLength: ").concat(i,")")),e.t0=Uint8Array,e.next=5,r.getRange(0,8,o,"header");case 5:if(e.t1=e.sent,(s=new e.t0(e.t1)).subarray(0,3).every((function(t,e){return Pt[e]===t}))){e.next=9;break}throw kt.error("bytes: ".concat(s," != ").concat(Pt)),new Error("Not a FlatGeobuf file");case 9:return kt.debug("magic bytes look good"),e.next=12,r.getRange(8,4,o,"header");case 12:if(u=e.sent,!((a=new DataView(u).getUint32(0,!0))>10485760||a<8)){e.next=16;break}throw new Error("Invalid header size");case 16:return kt.debug("headerLength: ".concat(a)),e.next=19,r.getRange(12,a,o,"header");case 19:return c=e.sent,f=new T(new Uint8Array(c)),l=Y.fromByteBuffer(f),h=xt(l.featuresCount,l.indexNodeSize),e.abrupt("return",(kt.debug("completed: opening http reader"),new t(r,l,a,h)));case 24:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})}]),t}(),St=function(){function t(e){h(this,t),this.bytesEverUsed=0,this.bytesEverFetched=0,this.buffer=new ArrayBuffer(0),this.head=0,this.httpClient="string"==typeof e?new Et(e):e}var e;return b(t,[{key:"getRange",value:(e=u(regeneratorRuntime.mark((function t(e,n,r,i){var o,s,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.bytesEverUsed+=n,o=e-this.head,s=o+n,!(o>=0&&s<=this.buffer.byteLength)){t.next=4;break}return t.abrupt("return",this.buffer.slice(o,s));case 4:return a=Math.max(n,r),this.bytesEverFetched+=a,kt.debug("requesting for new Range: ".concat(e,"-").concat(e+n-1)),t.next=9,this.httpClient.getRange(e,a,i);case 9:return this.buffer=t.sent,this.head=e,t.abrupt("return",this.buffer.slice(0,n));case 12:case"end":return t.stop()}}),t,this)}))),function(t,n,r,i){return e.apply(this,arguments)})},{key:"logUsage",value:function(t){var e=t.split(" ")[0],n=this.bytesEverUsed,r=this.bytesEverFetched,i=(100*n/r).toFixed(2);kt.info("".concat(e," bytes used/requested: ").concat(n," / ").concat(r," = ").concat(i,"%"))}}]),t}(),Et=function(){function t(e){h(this,t),this.requestsEverMade=0,this.bytesEverRequested=0,this.url=e}var e;return b(t,[{key:"getRange",value:(e=u(regeneratorRuntime.mark((function t(e,n,r){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.requestsEverMade+=1,this.bytesEverRequested+=n,i="bytes=".concat(e,"-").concat(e+n-1),kt.info("request: #".concat(this.requestsEverMade,", purpose: ").concat(r,"), bytes: (this_request: ").concat(n,", ever: ").concat(this.bytesEverRequested,"), Range: ").concat(i)),t.next=5,fetch(this.url,{headers:{Range:i}});case 5:return t.abrupt("return",t.sent.arrayBuffer());case 6:case"end":return t.stop()}}),t,this)}))),function(t,n,r){return e.apply(this,arguments)})}]),t}();function jt(t){var e=function(t){var e=t[0],n=e.getProperties?e.getProperties():{},r=null;n&&(r=Object.keys(n).filter((function(t){return"geometry"!==t})).map((function(t){return new N(t,function(t){if("boolean"==typeof t)return R.Bool;if("number"==typeof t)return t%1==0?R.Int:R.Double;if("string"==typeof t)return R.String;if(null===t)return R.String;throw new Error("Unknown type (value '".concat(t,"')"))}(n[t]),null,null,-1,-1,-1,!0,!1,!1)})));var i=function(t){var e,n,r,i=s(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(e===U.Unknown)break;var a=(r=o).getGeometry?W(r.getGeometry().getType()):W(r.geometry.type);void 0===e?e=a:e!==a&&(e=U.Unknown)}}catch(t){i.e(t)}finally{i.f()}if(void 0===e)throw new Error("Could not infer geometry type for collection of features.");return e}(t);return new Y(i,r,t.length,0,null,null,null,null)}(t),n=function(t){var e=new A,n=null;t.columns&&(n=q.createColumnsVector(e,t.columns.map((function(t){return function(t,e){var n=t.createString(e.name);return B.startColumn(t),B.addName(t,n),B.addType(t,e.type),B.endColumn(t)}(e,t)}))));var r=e.createString("L1");q.startHeader(e),q.addFeaturesCount(e,new j(t.featuresCount,0)),q.addGeometryType(e,t.geometryType),q.addIndexNodeSize(e,0),n&&q.addColumns(e,n),q.addName(e,r);var i=q.endHeader(e);return e.finishSizePrefixed(i),e.asUint8Array()}(e),r=t.map((function(t){if(!t.getGeometry)throw new Error("Missing getGeometry implementation");if(!t.getProperties)throw new Error("Missing getProperties implementation");return K(function t(e,n){var r,i,o,s=n;if(s===U.Unknown&&(s=W(e.getType())),s===U.MultiLineString){e.getFlatCoordinates&&(r=e.getFlatCoordinates());var a=e.getEnds();a.length>1&&(i=a.map((function(t){return t>>1})))}else if(s===U.Polygon){e.getFlatCoordinates&&(r=e.getFlatCoordinates());var u=e.getEnds();u.length>1&&(i=u.map((function(t){return t>>1})))}else s===U.MultiPolygon?o=e.getPolygons().map((function(e){return t(e,U.Polygon)})):e.getFlatCoordinates&&(r=e.getFlatCoordinates());return{xy:r,ends:i,type:s,parts:o}}(t.getGeometry(),e.geometryType),t.getProperties(),e)})),i=r.map((function(t){return t.length})).reduce((function(t,e){return t+e})),o=new Uint8Array(Pt.length+n.length+i);o.set(n,Pt.length);var a,u=Pt.length+n.length,c=s(r);try{for(c.s();!(a=c.n()).done;){var f=a.value;o.set(f,u),u+=f.length}}catch(t){c.e(t)}finally{c.f()}return o.set(Pt),o}function Rt(){return(Rt=m(regeneratorRuntime.mark((function t(e,n,r){var i,o,s,a,c,f,l,h,d,b,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="function"==typeof(o=e).slice?o:new L("function"==typeof o.read?o:o.getReader()),s=function(){var t=u(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.slice(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.t0=Uint8Array,t.next=5,g(s(8));case 5:if(t.t1=t.sent,(a=new t.t0(t.t1)).subarray(0,3).every((function(t,e){return Pt[e]===t}))){t.next=9;break}throw new Error("Not a FlatGeobuf file");case 9:return t.t2=Uint8Array,t.next=12,g(s(4));case 12:return t.t3=t.sent,a=new t.t2(t.t3),c=new T(a),f=c.readUint32(0),t.t4=Uint8Array,t.next=19,g(s(f));case 19:if(t.t5=t.sent,a=new t.t4(t.t5),c=new T(a),l=Y.fromByteBuffer(c),r&&r(l),h=l.indexNodeSize,d=l.featuresCount,!(h>0)){t.next=29;break}return b=xt(d,h),t.next=29,g(s(b));case 29:return t.next=31,g(Ut(s,l,n));case 31:if(!(p=t.sent)){t.next=36;break}return t.next=34,p;case 34:t.next=29;break;case 36:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ut(t,e,n){return Tt.apply(this,arguments)}function Tt(){return(Tt=u(regeneratorRuntime.mark((function t(e,n,r){var i,o,s,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,e(4,"feature length");case 3:if(t.t1=t.sent,0!==(i=new t.t0(t.t1)).byteLength){t.next=7;break}return t.abrupt("return");case 7:return o=new T(i),s=o.readUint32(0),t.t2=Uint8Array,t.next=12,e(s,"feature data");case 12:return t.t3=t.sent,i=new t.t2(t.t3),(a=new Uint8Array(s+4)).set(i,4),(o=new T(a)).setPosition(4),t.abrupt("return",r(z.getRootAsFeature(o),n));case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function At(t,e){return function(t,e,n,r){var i=e.columns,o=n(t.geometry(),e.geometryType),s=function(t,e){var n={};if(!e||0===e.length)return n;var r=t.propertiesArray();if(!r)return n;for(var i=new DataView(r.buffer,r.byteOffset),o=t.propertiesLength(),s=0;s<o;){var a=i.getUint16(s,!0);s+=2;var u=e[a],c=u.name;switch(u.type){case R.Bool:n[c]=!!i.getUint8(s),s+=1;break;case R.Byte:n[c]=i.getInt8(s),s+=1;break;case R.UByte:n[c]=i.getUint8(s),s+=1;break;case R.Short:n[c]=i.getInt16(s,!0),s+=2;break;case R.UShort:n[c]=i.getUint16(s,!0),s+=2;break;case R.Int:n[c]=i.getInt32(s,!0),s+=4;break;case R.UInt:n[c]=i.getUint32(s,!0),s+=4;break;case R.Long:n[c]=Number(i.getBigInt64(s,!0)),s+=8;break;case R.ULong:n[c]=Number(i.getBigUint64(s,!0)),s+=8;break;case R.Double:n[c]=i.getFloat64(s,!0),s+=8;break;case R.DateTime:case R.String:var f=i.getUint32(s,!0);s+=4,n[c]=Z.decode(r.subarray(s,s+f)),s+=f;break;default:throw new Error("Unknown type "+u.type)}}return n}
/*! *****************************************************************************
        Copyright (c) Microsoft Corporation.

        Permission to use, copy, modify, and/or distribute this software for any
        purpose with or without fee is hereby granted.

        THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
        REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
        AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
        INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
        LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
        OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
        PERFORMANCE OF THIS SOFTWARE.
        ***************************************************************************** */(t,i);return r(o,s)}(t,e,(function(t,e){return function t(e,n){var r;if(r=n===U.Unknown?null==e?void 0:e.type():n,e){if(e.xyArray()){var i=Array.from(e.xyArray()),o=e.endsArray(),s=o?Array.from(o.map((function(t){return t<<1}))):[i.length];switch(r){case U.Point:return new w.default(i);case U.MultiPoint:return new k.default(i,"XY");case U.LineString:return new x.default(i,"XY");case U.MultiLineString:return new O.default(i,"XY",s);case U.Polygon:return new I.default(i,"XY",s)}}else if(r===U.MultiPolygon){for(var a=new C.default([]),u=0;u<e.partsLength();u++)a.appendPolygon(t(e.parts(u),U.Polygon));return a}throw new Error("Unknown type")}}(t,e)}),(function(t,e){return function(t,e){var n=new _.default(t);return e&&n.setProperties&&n.setProperties(e),n}(t,e)}))}t.deserialize=function(t,e,n){return t instanceof Uint8Array?function(t,e){return function(t,e,n){if(!t.subarray(0,3).every((function(t,e){return Pt[e]===t})))throw new Error("Not a FlatGeobuf file");var r=new T(t),i=r.readUint32(Pt.length);r.setPosition(Pt.length+4);var o=Y.fromByteBuffer(r);n&&n(o);var s=Pt.length+4+i,a=o.indexNodeSize,u=o.featuresCount;a>0&&(s+=xt(u,a));for(var c=[];s<r.capacity();){var f=r.readUint32(s);r.setPosition(s+4);var l=z.getRootAsFeature(r);c.push(e(l,o)),s+=4+f}return c}(t,At,e)}(t,n):t instanceof ReadableStream?function(t,e){return function(t,e,n){return Rt.apply(this,arguments)}(t,At,e)}(t,n):function(t,e,n){return(r=m(regeneratorRuntime.mark((function t(e,n,r,i){var o,s,a,u,c,f,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(Ft.open(e));case 2:o=t.sent,kt.debug("opened reader"),i&&i(o.header),s=!1,a=!1,t.prev=6,c=y(o.selectBbox(n));case 8:return t.next=10,g(c.next());case 10:if(!(s=!(f=t.sent).done)){t.next=17;break}return l=f.value,t.next=14,r(l,o.header);case 14:s=!1,t.next=8;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(6),a=!0,u=t.t0;case 23:if(t.prev=23,t.prev=24,!s||null==c.return){t.next=28;break}return t.next=28,g(c.return());case 28:if(t.prev=28,!a){t.next=31;break}throw u;case 31:return t.finish(28);case 32:return t.finish(23);case 33:case"end":return t.stop()}}),t,null,[[6,19,23,33],[24,,28,32]])}))),function(t,e,n,i){return r.apply(this,arguments)})(t,e,At,n);var r}(t,e,n)},t.serialize=function(t){return jt(t)},Object.defineProperty(t,"__esModule",{value:!0})}))},function(t,e,n){"use strict";n.r(e),n.d(e,"createStyleFunction",(function(){return f}));var r,i=n(28),o=n(25),s=n(18),a=n(13),u=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){function e(e){var n=t.call(this)||this;if(n.on,n.once,n.un,n.id_=void 0,n.geometryName_="geometry",n.style_=null,n.styleFunction_=void 0,n.geometryChangeKey_=null,n.addChangeListener(n.geometryName_,n.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var r=e;n.setGeometry(r)}else{var i=e;n.setProperties(i)}return n}return u(e,t),e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var r=this.getStyle();return r&&t.setStyle(r),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(a.c)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Object(a.a)(t,o.a.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?f(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(i.a);function f(t){return"function"==typeof t?t:(Array.isArray(t)?e=t:(Object(s.a)("function"==typeof t.getZIndex,41),e=[t]),function(){return e});var e}e.default=c},function(t,e,n){"use strict";n.r(e);var r,i=n(3),o=n(2),s=n(20),a=n(8),u=n(6),c=n(0),f=n(7),l=n(11),h=n(4),d=n(9),b=n(19),p=n(14),v=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),y=function(t){function e(e,n,r){var i=t.call(this)||this;if(i.ends_=[],i.maxDelta_=-1,i.maxDeltaRevision_=-1,Array.isArray(e[0]))i.setCoordinates(e,n);else if(void 0!==n&&r)i.setFlatCoordinates(n,e),i.ends_=r;else{for(var o=i.getLayout(),s=e,a=[],u=[],c=0,f=s.length;c<f;++c){var l=s[c];0===c&&(o=l.getLayout()),Object(h.c)(a,l.getFlatCoordinates()),u.push(a.length)}i.setFlatCoordinates(o,a),i.ends_=u}return i}return v(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?Object(h.c)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){return r<Object(c.b)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(u.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(u.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,r))},e.prototype.getCoordinateAtM=function(t,e,n){if(this.layout!=i.a.XYM&&this.layout!=i.a.XYZM||0===this.flatCoordinates.length)return null;var r=void 0!==e&&e,o=void 0!==n&&n;return Object(b.c)(this.flatCoordinates,0,this.ends_,this.stride,t,r,o)},e.prototype.getCoordinates=function(){return Object(d.b)(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new s.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,n=this.layout,r=[],i=0,o=0,a=e.length;o<a;++o){var u=e[o],c=new s.default(t.slice(i,u),n);r.push(c),i=u}return r},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,n=0,r=this.ends_,i=this.stride,o=0,s=r.length;o<s;++o){var a=r[o],u=Object(b.a)(e,n,a,i,.5);Object(h.c)(t,u),n=a}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=Object(l.b)(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,r),new e(n,i.a.XY,r)},e.prototype.getType=function(){return o.a.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(p.b)(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=Object(f.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(a.a);e.default=y},function(t,e,n){var r,i,o;function s(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,i)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){s(o,r,i,a,u,"next",t)}function u(t){s(o,r,i,a,u,"throw",t)}a(void 0)}))}}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(t){a=!0,i=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=l(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function l(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){var n={},r=!1;function i(n,i){return r=!0,i=new Promise((function(e){e(t[n](i))})),{done:!1,value:e(i)}}return n["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},n.next=function(t){return r?(r=!1,t):i("next",t)},"function"==typeof t.throw&&(n.throw=function(t){if(r)throw r=!1,t;return i("throw",t)}),"function"==typeof t.return&&(n.return=function(t){return r?(r=!1,t):i("return",t)}),n}function _(t){var e,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(e=t[n]))return e.call(t);if(r&&null!=(e=t[r]))return new g(e.call(t));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function g(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return(g=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new g(t)}function m(t){return new x(t)}function w(t){return function(){return new k(t.apply(this,arguments))}}function k(t){var e,n;function r(e,n){try{var o=t[e](n),s=o.value,a=s instanceof x;Promise.resolve(a?s.wrapped:s).then((function(t){a?r("return"===e?"return":"next",t):i(o.done?"return":"normal",t)}),(function(t){r("throw",t)}))}catch(t){i("throw",t)}}function i(t,i){switch(t){case"return":e.resolve({value:i,done:!0});break;case"throw":e.reject(i);break;default:e.resolve({value:i,done:!1})}(e=e.next)?r(e.key,e.arg):n=null}this._invoke=function(t,i){return new Promise((function(o,s){var a={key:t,arg:i,resolve:o,reject:s,next:null};n?n=n.next=a:(e=n=a,r(t,i))}))},"function"!=typeof t.return&&(this.return=void 0)}function x(t){this.wrapped=t}k.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},k.prototype.next=function(t){return this._invoke("next",t)},k.prototype.throw=function(t){return this._invoke("throw",t)},k.prototype.return=function(t){return this._invoke("return",t)},function(n,s){"object"==v(e)&&void 0!==t?s(e):(i=[e],void 0===(o="function"==typeof(r=s)?r.apply(e,i):r)||(t.exports=o))}(0,(function(t){"use strict";var e,n=b((function t(e,n,r,i,o,s,a,u,c,f){p(this,t),this.name=e,this.type=n,this.title=r,this.description=i,this.width=o,this.precision=s,this.scale=a,this.nullable=u,this.unique=c,this.primary_key=f}));!function(t){t[t.Byte=0]="Byte",t[t.UByte=1]="UByte",t[t.Bool=2]="Bool",t[t.Short=3]="Short",t[t.UShort=4]="UShort",t[t.Int=5]="Int",t[t.UInt=6]="UInt",t[t.Long=7]="Long",t[t.ULong=8]="ULong",t[t.Float=9]="Float",t[t.Double=10]="Double",t[t.String=11]="String",t[t.Json=12]="Json",t[t.DateTime=13]="DateTime",t[t.Binary=14]="Binary"}(e||(e={}));var r,i,o=b((function t(e,n,r,i,o,s){p(this,t),this.org=e,this.code=n,this.name=r,this.description=i,this.wkt=o,this.code_string=s})),s=new Int32Array(2),l=new Float32Array(s.buffer),h=new Float64Array(s.buffer),d=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],v=function(){function t(e,n){p(this,t),this.low=0|e,this.high=0|n}return b(t,[{key:"toFloat64",value:function(){return(this.low>>>0)+4294967296*this.high}},{key:"equals",value:function(t){return this.low==t.low&&this.high==t.high}}],[{key:"create",value:function(e,n){return 0==e&&0==n?t.ZERO:new t(e,n)}}]),t}();v.ZERO=new v(0,0),function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(r||(r={}));var g=function(){function t(e){p(this,t),this.bytes_=e,this.position_=0}return b(t,[{key:"clear",value:function(){this.position_=0}},{key:"bytes",value:function(){return this.bytes_}},{key:"position",value:function(){return this.position_}},{key:"setPosition",value:function(t){this.position_=t}},{key:"capacity",value:function(){return this.bytes_.length}},{key:"readInt8",value:function(t){return this.readUint8(t)<<24>>24}},{key:"readUint8",value:function(t){return this.bytes_[t]}},{key:"readInt16",value:function(t){return this.readUint16(t)<<16>>16}},{key:"readUint16",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8}},{key:"readInt32",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}},{key:"readUint32",value:function(t){return this.readInt32(t)>>>0}},{key:"readInt64",value:function(t){return new v(this.readInt32(t),this.readInt32(t+4))}},{key:"readUint64",value:function(t){return new v(this.readUint32(t),this.readUint32(t+4))}},{key:"readFloat32",value:function(t){return s[0]=this.readInt32(t),l[0]}},{key:"readFloat64",value:function(t){return s[d?0:1]=this.readInt32(t),s[d?1:0]=this.readInt32(t+4),h[0]}},{key:"writeInt8",value:function(t,e){this.bytes_[t]=e}},{key:"writeUint8",value:function(t,e){this.bytes_[t]=e}},{key:"writeInt16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeUint16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeInt32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeUint32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeInt64",value:function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)}},{key:"writeUint64",value:function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)}},{key:"writeFloat32",value:function(t,e){l[0]=e,this.writeInt32(t,s[0])}},{key:"writeFloat64",value:function(t,e){h[0]=e,this.writeInt32(t,s[d?0:1]),this.writeInt32(t+4,s[d?1:0])}},{key:"getBufferIdentifier",value:function(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}},{key:"__offset",value:function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}},{key:"__union",value:function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}},{key:"__string",value:function(t,e){t+=this.readInt32(t);var n=this.readInt32(t),i="",o=0;if(t+=4,e===r.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;o<n;){var s=void 0,a=this.readUint8(t+o++);if(a<192)s=a;else{var u=this.readUint8(t+o++);if(a<224)s=(31&a)<<6|63&u;else{var c=this.readUint8(t+o++);s=a<240?(15&a)<<12|(63&u)<<6|63&c:(7&a)<<18|(63&u)<<12|(63&c)<<6|63&this.readUint8(t+o++)}}s<65536?i+=String.fromCharCode(s):(s-=65536,i+=String.fromCharCode(55296+(s>>10),56320+(1023&s)))}return i}},{key:"__union_with_string",value:function(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)}},{key:"__indirect",value:function(t){return t+this.readInt32(t)}},{key:"__vector",value:function(t){return t+this.readInt32(t)+4}},{key:"__vector_len",value:function(t){return this.readInt32(t+this.readInt32(t))}},{key:"__has_identifier",value:function(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(var e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}},{key:"createLong",value:function(t,e){return v.create(t,e)}},{key:"createScalarList",value:function(t,e){for(var n=[],r=0;r<e;++r)null!==t(r)&&n.push(t(r));return n}},{key:"createObjList",value:function(t,e){for(var n=[],r=0;r<e;++r){var i=t(r);null!==i&&n.push(i.unpack())}return n}}],[{key:"allocate",value:function(e){return new t(new Uint8Array(e))}}]),t}(),k=function(){function t(e){var n;p(this,t),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,n=e||1024,this.bb=g.allocate(n),this.space=n}return b(t,[{key:"clear",value:function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}},{key:"forceDefaults",value:function(t){this.force_defaults=t}},{key:"dataBuffer",value:function(){return this.bb}},{key:"asUint8Array",value:function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}},{key:"prep",value:function(e,n){e>this.minalign&&(this.minalign=e);for(var r=1+~(this.bb.capacity()-this.space+n)&e-1;this.space<r+e+n;){var i=this.bb.capacity();this.bb=t.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}},{key:"pad",value:function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}},{key:"writeInt8",value:function(t){this.bb.writeInt8(this.space-=1,t)}},{key:"writeInt16",value:function(t){this.bb.writeInt16(this.space-=2,t)}},{key:"writeInt32",value:function(t){this.bb.writeInt32(this.space-=4,t)}},{key:"writeInt64",value:function(t){this.bb.writeInt64(this.space-=8,t)}},{key:"writeFloat32",value:function(t){this.bb.writeFloat32(this.space-=4,t)}},{key:"writeFloat64",value:function(t){this.bb.writeFloat64(this.space-=8,t)}},{key:"addInt8",value:function(t){this.prep(1,0),this.writeInt8(t)}},{key:"addInt16",value:function(t){this.prep(2,0),this.writeInt16(t)}},{key:"addInt32",value:function(t){this.prep(4,0),this.writeInt32(t)}},{key:"addInt64",value:function(t){this.prep(8,0),this.writeInt64(t)}},{key:"addFloat32",value:function(t){this.prep(4,0),this.writeFloat32(t)}},{key:"addFloat64",value:function(t){this.prep(8,0),this.writeFloat64(t)}},{key:"addFieldInt8",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))}},{key:"addFieldInt16",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))}},{key:"addFieldInt32",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))}},{key:"addFieldInt64",value:function(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))}},{key:"addFieldFloat32",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))}},{key:"addFieldFloat64",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))}},{key:"addFieldOffset",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))}},{key:"addFieldStruct",value:function(t,e,n){e!=n&&(this.nested(e),this.slot(t))}},{key:"nested",value:function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}},{key:"notNested",value:function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}},{key:"slot",value:function(t){null!==this.vtable&&(this.vtable[t]=this.offset())}},{key:"offset",value:function(){return this.bb.capacity()-this.space}},{key:"addOffset",value:function(t){this.prep(4,0),this.writeInt32(this.offset()-t+4)}},{key:"startObject",value:function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}},{key:"endObject",value:function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var n=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var r=2*(n+2);this.addInt16(r);var i=0,o=this.space;t:for(e=0;e<this.vtables.length;e++){var s=this.bb.capacity()-this.vtables[e];if(r==this.bb.readInt16(s)){for(var a=2;a<r;a+=2)if(this.bb.readInt16(o+a)!=this.bb.readInt16(s+a))continue t;i=this.vtables[e];break}}return i?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,i-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}},{key:"finish",value:function(t,e,n){var r=n?4:0;if(e){var i=e;if(this.prep(this.minalign,8+r),4!=i.length)throw new Error("FlatBuffers: file identifier must be length 4");for(var o=3;o>=0;o--)this.writeInt8(i.charCodeAt(o))}this.prep(this.minalign,4+r),this.addOffset(t),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}},{key:"finishSizePrefixed",value:function(t,e){this.finish(t,e,!0)}},{key:"requiredField",value:function(t,e){var n=this.bb.capacity()-t,r=n-this.bb.readInt32(n);if(0==this.bb.readInt16(r+e))throw new Error("FlatBuffers: field "+e+" must be set")}},{key:"startVector",value:function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(4,t*e),this.prep(n,t*e)}},{key:"endVector",value:function(){return this.writeInt32(this.vector_num_elems),this.offset()}},{key:"createSharedString",value:function(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);var e=this.createString(t);return this.string_maps.set(t,e),e}},{key:"createString",value:function(t){if(!t)return 0;var e;if(t instanceof Uint8Array)e=t;else{e=[];for(var n=0;n<t.length;){var r=void 0,i=t.charCodeAt(n++);(r=i<55296||i>=56320?i:(i<<10)+t.charCodeAt(n++)+-56613888)<128?e.push(r):(r<2048?e.push(r>>6&31|192):(r<65536?e.push(r>>12&15|224):e.push(r>>18&7|240,r>>12&63|128),e.push(r>>6&63|128)),e.push(63&r|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(var o=0,s=this.space,a=this.bb.bytes();o<e.length;o++)a[s++]=e[o];return this.endVector()}},{key:"createLong",value:function(t,e){return v.create(t,e)}},{key:"createObjectOffset",value:function(t){return null===t?0:"string"==typeof t?this.createString(t):t.pack(this)}},{key:"createObjectOffsetList",value:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];if(null===r)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");e.push(this.createObjectOffset(r))}return e}},{key:"createStructOffsetList",value:function(t,e){return e(this,t.length),this.createObjectOffsetList(t),this.endVector()}}],[{key:"growByteBuffer",value:function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,r=g.allocate(n);return r.setPosition(n-e),r.bytes().set(t.bytes(),n-e),r}}]),t}(),x=function(){function t(){p(this,t),this.bb=null,this.bb_pos=0}return b(t,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"type",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):e.Byte}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"width",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"precision",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"scale",value:function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"nullable",value:function(){var t=this.bb.__offset(this.bb_pos,18);return!t||!!this.bb.readInt8(this.bb_pos+t)}},{key:"unique",value:function(){var t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"primaryKey",value:function(){var t=this.bb.__offset(this.bb_pos,22);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__string(this.bb_pos+e,t):null}}],[{key:"getRootAsColumn",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsColumn",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startColumn",value:function(t){t.startObject(11)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addType",value:function(t,n){t.addFieldInt8(1,n,e.Byte)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWidth",value:function(t,e){t.addFieldInt32(4,e,-1)}},{key:"addPrecision",value:function(t,e){t.addFieldInt32(5,e,-1)}},{key:"addScale",value:function(t,e){t.addFieldInt32(6,e,-1)}},{key:"addNullable",value:function(t,e){t.addFieldInt8(7,+e,1)}},{key:"addUnique",value:function(t,e){t.addFieldInt8(8,+e,0)}},{key:"addPrimaryKey",value:function(t,e){t.addFieldInt8(9,+e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"endColumn",value:function(t){var e=t.endObject();return t.requiredField(e,4),e}},{key:"createColumn",value:function(e,n,r,i,o,s,a,u,c,f,l,h){return t.startColumn(e),t.addName(e,n),t.addType(e,r),t.addTitle(e,i),t.addDescription(e,o),t.addWidth(e,s),t.addPrecision(e,a),t.addScale(e,u),t.addNullable(e,c),t.addUnique(e,f),t.addPrimaryKey(e,l),t.addMetadata(e,h),t.endColumn(e)}}]),t}(),O=function(){function t(){p(this,t),this.bb=null,this.bb_pos=0}return b(t,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"org",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"code",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"wkt",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"codeString",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}}],[{key:"getRootAsCrs",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsCrs",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startCrs",value:function(t){t.startObject(6)}},{key:"addOrg",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addCode",value:function(t,e){t.addFieldInt32(1,e,0)}},{key:"addName",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWkt",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"addCodeString",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"endCrs",value:function(t){return t.endObject()}},{key:"createCrs",value:function(e,n,r,i,o,s,a){return t.startCrs(e),t.addOrg(e,n),t.addCode(e,r),t.addName(e,i),t.addDescription(e,o),t.addWkt(e,s),t.addCodeString(e,a),t.endCrs(e)}}]),t}();!function(t){t[t.Unknown=0]="Unknown",t[t.Point=1]="Point",t[t.LineString=2]="LineString",t[t.Polygon=3]="Polygon",t[t.MultiPoint=4]="MultiPoint",t[t.MultiLineString=5]="MultiLineString",t[t.MultiPolygon=6]="MultiPolygon",t[t.GeometryCollection=7]="GeometryCollection",t[t.CircularString=8]="CircularString",t[t.CompoundCurve=9]="CompoundCurve",t[t.CurvePolygon=10]="CurvePolygon",t[t.MultiCurve=11]="MultiCurve",t[t.MultiSurface=12]="MultiSurface",t[t.Curve=13]="Curve",t[t.Surface=14]="Surface",t[t.PolyhedralSurface=15]="PolyhedralSurface",t[t.TIN=16]="TIN",t[t.Triangle=17]="Triangle"}(i||(i={}));var I=function(){function t(){p(this,t),this.bb=null,this.bb_pos=0}return b(t,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"envelope",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"envelopeLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"envelopeArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"geometryType",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):i.Unknown}},{key:"hasZ",value:function(){var t=this.bb.__offset(this.bb_pos,10);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasM",value:function(){var t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasT",value:function(){var t=this.bb.__offset(this.bb_pos,14);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasTm",value:function(){var t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"columns",value:function(t,e){var n=this.bb.__offset(this.bb_pos,18);return n?(e||new x).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"featuresCount",value:function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint64(this.bb_pos+t):this.bb.createLong(0,0)}},{key:"indexNodeSize",value:function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):16}},{key:"crs",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?(t||new O).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,30);return e?this.bb.__string(this.bb_pos+e,t):null}}],[{key:"getRootAsHeader",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsHeader",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startHeader",value:function(t){t.startObject(14)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addEnvelope",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createEnvelopeVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startEnvelopeVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addGeometryType",value:function(t,e){t.addFieldInt8(2,e,i.Unknown)}},{key:"addHasZ",value:function(t,e){t.addFieldInt8(3,+e,0)}},{key:"addHasM",value:function(t,e){t.addFieldInt8(4,+e,0)}},{key:"addHasT",value:function(t,e){t.addFieldInt8(5,+e,0)}},{key:"addHasTm",value:function(t,e){t.addFieldInt8(6,+e,0)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addFeaturesCount",value:function(t,e){t.addFieldInt64(8,e,t.createLong(0,0))}},{key:"addIndexNodeSize",value:function(t,e){t.addFieldInt16(9,e,16)}},{key:"addCrs",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(11,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(12,e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(13,e,0)}},{key:"endHeader",value:function(t){return t.endObject()}},{key:"finishHeaderBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedHeaderBuffer",value:function(t,e){t.finish(e,void 0,!0)}}]),t}(),C=function(){function t(e,n,r,i,o,s,a,u){p(this,t),this.geometryType=e,this.columns=n,this.featuresCount=r,this.indexNodeSize=i,this.crs=o,this.title=s,this.description=a,this.metadata=u}return b(t,null,[{key:"fromByteBuffer",value:function(e){for(var r=I.getRootAsHeader(e),i=r.featuresCount().toFloat64(),s=r.indexNodeSize(),a=[],u=0;u<r.columnsLength();u++){var c=r.columns(u);if(!c)throw new Error("Column unexpectedly missing");if(!c.name())throw new Error("Column name unexpectedly missing");a.push(new n(c.name(),c.type(),c.title(),c.description(),c.width(),c.precision(),c.scale(),c.nullable(),c.unique(),c.primaryKey()))}var f=r.crs(),l=f?new o(f.org(),f.code(),f.name(),f.description(),f.wkt(),f.codeString()):null;return new t(r.geometryType(),a,i,s,l,r.title(),r.description(),r.metadata())}}]),t}(),P=function(){function t(){p(this,t),this.bb=null,this.bb_pos=0}return b(t,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"ends",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}},{key:"endsLength",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"endsArray",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"xy",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"xyLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"xyArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"z",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"zLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"zArray",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"m",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"mLength",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"mArray",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"t",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"tLength",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"tArray",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"tm",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}},{key:"tmLength",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"type",value:function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):i.Unknown}},{key:"parts",value:function(e,n){var r=this.bb.__offset(this.bb_pos,18);return r?(n||new t).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}},{key:"partsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}}],[{key:"getRootAsGeometry",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsGeometry",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startGeometry",value:function(t){t.startObject(8)}},{key:"addEnds",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"createEndsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}},{key:"startEndsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addXy",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createXyVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startXyVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addZ",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createZVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startZVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addM",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"createMVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startMVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addT",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"createTVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startTVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addTm",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"createTmVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}},{key:"startTmVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addType",value:function(t,e){t.addFieldInt8(6,e,i.Unknown)}},{key:"addParts",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createPartsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}},{key:"startPartsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endGeometry",value:function(t){return t.endObject()}},{key:"createGeometry",value:function(e,n,r,i,o,s,a,u,c){return t.startGeometry(e),t.addEnds(e,n),t.addXy(e,r),t.addZ(e,i),t.addM(e,o),t.addT(e,s),t.addTm(e,a),t.addType(e,u),t.addParts(e,c),t.endGeometry(e)}}]),t}();function F(t,e,n){if(0!==t.length)if(Array.isArray(t[0])){var r,i=f(t);try{for(i.s();!(r=i.n()).done;){F(r.value,e,n)}}catch(t){i.e(t)}finally{i.f()}}else 2===t.length?e.push.apply(e,c(t)):(e.push(t[0],t[1]),n.push(t[2]))}function S(t,e){for(var n=[],r=0;r<t.length;r+=2){var i=[t[r],t[r+1]];e&&i.push(e[r>>1]),n.push(i)}return n}function E(t){return t?i[t]:i.Unknown}function j(t){var e,n,r=t.coordinates,i=[],o=[],s=E(t.type),a=0;switch(t.type){case"Point":case"MultiPoint":case"LineString":F(r,i,o);break;case"MultiLineString":case"Polygon":var u=r;F(u,i,o),u.length>1&&(e=u.map((function(t){return a+=t.length})));break;case"MultiPolygon":n=r.map((function(t){return{type:"Polygon",coordinates:t}})).map(j);break;case"GeometryCollection":t.geometries&&(n=t.geometries.map(j))}return{xy:i,z:o.length>0?o:void 0,ends:e,type:s,parts:n}}function R(t,e){var n=e;if(n===i.Unknown&&(n=t.type()),n===i.GeometryCollection){for(var r=[],o=0;o<t.partsLength();o++){var s=t.parts(o),a=s.type();r.push(R(s,a))}return{type:i[n],geometries:r}}if(n===i.MultiPolygon){for(var u=[],c=0;c<t.partsLength();c++)u.push(R(t.parts(c),i.Polygon));return{type:i[n],coordinates:u.map((function(t){return t.coordinates}))}}var f=function(t,e){var n=t.xyArray(),r=t.zArray();switch(e){case i.Point:var o=Array.from(n);return r&&o.push(r[0]),o;case i.MultiPoint:case i.LineString:return S(n,r);case i.MultiLineString:case i.Polygon:return function(t,e,n){if(!n||0===n.length)return[S(t,e)];var r,i=0,o=Array.from(n).map((function(e){return t.slice(i,i=e<<1)}));return e&&(i=0,r=Array.from(n).map((function(t){return e.slice(i,i=t)}))),o.map((function(t,e){return S(t,r?r[e]:void 0)}))}(n,r,t.endsArray())}}(t,n);return{type:i[n],coordinates:f}}var U=function(){function t(){p(this,t),this.bb=null,this.bb_pos=0}return b(t,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"geometry",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?(t||new P).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"properties",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}},{key:"propertiesLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"propertiesArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"columns",value:function(t,e){var n=this.bb.__offset(this.bb_pos,8);return n?(e||new x).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}}],[{key:"getRootAsFeature",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsFeature",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startFeature",value:function(t){t.startObject(3)}},{key:"addGeometry",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addProperties",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createPropertiesVector",value:function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()}},{key:"startPropertiesVector",value:function(t,e){t.startVector(1,e,1)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endFeature",value:function(t){return t.endObject()}},{key:"finishFeatureBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedFeatureBuffer",value:function(t,e){t.finish(e,void 0,!0)}},{key:"createFeature",value:function(e,n,r,i){return t.startFeature(e),t.addGeometry(e,n),t.addProperties(e,r),t.addColumns(e,i),t.endFeature(e)}}]),t}(),T=new TextEncoder,A=new TextDecoder;function M(t,n,r){var i=r.columns,o=new k,s=0,a=1024,u=new Uint8Array(a),c=new DataView(u.buffer),f=function(t){if(!(s+t<a)){a*=2;var e=new Uint8Array(a);e.set(u),u=e,c=new DataView(u.buffer,s)}};if(i)for(var l=0;l<i.length;l++){var h=i[l],d=n[h.name];if(null!==d)switch(c.setUint16(s,l,!0),s+=2,h.type){case e.Bool:f(1),c.setUint8(s,d),s+=1;break;case e.Short:f(2),c.setInt16(s,d,!0),s+=2;break;case e.UShort:f(2),c.setUint16(s,d,!0),s+=2;break;case e.Int:f(4),c.setInt32(s,d,!0),s+=4;break;case e.UInt:f(4),c.setUint32(s,d,!0),s+=4;break;case e.Long:f(8),c.setBigInt64(s,BigInt(d),!0),s+=8;break;case e.Double:f(8),c.setFloat64(s,d,!0),s+=8;break;case e.DateTime:case e.String:var b=T.encode(d);f(4),c.setUint32(s,b.length,!0),s+=4,f(b.length),u.set(b,s),s+=b.length;break;default:throw new Error("Unknown type "+h.type)}}var p=null;s>0&&(p=U.createPropertiesVector(o,u.slice(0,s)));var v=function t(e,n){var r=n.xy,i=n.z,o=n.ends,s=n.parts,a=n.type;if(s){var u=s.map((function(n){return t(e,n)})),c=P.createPartsVector(e,u);return P.startGeometry(e),P.addParts(e,c),P.addType(e,a),P.endGeometry(e)}var f,l,h=P.createXyVector(e,r);return i&&(f=P.createZVector(e,i)),o&&(l=P.createEndsVector(e,o)),P.startGeometry(e),l&&P.addEnds(e,l),P.addXy(e,h),f&&P.addZ(e,f),P.addType(e,a),P.endGeometry(e)}(o,t);U.startFeature(o),U.addGeometry(o,v),p&&U.addProperties(o,p);var y=U.endFeature(o);return o.finishSizePrefixed(y),o.asUint8Array()}function V(t,n){var r=n.columns,i={type:"Feature",geometry:R(t.geometry(),n.geometryType)};return r&&r.length>0&&(i.properties=function(t,n){var r={};if(!n||0===n.length)return r;var i=t.propertiesArray();if(!i)return r;for(var o=new DataView(i.buffer,i.byteOffset),s=t.propertiesLength(),a=0;a<s;){var u=o.getUint16(a,!0);a+=2;var c=n[u],f=c.name;switch(c.type){case e.Bool:r[f]=!!o.getUint8(a),a+=1;break;case e.Byte:r[f]=o.getInt8(a),a+=1;break;case e.UByte:r[f]=o.getUint8(a),a+=1;break;case e.Short:r[f]=o.getInt16(a,!0),a+=2;break;case e.UShort:r[f]=o.getUint16(a,!0),a+=2;break;case e.Int:r[f]=o.getInt32(a,!0),a+=4;break;case e.UInt:r[f]=o.getUint32(a,!0),a+=4;break;case e.Long:r[f]=Number(o.getBigInt64(a,!0)),a+=8;break;case e.ULong:r[f]=Number(o.getBigUint64(a,!0)),a+=8;break;case e.Double:r[f]=o.getFloat64(a,!0),a+=8;break;case e.DateTime:case e.String:var l=o.getUint32(a,!0);a+=4,r[f]=A.decode(i.subarray(a,a+l)),a+=l;break;default:throw new Error("Unknown type "+c.type)}}return r}(t,r)),i}var L=new Uint8Array(0);function N(t,e){if(!t.length)return e;if(!e.length)return t;var n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function B(t){this._source=t,this._array=L,this._index=0}B.prototype.read=function(){var t=this,e=t._array.subarray(t._index);return t._source.read().then((function(n){return t._array=L,t._index=0,n.done?e.length>0?{done:!1,value:e}:{done:!0,value:void 0}:{done:!1,value:N(e,n.value)}}))},B.prototype.slice=function(t){if((t|=0)<0)throw new Error("invalid length");var e=this,n=this._array.length-this._index;if(this._index+t<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=t));var r=new Uint8Array(t);return r.set(this._array.subarray(this._index)),function i(){return e._source.read().then((function(o){return o.done?(e._array=L,e._index=0,n>0?r.subarray(0,n):null):n+o.value.length>=t?(e._array=o.value,e._index=t-n,r.set(o.value.subarray(0,t-n),n),r):(r.set(o.value,n),n+=o.value.length,i())}))}()},B.prototype.cancel=function(){return this._source.cancel()};
/*! *****************************************************************************
      Copyright (c) Microsoft Corporation.

      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.

      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** */
var G=function(t,e){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function q(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function D(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function z(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(t){return this instanceof X?(this.v=t,this):new X(t)}function Y(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=i[t](e)).value instanceof X?Promise.resolve(n.value.v).then(u,c):f(o[0][2],n)}catch(t){f(o[0][3],t)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function f(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}var W=function(t){function e(e){var n=t.call(this,e)||this;return Object.defineProperty(n,"name",{value:"RepeaterOverflowError",enumerable:!1}),"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(n,n.constructor.prototype):n.__proto__=n.constructor.prototype,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(n,n.constructor),n}return function(t,e){function n(){this.constructor=t}G(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error);function H(t){null!=t&&"function"==typeof t.then&&t.then(Z,Z)}!function(){function t(t){if(t<0)throw new RangeError("Capacity may not be less than 0");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),t.prototype.add=function(t){if(this.full)throw new Error("Buffer full");this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){for(;this._q.length>=this._c;)this._q.shift();this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){this._q.length<this._c&&this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}();var Z=function(){};function K(t){var e=t.err,n=Promise.resolve(t.execution).then((function(t){if(null!=e)throw e;return t}));return t.err=void 0,t.execution=n.then((function(){}),(function(){})),void 0===t.pending?n:t.pending.then((function(){return n}))}function J(t,e){var n=t.state>=3;return Promise.resolve(e).then((function(e){return!n&&t.state>=4?K(t).then((function(t){return{value:t,done:!0}})):{value:e,done:n}}))}function $(t,e){var n,r;if(!(t.state>=2))if(t.state=2,t.onnext(),t.onstop(),null==t.err&&(t.err=e),0!==t.pushes.length||void 0!==t.buffer&&!t.buffer.empty)try{for(var i=z(t.pushes),o=i.next();!o.done;o=i.next())o.value.resolve()}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}else Q(t)}function Q(t){var e,n;if(!(t.state>=3)){t.state<2&&$(t),t.state=3,t.buffer=void 0;try{for(var r=z(t.nexts),i=r.next();!i.done;i=r.next()){var o=i.value,s=void 0===t.pending?K(t):t.pending.then((function(){return K(t)}));o.resolve(J(t,s))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}t.pushes=[],t.nexts=[]}}function tt(t){t.state>=4||(t.state<3&&Q(t),t.state=4)}function et(t,e){if(H(e),t.pushes.length>=1024)throw new W("No more than 1024 pending calls to push are allowed on a single repeater.");if(t.state>=2)return Promise.resolve(void 0);var n,r=void 0===t.pending?Promise.resolve(e):t.pending.then((function(){return e}));r=r.catch((function(e){t.state<2&&(t.err=e),tt(t)})),t.nexts.length?(t.nexts.shift().resolve(J(t,r)),n=t.nexts.length?Promise.resolve(t.nexts[0].value):new Promise((function(e){return t.onnext=e}))):void 0===t.buffer||t.buffer.full?n=new Promise((function(e){return t.pushes.push({resolve:e,value:r})})):(t.buffer.add(r),n=Promise.resolve(void 0));var i=!0,o={},s=n.catch((function(t){if(i)throw t}));return o.then=function(t,e){return i=!1,Promise.prototype.then.call(n,t,e)},o.catch=function(t){return i=!1,Promise.prototype.catch.call(n,t)},o.finally=n.finally.bind(n),t.pending=r.then((function(){return s})).catch((function(e){t.err=e,tt(t)})),o}function nt(t){if(!(t.state>=1)){t.state=1;var e=et.bind(null,t),n=function(t){var e=$.bind(null,t),n=new Promise((function(e){return t.onstop=e}));return e.then=n.then.bind(n),e.catch=n.catch.bind(n),e.finally=n.finally.bind(n),e}(t);t.execution=new Promise((function(r){return r(t.executor(e,n))})),t.execution.catch((function(){return $(t)}))}}var rt,it=new WeakMap,ot=function(){function t(t,e){it.set(this,{executor:t,buffer:e,err:void 0,state:0,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:Z,onstop:Z})}return t.prototype.next=function(t){H(t);var e=it.get(this);if(void 0===e)throw new Error("WeakMap error");if(e.nexts.length>=1024)throw new W("No more than 1024 pending calls to next are allowed on a single repeater.");if(e.state<=0&&nt(e),e.onnext(t),void 0!==e.buffer&&!e.buffer.empty){var n=J(e,e.buffer.remove());if(e.pushes.length){var r=e.pushes.shift();e.buffer.add(r.value),e.onnext=r.resolve}return n}if(e.pushes.length){var i=e.pushes.shift();return e.onnext=i.resolve,J(e,i.value)}return e.state>=2?(Q(e),J(e,K(e))):new Promise((function(n){return e.nexts.push({resolve:n,value:t})}))},t.prototype.return=function(t){H(t);var e=it.get(this);if(void 0===e)throw new Error("WeakMap error");return Q(e),e.execution=Promise.resolve(e.execution).then((function(){return t})),J(e,K(e))},t.prototype.throw=function(t){var e=it.get(this);if(void 0===e)throw new Error("WeakMap error");return e.state<=0||e.state>=2||void 0!==e.buffer&&!e.buffer.empty?(Q(e),null==e.err&&(e.err=t),J(e,K(e))):this.next(Promise.reject(t))},t.prototype[Symbol.asyncIterator]=function(){return this},t.race=at,t.merge=ut,t.zip=ct,t.latest=ft,t}();function st(t,e){var n,r,i=[],o=function(t){null!=t&&"function"==typeof t[Symbol.asyncIterator]?i.push(t[Symbol.asyncIterator]()):null!=t&&"function"==typeof t[Symbol.iterator]?i.push(t[Symbol.iterator]()):i.push(function(){return Y(this,arguments,(function(){return D(this,(function(n){switch(n.label){case 0:return e.yieldValues?[4,X(t)]:[3,3];case 1:return[4,n.sent()];case 2:n.sent(),n.label=3;case 3:return e.returnValues?[4,X(t)]:[3,5];case 4:return[2,n.sent()];case 5:return[2]}}))}))}())};try{for(var s=z(t),a=s.next();!a.done;a=s.next())o(a.value)}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function at(t){var e=this,n=st(t,{returnValues:!0});return new ot((function(t,r){return q(e,void 0,void 0,(function(){var e,i,o,s,a,u;return D(this,(function(c){switch(c.label){case 0:if(!n.length)return r(),[2];i=!1,r.then((function(){e(),i=!0})),c.label=1;case 1:c.trys.push([1,,5,7]),s=void 0,a=0,u=function(){var i,u,c,f,l,h;return D(this,(function(d){switch(d.label){case 0:i=a;try{for(l=void 0,u=z(n),c=u.next();!c.done;c=u.next())f=c.value,Promise.resolve(f.next()).then((function(t){t.done?(r(),void 0===o&&(o=t)):a===i&&(a++,e(t))}),(function(t){return r(t)}))}catch(t){l={error:t}}finally{try{c&&!c.done&&(h=u.return)&&h.call(u)}finally{if(l)throw l.error}}return[4,new Promise((function(t){return e=t}))];case 1:return void 0===(s=d.sent())?[3,3]:[4,t(s.value)];case 2:d.sent(),d.label=3;case 3:return[2]}}))},c.label=2;case 2:return i?[3,4]:[5,u()];case 3:return c.sent(),[3,2];case 4:return[2,o&&o.value];case 5:return r(),[4,Promise.race(n.map((function(t){return t.return&&t.return()})))];case 6:return c.sent(),[7];case 7:return[2]}}))}))}))}function ut(t){var e=this,n=st(t,{yieldValues:!0});return new ot((function(t,r){return q(e,void 0,void 0,(function(){var e,i,o,s=this;return D(this,(function(a){switch(a.label){case 0:if(!n.length)return r(),[2];e=[],i=!1,r.then((function(){var t,n;i=!0;try{for(var r=z(e),o=r.next();!o.done;o=r.next())(0,o.value)()}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}})),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,Promise.all(n.map((function(n,a){return q(s,void 0,void 0,(function(){var s;return D(this,(function(u){switch(u.label){case 0:u.trys.push([0,,6,9]),u.label=1;case 1:return i?[3,5]:(Promise.resolve(n.next()).then((function(t){return e[a](t)}),(function(t){return r(t)})),[4,new Promise((function(t){e[a]=t}))]);case 2:return void 0===(s=u.sent())?[3,4]:s.done?(o=s,[2]):[4,t(s.value)];case 3:u.sent(),u.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return n.return?[4,n.return()]:[3,8];case 7:u.sent(),u.label=8;case 8:return[7];case 9:return[2]}}))}))})))];case 2:return a.sent(),[2,o&&o.value];case 3:return r(),[7];case 4:return[2]}}))}))}))}function ct(t){var e=this,n=st(t,{returnValues:!0});return new ot((function(t,r){return q(e,void 0,void 0,(function(){var e,i,o,s;return D(this,(function(a){switch(a.label){case 0:if(!n.length)return r(),[2,[]];i=!1,r.then((function(){e(),i=!0})),a.label=1;case 1:a.trys.push([1,,6,8]),a.label=2;case 2:return i?[3,5]:(Promise.all(n.map((function(t){return t.next()}))).then((function(t){return e(t)}),(function(t){return r(t)})),[4,new Promise((function(t){return e=t}))]);case 3:return void 0===(o=a.sent())?[2]:(s=o.map((function(t){return t.value})),o.some((function(t){return t.done}))?[2,s]:[4,t(s)]);case 4:return a.sent(),[3,2];case 5:return[3,8];case 6:return r(),[4,Promise.all(n.map((function(t){return t.return&&t.return()})))];case 7:return a.sent(),[7];case 8:return[2]}}))}))}))}function ft(t){var e=this,n=st(t,{yieldValues:!0,returnValues:!0});return new ot((function(t,r){return q(e,void 0,void 0,(function(){var e,i,o,s,a,u=this;return D(this,(function(c){switch(c.label){case 0:if(!n.length)return r(),[2,[]];i=[],o=!1,r.then((function(){var t,n;e();try{for(var r=z(i),s=r.next();!s.done;s=r.next())(0,s.value)()}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}o=!0})),c.label=1;case 1:return c.trys.push([1,,5,7]),Promise.all(n.map((function(t){return t.next()}))).then((function(t){return e(t)}),(function(t){return r(t)})),[4,new Promise((function(t){return e=t}))];case 2:return void 0===(s=c.sent())?[2]:(a=s.map((function(t){return t.value})),s.every((function(t){return t.done}))?[2,a]:[4,t(a.slice())]);case 3:return c.sent(),[4,Promise.all(n.map((function(e,n){return q(u,void 0,void 0,(function(){var u;return D(this,(function(c){switch(c.label){case 0:if(s[n].done)return[2,s[n].value];c.label=1;case 1:return o?[3,4]:(Promise.resolve(e.next()).then((function(t){return i[n](t)}),(function(t){return r(t)})),[4,new Promise((function(t){return i[n]=t}))]);case 2:return void 0===(u=c.sent())?[2,s[n].value]:u.done?[2,u.value]:(a[n]=u.value,[4,t(a.slice())]);case 3:return c.sent(),[3,1];case 4:return[2]}}))}))})))];case 4:return[2,c.sent()];case 5:return r(),[4,Promise.all(n.map((function(t){return t.return&&t.return()})))];case 6:return c.sent(),[7];case 7:return[2]}}))}))}))}var lt=function(){function t(){p(this,t),this._extraRequestThreshold=262144}return b(t,[{key:"extraRequestThreshold",value:function(){return this._extraRequestThreshold}},{key:"setExtraRequestThreshold",value:function(t){if(t<0)throw new Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=t}}]),t}();lt.global=new lt,function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error"}(rt||(rt={}));var ht=function(){function t(){p(this,t)}return b(t,null,[{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log.apply(this,[rt.Debug].concat(e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log.apply(this,[rt.Info].concat(e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log.apply(this,[rt.Warn].concat(e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log.apply(this,[rt.Error].concat(e))}},{key:"log",value:function(t){var e,n,r,i;if(!(this.logLevel>t)){for(var o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];switch(t){case rt.Debug:(e=console).debug.apply(e,s);break;case rt.Info:(n=console).info.apply(n,s);break;case rt.Warn:(r=console).warn.apply(r,s);break;case rt.Error:(i=console).error.apply(i,s)}}}}]),t}();function dt(t,e){e=Math.min(Math.max(+e,2),65535);var n=t,r=n;do{r+=n=Math.ceil(n/e)}while(1!==n);return 40*r}function bt(t,e,n,r){return pt.apply(this,arguments)}function pt(){return(pt=w(regeneratorRuntime.mark((function t(e,n,r,i){var o,s,a,c,f,l,h,d,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=function(){function t(e,n){p(this,t),this._level=n,this.nodes=e}return b(t,[{key:"level",value:function(){return this._level}},{key:"startNode",value:function(){return this.nodes[0]}},{key:"endNode",value:function(){return this.nodes[1]}},{key:"extendEndNodeToNewOffset",value:function(t){console.assert(t>this.nodes[1]),this.nodes[1]=t}},{key:"toString",value:function(){return"[NodeRange level: ".concat(this._level,", nodes: ").concat(this.nodes[0],"-").concat(this.nodes[1],"]")}}]),t}(),s=r.minX,a=r.minY,c=r.maxX,f=r.maxY,ht.info("tree items: ".concat(e,", nodeSize: ").concat(n)),l=function(t,e){if(e<2)throw new Error("Node size must be at least 2");if(0===t)throw new Error("Number of items must be greater than 0");var n=t,r=n,i=[n];do{r+=n=Math.ceil(n/e),i.push(n)}while(1!==n);var o=[];n=r;for(var s=0,a=i;s<a.length;s++){var u=a[s];o.push(n-u),n-=u}o.reverse(),i.reverse();for(var c=[],f=0;f<i.length;f++)c.push([o[f],o[f]+i[f]]);return c.reverse(),c}(e,n),h=l[0][0],d=[function(){var t=l.length-1;return new o([0,1],t)}()],v=regeneratorRuntime.mark((function t(){var r,b,p,v,y,_,g,w,k,x,O,I;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=d.shift(),ht.debug("popped node: ".concat(r,", queueLength: ").concat(d.length)),b=r.startNode(),p=b>=h,v=u(l[r.level()],2),y=v[1],_=Math.min(r.endNode()+n,y),g=_-b,t.next=10,m(i(40*b,40*g));case 10:w=t.sent,k=new Float64Array(w),x=new Uint32Array(w),O=regeneratorRuntime.mark((function t(n){var i,u,l,v,y,_,g;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(c<k[(i=5*(n-b))+0])){t.next=3;break}return t.abrupt("return","continue");case 3:if(!(f<k[i+1])){t.next=5;break}return t.abrupt("return","continue");case 5:if(!(s>k[i+2])){t.next=7;break}return t.abrupt("return","continue");case 7:if(!(a>k[i+3])){t.next=9;break}return t.abrupt("return","continue");case 9:if(u=x[8+(i<<1)],l=vt(x[9+(i<<1)],u),!p){t.next=15;break}return v=function(){if(n<e-1){var t=5*(n-b+1),r=x[8+(t<<1)];return vt(x[9+(t<<1)],r)-l}return null}(),t.next=14,[l,n-h,v];case 14:return t.abrupt("return","continue");case 15:if(y=lt.global.extraRequestThreshold()/40,!(void 0!==(_=d[d.length-1])&&_.level()==r.level()-1&&l<_.endNode()+y)){t.next=19;break}return ht.debug('Merging "nodeRange" request into existing range: '.concat(_,", newOffset: ").concat(_.endNode()," -> ").concat(l)),_.extendEndNodeToNewOffset(l),t.abrupt("return","continue");case 19:g=function(){var t=r.level()-1;return new o([l,l+1],t)}(),void 0!==_&&_.level()==g.level()?ht.info("Same level, but too far away. Pushing new request at offset: ".concat(l," rather than merging with distant ").concat(_)):ht.info("Pushing new level for ".concat(g," onto queue with nearestNodeRange: ").concat(_," since there's not already a range for this level.")),d.push(g);case 21:case"end":return t.stop()}}),t)})),I=b;case 15:if(!(I<_)){t.next=23;break}return t.delegateYield(O(I),"t0",17);case 17:if("continue"!==t.t0){t.next=20;break}return t.abrupt("continue",20);case 20:I++,t.next=15;break;case 23:case"end":return t.stop()}}),t)})),ht.debug("starting stream search with queue: ".concat(d,", numItems: ").concat(e,", nodeSize: ").concat(n,", levelBounds: ").concat(l));case 6:if(0==d.length){t.next=10;break}return t.delegateYield(v(),"t0",8);case 8:t.next=6;break;case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function vt(t,e){if(0!=(4293918720&t))throw Error("integer is too large to be safely represented");return e+t*Math.pow(2,32)}ht.logLevel=rt.Info;var yt=new Uint8Array([102,103,98,3,102,103,98,0]),_t=function(){function t(e,n,r,i){p(this,t),this.headerClient=e,this.header=n,this.headerLength=r,this.indexLength=i}var e,n;return b(t,[{key:"selectBbox",value:function(t){var e=this;return w(regeneratorRuntime.mark((function n(){var r,i,o,s,c,f,l,h,d,b,p,v,g,w,k,x,O,I;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.lengthBeforeTree(),i=e.headerClient,o=function(){var t=a(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i.getRange(r+e,n,0,"index"));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),s=[],c=[],f=!1,l=!1,n.prev=4,d=_(bt(e.header.featuresCount,e.header.indexNodeSize,t,o));case 6:return n.next=8,m(d.next());case 8:if(!(f=!(b=n.sent).done)){n.next=21;break}if(p=b.value,v=u(p,2),g=v[0],w=u(p,3),(k=w[2])||(ht.info("final feature"),k=lt.global.extraRequestThreshold()),0!=c.length){n.next=16;break}return c.push([g,k]),n.abrupt("continue",18);case 16:x=c[c.length-1],(O=g-(x[0]+x[1]))>lt.global.extraRequestThreshold()&&(ht.info("Pushing new feature batch, since gap ".concat(O," was too large")),s.push(c),c=[]),c.push([g,k]);case 18:f=!1,n.next=6;break;case 21:n.next=27;break;case 23:n.prev=23,n.t0=n.catch(4),l=!0,h=n.t0;case 27:if(n.prev=27,n.prev=28,!f||null==d.return){n.next=32;break}return n.next=32,m(d.return());case 32:if(n.prev=32,!l){n.next=35;break}throw h;case 35:return n.finish(32);case 36:return n.finish(27);case 37:return e.headerClient.logUsage("header+index"),c.length>0&&s.push(c),I=s.flatMap((function(t){return e.readFeatureBatch(t)})),n.delegateYield(y(_(ot.merge(I)),m),"t1",40);case 40:case"end":return n.stop()}}),n,null,[[4,23,27,37],[28,,32,36]])})))()}},{key:"lengthBeforeTree",value:function(){return yt.length+4+this.headerLength}},{key:"lengthBeforeFeatures",value:function(){return this.lengthBeforeTree()+this.indexLength}},{key:"buildFeatureClient",value:function(){return new gt(this.headerClient.httpClient)}},{key:"readFeatureBatch",value:function(t){var e=this;return w(regeneratorRuntime.mark((function n(){var r,i,o,s,a,c,l,h,d,b,p;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=u(t[0],1),i=r[0],o=u(t[t.length-1],2),s=o[0],a=o[1],c=s+a-i,l=e.buildFeatureClient(),h=f(t),n.prev=2,h.s();case 4:if((d=h.n()).done){n.next=12;break}return b=u(d.value,1),p=b[0],n.next=8,m(e.readFeature(l,p,c));case 8:return n.next=10,n.sent;case 10:n.next=4;break;case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(2),h.e(n.t0);case 17:return n.prev=17,h.f(),n.finish(17);case 20:l.logUsage("feature");case 21:case"end":return n.stop()}}),n,null,[[2,14,17,20]])})))()}},{key:"readFeature",value:(n=a(regeneratorRuntime.mark((function t(e,n,r){var i,o,s,a,u,c,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n+this.lengthBeforeFeatures(),t.next=3,e.getRange(i,4,r,"feature length");case 3:return s=t.sent,o=new DataView(s).getUint32(0,!0),t.next=7,e.getRange(i+4,o,r,"feature data");case 7:return a=t.sent,u=new Uint8Array(a),(c=new Uint8Array(o+4)).set(u,4),f=new g(c),t.abrupt("return",(f.setPosition(4),U.getRootAsFeature(f)));case 13:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return n.apply(this,arguments)})}],[{key:"open",value:(e=a(regeneratorRuntime.mark((function e(n){var r,i,o,s,a,u,c,f,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new gt(n),i=function(){var t,e=0;for(t=0;t<3;t++)e+=40*Math.pow(16,t);return e}(),o=2024+i,ht.debug("fetching header. minReqLength: ".concat(o," (assumedHeaderLength: 2024, assumedIndexLength: ").concat(i,")")),e.t0=Uint8Array,e.next=5,r.getRange(0,8,o,"header");case 5:if(e.t1=e.sent,(s=new e.t0(e.t1)).subarray(0,3).every((function(t,e){return yt[e]===t}))){e.next=9;break}throw ht.error("bytes: ".concat(s," != ").concat(yt)),new Error("Not a FlatGeobuf file");case 9:return ht.debug("magic bytes look good"),e.next=12,r.getRange(8,4,o,"header");case 12:if(u=e.sent,!((a=new DataView(u).getUint32(0,!0))>10485760||a<8)){e.next=16;break}throw new Error("Invalid header size");case 16:return ht.debug("headerLength: ".concat(a)),e.next=19,r.getRange(12,a,o,"header");case 19:return c=e.sent,f=new g(new Uint8Array(c)),l=C.fromByteBuffer(f),h=dt(l.featuresCount,l.indexNodeSize),e.abrupt("return",(ht.debug("completed: opening http reader"),new t(r,l,a,h)));case 24:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})}]),t}(),gt=function(){function t(e){p(this,t),this.bytesEverUsed=0,this.bytesEverFetched=0,this.buffer=new ArrayBuffer(0),this.head=0,this.httpClient="string"==typeof e?new mt(e):e}var e;return b(t,[{key:"getRange",value:(e=a(regeneratorRuntime.mark((function t(e,n,r,i){var o,s,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.bytesEverUsed+=n,o=e-this.head,s=o+n,!(o>=0&&s<=this.buffer.byteLength)){t.next=4;break}return t.abrupt("return",this.buffer.slice(o,s));case 4:return a=Math.max(n,r),this.bytesEverFetched+=a,ht.debug("requesting for new Range: ".concat(e,"-").concat(e+n-1)),t.next=9,this.httpClient.getRange(e,a,i);case 9:return this.buffer=t.sent,this.head=e,t.abrupt("return",this.buffer.slice(0,n));case 12:case"end":return t.stop()}}),t,this)}))),function(t,n,r,i){return e.apply(this,arguments)})},{key:"logUsage",value:function(t){var e=t.split(" ")[0],n=this.bytesEverUsed,r=this.bytesEverFetched,i=(100*n/r).toFixed(2);ht.info("".concat(e," bytes used/requested: ").concat(n," / ").concat(r," = ").concat(i,"%"))}}]),t}(),mt=function(){function t(e){p(this,t),this.requestsEverMade=0,this.bytesEverRequested=0,this.url=e}var e;return b(t,[{key:"getRange",value:(e=a(regeneratorRuntime.mark((function t(e,n,r){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.requestsEverMade+=1,this.bytesEverRequested+=n,i="bytes=".concat(e,"-").concat(e+n-1),ht.info("request: #".concat(this.requestsEverMade,", purpose: ").concat(r,"), bytes: (this_request: ").concat(n,", ever: ").concat(this.bytesEverRequested,"), Range: ").concat(i)),t.next=5,fetch(this.url,{headers:{Range:i}});case 5:return t.abrupt("return",t.sent.arrayBuffer());case 6:case"end":return t.stop()}}),t,this)}))),function(t,n,r){return e.apply(this,arguments)})}]),t}();function wt(){return(wt=w(regeneratorRuntime.mark((function t(e,n,r){var i,o,s,u,c,f,l,h,d,b,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="function"==typeof(o=e).slice?o:new B("function"==typeof o.read?o:o.getReader()),s=function(){var t=a(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.slice(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.t0=Uint8Array,t.next=5,m(s(8));case 5:if(t.t1=t.sent,(u=new t.t0(t.t1)).subarray(0,3).every((function(t,e){return yt[e]===t}))){t.next=9;break}throw new Error("Not a FlatGeobuf file");case 9:return t.t2=Uint8Array,t.next=12,m(s(4));case 12:return t.t3=t.sent,u=new t.t2(t.t3),c=new g(u),f=c.readUint32(0),t.t4=Uint8Array,t.next=19,m(s(f));case 19:if(t.t5=t.sent,u=new t.t4(t.t5),c=new g(u),l=C.fromByteBuffer(c),r&&r(l),h=l.indexNodeSize,d=l.featuresCount,!(h>0)){t.next=29;break}return b=dt(d,h),t.next=29,m(s(b));case 29:return t.next=31,m(kt(s,l,n));case 31:if(!(p=t.sent)){t.next=36;break}return t.next=34,p;case 34:t.next=29;break;case 36:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function kt(t,e,n){return xt.apply(this,arguments)}function xt(){return(xt=a(regeneratorRuntime.mark((function t(e,n,r){var i,o,s,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,e(4,"feature length");case 3:if(t.t1=t.sent,0!==(i=new t.t0(t.t1)).byteLength){t.next=7;break}return t.abrupt("return");case 7:return o=new g(i),s=o.readUint32(0),t.t2=Uint8Array,t.next=12,e(s,"feature data");case 12:return t.t3=t.sent,i=new t.t2(t.t3),(a=new Uint8Array(s+4)).set(i,4),(o=new g(a)).setPosition(4),t.abrupt("return",r(U.getRootAsFeature(o),n));case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ot(t){var e=new k,n=null;t.columns&&(n=I.createColumnsVector(e,t.columns.map((function(t){return function(t,e){var n=t.createString(e.name);return x.startColumn(t),x.addName(t,n),x.addType(t,e.type),x.endColumn(t)}(e,t)}))));var r=e.createString("L1");I.startHeader(e),I.addFeaturesCount(e,new v(t.featuresCount,0)),I.addGeometryType(e,t.geometryType),I.addIndexNodeSize(e,0),n&&I.addColumns(e,n),I.addName(e,r);var i=I.endHeader(e);return e.finishSizePrefixed(i),e.asUint8Array()}t.deserialize=function(t,e,n){return t instanceof Uint8Array?function(t,e){return{type:"FeatureCollection",features:function(t,e,n){if(!t.subarray(0,3).every((function(t,e){return yt[e]===t})))throw new Error("Not a FlatGeobuf file");var r=new g(t),i=r.readUint32(yt.length);r.setPosition(yt.length+4);var o=C.fromByteBuffer(r);n&&n(o);var s=yt.length+4+i,a=o.indexNodeSize,u=o.featuresCount;a>0&&(s+=dt(u,a));for(var c=[];s<r.capacity();){var f=r.readUint32(s);r.setPosition(s+4);var l=U.getRootAsFeature(r);c.push(e(l,o)),s+=4+f}return c}(t,V,e)}}(t,n):t instanceof ReadableStream?function(t,e){return function(t,e,n){return wt.apply(this,arguments)}(t,V,e)}(t,n):function(t,e,n){return(r=w(regeneratorRuntime.mark((function t(e,n,r,i){var o,s,a,u,c,f,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(_t.open(e));case 2:o=t.sent,ht.debug("opened reader"),i&&i(o.header),s=!1,a=!1,t.prev=6,c=_(o.selectBbox(n));case 8:return t.next=10,m(c.next());case 10:if(!(s=!(f=t.sent).done)){t.next=17;break}return l=f.value,t.next=14,r(l,o.header);case 14:s=!1,t.next=8;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(6),a=!0,u=t.t0;case 23:if(t.prev=23,t.prev=24,!s||null==c.return){t.next=28;break}return t.next=28,m(c.return());case 28:if(t.prev=28,!a){t.next=31;break}throw u;case 31:return t.finish(28);case 32:return t.finish(23);case 33:case"end":return t.stop()}}),t,null,[[6,19,23,33],[24,,28,32]])}))),function(t,e,n,i){return r.apply(this,arguments)})(t,e,V,n);var r}(t,e,n)},t.serialize=function(t){return function(t){var r=function(t){var r=t.features[0].properties,o=null;r&&(o=Object.keys(r).map((function(t){return new n(t,function(t){if("boolean"==typeof t)return e.Bool;if("number"==typeof t)return t%1==0?e.Int:e.Double;if("string"==typeof t)return e.String;if(null===t)return e.String;throw new Error("Unknown type (value '".concat(t,"')"))}(r[t]),null,null,-1,-1,-1,!0,!1,!1)})));var s=function(t){var e,n,r,o=f(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(e===i.Unknown)break;var a=(r=s).getGeometry?E(r.getGeometry().getType()):E(r.geometry.type);void 0===e?e=a:e!==a&&(e=i.Unknown)}}catch(t){o.e(t)}finally{o.f()}if(void 0===e)throw new Error("Could not infer geometry type for collection of features.");return e}(t.features);return new C(s,o,t.features.length,0,null,null,null,null)}(t),o=Ot(r),s=t.features.map((function(t){return M(j(t.geometry),t.properties,r)})),a=s.map((function(t){return t.length})).reduce((function(t,e){return t+e})),u=new Uint8Array(yt.length+o.length+a);u.set(o,yt.length);var c,l=yt.length+o.length,h=f(s);try{for(h.s();!(c=h.n()).done;){var d=c.value;u.set(d,l),l+=d.length}}catch(t){h.e(t)}finally{h.f()}return u.set(yt),u}(t)},Object.defineProperty(t,"__esModule",{value:!0})}))},function(t,e,n){"use strict";n.r(e);var r=n(3),i=n(2),o=n(24),s=n(21),a=n(8),u=n(6),c=n(0),f=n(7),l=n(4),h=n(27),d=n(9),b=n(14),p=n(15),v=n(17);var y,_=n(10),g=n(11),m=(y=function(t,e){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),w=function(t){function e(e,n,r){var i=t.call(this)||this;if(i.endss_=[],i.flatInteriorPointsRevision_=-1,i.flatInteriorPoints_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){for(var o=i.getLayout(),s=e,a=[],u=[],c=0,f=s.length;c<f;++c){var h=s[c];0===c&&(o=h.getLayout());for(var d=a.length,b=h.getEnds(),p=0,v=b.length;p<v;++p)b[p]+=d;Object(l.c)(a,h.getFlatCoordinates()),u.push(b)}n=o,e=a,r=u}return void 0!==n&&r?(i.setFlatCoordinates(n,e),i.endss_=r):i.setCoordinates(e,n),i}return m(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var n=this.flatCoordinates.length;Object(l.c)(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,i=(e=t.getEnds().slice()).length;r<i;++r)e[r]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,n=new Array(t),r=0;r<t;++r)n[r]=this.endss_[r].slice();var i=new e(this.flatCoordinates.slice(),this.layout,n);return i.applyProperties(this),i},e.prototype.closestPointXY=function(t,e,n,r){return r<Object(c.b)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(u.f)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(u.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,r))},e.prototype.containsXY=function(t,e){return Object(_.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return Object(v.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(p.d)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Object(d.c)(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=function(t,e,n,r){for(var i=[],o=Object(c.e)(),s=0,a=n.length;s<a;++s){var u=n[s];o=Object(c.h)(t,e,u[0],r),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=u[u.length-1]}return i}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(h.b)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new o.default(this.getFlatInteriorPoints().slice(),r.a.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(p.b)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(p.d)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=Object(g.d)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,i),new e(n,r.a.XY,i)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var n=this.endss_[t-1];e=n[n.length-1]}var r=this.endss_[t].slice(),i=r[r.length-1];if(0!==e)for(var o=0,a=r.length;o<a;++o)r[o]-=e;return new s.default(this.flatCoordinates.slice(e,i),this.layout,r)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.endss_,r=[],i=0,o=0,a=n.length;o<a;++o){var u=n[o].slice(),c=u[u.length-1];if(0!==i)for(var f=0,l=u.length;f<l;++f)u[f]-=i;var h=new s.default(e.slice(i,c),t,u);r.push(h),i=c}return r},e.prototype.getType=function(){return i.a.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return Object(b.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var n=Object(f.d)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{var r=n[n.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},e}(a.a);e.default=w},function(t,e,n){"use strict";n.r(e);var r=n(29);n.d(e,"generic",(function(){return r}));var i=n(30);n.d(e,"ol",(function(){return i}));var o=n(33);n.d(e,"geojson",(function(){return o}))}])}));
